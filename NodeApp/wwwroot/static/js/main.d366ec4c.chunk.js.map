{"version":3,"sources":["assets/logo.PNG","reducers/index.js","reducers/dialogs.js","reducers/messages.js","reducers/users.js","reducers/forwardMessage.js","actions/dialogs.js","components/Auth.js","components/Socket.js","components/Registration.js","components/AuthByPhone.js","components/SidebarItem.js","components/Sidebar.js","components/Message.js","assets/paperclip_icon.svg","assets/send_button_icon.svg","components/NewMessageField.js","components/Dialog.js","components/DialogContainer.js","assets/lock_icon.svg","components/Head.js","components/MainContainer.js","App.js","actions/user.js","serviceWorker.js","index.js","store/configureStore.js"],"names":["module","exports","__webpack_require__","p","combineReducers","dialogs","state","arguments","length","undefined","action","type","Object","toConsumableArray","newState","map","dialog","active","ConversationId","dialogId","messages","conversationId","messagesRecieved","concat","sort","a","b","a_date","Date","SendingTime","b_date","users","find","user","Id","forwardMessage","message","openDialog","Auth","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","nodes","activeNode","thiss","fetch","then","response","json","data","setState","catch","err","console","log","node","item","props","menu","react_default","createElement","es_menu","onClick","selectNode","bind","i","Item","key","Name","row","align","justify","style","height","col","className","react_router_dom","to","match","url","es_button","dropdown","overlay","href","icon","Component","webSocket","WebSocket","wSocket","Socket","onopen","wsOnConnect","onclose","event","wasClean","onmessage","onMessage","blobToJson","onerror","error","readyState","u","x","URL","createObjectURL","XMLHttpRequest","open","send","revokeObjectURL","JSON","parse","responseText","result","charactersLength","charAt","Math","floor","random","parseInt","stringify","Registration","_useState","useState","_useState2","slicedToArray","name","setName","_useState3","_useState4","surname","setSurname","_useState5","_useState6","phone","setPhone","_useState7","_useState8","email","setEmail","_useState9","_useState10","nameErr","setNameErr","_useState11","_useState12","contactsErr","setContactsErr","_useState13","_useState14","btnLoader","setbtnLoader","useEffect","socket","ErrorCode","ResponseType","cookie","set","FileAccessToken","Token","AccessToken","RefreshToken","User","window","location","replace","es_form","validateStatus","help","input","placeholder","onChange","e","target","value","textAlign","regData","Phones","NameFirst","NameSecond","About","Photo","Country","City","Birthday","Language","NodeId","Online","Emails","Blacklist","Visible","Security","Tag","RegistrationDate","RequestId","makeId","RequestType","Type","loading","AuthByPhone","phoneNumber","phoneNumberErr","phoneNumberSended","verificationCode","verificationCodeErr","redirect","btnPreloader","Message","preventDefault","VerificationType","Uid","VCode","LoginType","UidType","onSubmit","sendVerificationCode","onChangeVerifCode","htmlType","disabled","sendVerificationQuery","onChangePhone","SidebarItem","defaultAva","newsContent","refs","messageText","newsText","innerText","slice","Title","split","_this2","avatarStyle","width","backgroundSize","backgroundPosition","backgroundImage","backgroundRepeat","UnreadedCount","ref","PreviewText","connect","dispatch","components_SidebarItem","forwardingMessage","visible","setVisible","messageTime","setMessageTime","setRedirect","timestamp","date","setTime","hour","getHours","minutes","getMinutes","react_router","SenderId","GlobalId","background","Attachments","Text","src","Payload","FileId","alt","getUsers","UsersId","userId","forwardingUser","getForwardingUser","showMessage","modal","onCancel","footer","maskClosable","onReplyToMessage","_extends","assign","source","prototype","hasOwnProperty","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","transform","id","d","paperclip_icon_SvgPaperclipIcon","_ref","svgRef","xmlSpace","viewBox","y","ForwardRef","forwardRef","send_button_icon_extends","send_button_icon_objectWithoutProperties","send_button_icon_objectWithoutPropertiesLoose","send_button_icon_ref2","points","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","send_button_icon_SvgSendButtonIcon","send_button_icon_ForwardRef","currentUser","setMessageText","display","Messages","ReceiverId","ConversationType","Read","NodesId","ReplyTo","sendMessage","setMessages","setDialog","setReplyMessage","mesViewport","useRef","mess","filter","params","setTimeout","current","scrollTop","replyToMessage","replyMessage","components_Message","components_NewMessageField","NavigationMessageTime","MessageId","components_Dialog","lock_icon_extends","lock_icon_objectWithoutProperties","lock_icon_objectWithoutPropertiesLoose","lock_icon_ref2","lock_icon_ref3","lock_icon_ref4","lock_icon_ref5","lock_icon_ref6","lock_icon_ref7","lock_icon_ref8","lock_icon_ref9","lock_icon_ref10","lock_icon_ref11","lock_icon_ref12","lock_icon_ref13","lock_icon_ref14","lock_icon_ref15","lock_icon_ref16","lock_icon_ref17","lock_icon_SvgLockIcon","enableBackground","JavascriptTimeAgo","locale","ru","setDefaultAva","setUser","document","body","clientWidth","windowWidth","setWindowWidth","onresize","SecondUid","pathname","Fragment","ReactTimeAgo","logo","logout","Full","get","remove","components_Head","exact","path","render","components_Sidebar","components_DialogContainer","dialogsReceived","userReceived","messagesReceived","auth","setAuth","getDialogs","login","getSelf","Conversations","Users","UserId","spin","size","component","MainContainer","Boolean","hostname","initialState","store","createStore","rootReducer","applyMiddleware","thunk","ReactDOM","es","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d366ec4c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.024bbe57.PNG\";","import { dialogs } from './dialogs';\r\nimport { messages } from './messages';\r\nimport { users } from './users';\r\nimport { forwardMessage } from './forwardMessage';\r\nimport { combineReducers } from 'redux';\r\n\r\nexport default combineReducers({\r\n   dialogs,\r\n   messages,\r\n   users,\r\n   forwardMessage\r\n});\r\n","export function dialogs(state = [], action) {\r\n   if (action.type === 'DIALOGS_RECEIVED') {\r\n      let newState = [...state];\r\n\r\n      newState = action.dialogs;\r\n\r\n      return newState;\r\n   }\r\n   else if(action.type === 'OPEN_DIALOG') {\r\n      let newState = [...state];\r\n\r\n      newState.map(function(dialog){\r\n         dialog.active = false;\r\n\r\n         if (dialog.ConversationId === action.dialogId) {\r\n            dialog.active = true;\r\n         }\r\n      });\r\n\r\n      return newState;\r\n   }\r\n   else if(action.type === 'MESSAGES_RECEIVED'){\r\n      let newState = [...state];\r\n\r\n      // устанавливаем флаг по которому при открытии диалога проверяем запрашивались ли для него сообщения\r\n      if (action.messages.length) {\r\n         let conversationId = action.messages[0].ConversationId;\r\n         newState.map(dialog => {\r\n            if (dialog.ConversationId === conversationId) {\r\n               dialog.messagesRecieved = true;\r\n            }\r\n         });\r\n      }\r\n\r\n      return newState;\r\n   }\r\n   else {\r\n      return state;\r\n   }\r\n}\r\n","function sortMessages(messages){\r\n   return messages.sort(function(a, b){\r\n      let a_date = new Date(a.SendingTime);\r\n      let b_date = new Date(b.SendingTime);\r\n      if (a_date < b_date) {\r\n         return -1;\r\n      }\r\n      else if (a_date > b_date) {\r\n         return 1;\r\n      }\r\n      else {\r\n         return 0;\r\n      }\r\n   });\r\n}\r\n\r\nexport function messages(state = [], action) {\r\n   if(action.type === 'MESSAGES_RECEIVED') {\r\n      let newState = [...state];\r\n\r\n      newState = [...newState, ...action.messages]\r\n\r\n      return sortMessages(newState);\r\n   }\r\n   else {\r\n      return state;\r\n   }\r\n}","export function users(state = [], action) {\r\n   if(action.type === 'USER_RECEIVED') {\r\n      let newState = state;\r\n\r\n      let foundUser = newState.find(user => user.Id === action.users[0].Id);\r\n\r\n      if (!foundUser) {\r\n         newState = [...newState, ...action.users];\r\n      }\r\n\r\n      return newState;\r\n   }\r\n   else {\r\n      return state;\r\n   }\r\n}\r\n","export function forwardMessage(state = false, action) {\r\n   if(action.type === 'FORWARD_MESSAGE') {\r\n      let newState = state;\r\n\r\n      newState = action.message;\r\n\r\n      return newState;\r\n   }\r\n   else {\r\n      return state;\r\n   }\r\n}\r\n","export function dialogsReceived(dialogs) {\r\n    return {\r\n        type: 'DIALOGS_RECEIVED',\r\n        dialogs: dialogs\r\n    };\r\n}\r\n\r\nexport function messagesReceived(messages) {\r\n    return {\r\n        type: 'MESSAGES_RECEIVED',\r\n        messages: messages\r\n    };\r\n}\r\n\r\nexport function forwardingMessage(message) {\r\n    return {\r\n        type: 'FORWARD_MESSAGE',\r\n        message: message\r\n    };\r\n}\r\n\r\nexport function openDialog(dialogId) {\r\n    return {\r\n        type: 'OPEN_DIALOG',\r\n        dialogId: dialogId\r\n    };\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Row, Col, Button, Menu, Dropdown, Icon } from 'antd';\r\nimport {Link} from \"react-router-dom\";\r\n\r\nconst onClick = ({ key }) => {\r\n   console.log(`Click on item ${key}`);\r\n};\r\n\r\nclass Auth extends Component {\r\n   constructor(){\r\n      super();\r\n      this.state = {\r\n         nodes: [],\r\n         activeNode: null\r\n      };\r\n   }\r\n   componentDidMount(){\r\n      let thiss = this;\r\n      fetch('https://223421.selcdn.ru/Eruption-dev/nodes/list.json').then(function(response) {\r\n         response.json().then(function(data){\r\n            thiss.setState({\r\n               nodes: data\r\n            });\r\n         });\r\n      }).catch(function(err){\r\n         console.log(err);\r\n      });\r\n   }\r\n   selectNode(node){\r\n      this.setState({\r\n         activeNode: node.item.props.data\r\n      });\r\n   }\r\n   render() {\r\n      const menu = (\r\n         <Menu onClick={this.selectNode.bind(this)}>\r\n            {\r\n               this.state.nodes.map(function(node, i){\r\n                  return <Menu.Item key={i} data={node}>{node.Name}</Menu.Item>;\r\n               })\r\n            }\r\n            {\r\n               this.state.activeNode ? <Menu.Item key='auto' data={null}>Автоматически</Menu.Item> : null\r\n            }\r\n         </Menu>\r\n      );\r\n      return (\r\n         <Row type=\"flex\" align=\"middle\" justify=\"center\" style={{height: '100vh'}}>\r\n            <Col>\r\n               <div className='auth__type'>\r\n                  <h1>Вход</h1>\r\n                  <h2>Выберите способ входа</h2>\r\n                  <Link to={this.props.match.url + '/by-phone'}><Button type='secondary'>По номеру телефона</Button></Link><br/>\r\n                  <Button type='secondary'>По электронной почте</Button><br/>\r\n                  <Button type='secondary'>Через приложение</Button><br/><br/>\r\n                  <Link to={'/registration'}>Регистрация</Link><br/>\r\n                  <div className='auth__type_server'>\r\n                     <span>Сервер: </span>\r\n                     <Dropdown overlay={menu}>\r\n                        <a className=\"ant-dropdown-link\" href=\"#\">\r\n                           {this.state.activeNode ? this.state.activeNode.Name : 'Автоматически'} <Icon type=\"down\" />\r\n                        </a>\r\n                     </Dropdown>\r\n                  </div>\r\n               </div>\r\n            </Col>\r\n         </Row>\r\n      );\r\n   }\r\n}\r\n\r\n// Auth.defaultProps = {\r\n//    img: 'https://223421.selcdn.ru/chatix-dev/assets/img/default_avatar.png'\r\n// }\r\n\r\nexport default Auth;\r\n","const webSocket = new WebSocket('wss://testnode1.ymess.org:5000');\r\n\r\nclass Socket {\r\n   constructor(){\r\n      webSocket.onopen = function() {\r\n         console.log('Соединение установлено');\r\n         this.wsOnConnect();\r\n      }.bind(this);\r\n\r\n      webSocket.onclose = function(event) {\r\n         if (event.wasClean) {\r\n            console.log('Соединение закрыто чисто');\r\n         } else {\r\n            console.log('Обрыв соединения');\r\n         }\r\n         console.log('Код: ', event);\r\n      };\r\n\r\n      webSocket.onmessage = function(event) {\r\n         this.onMessage(this.blobToJson(event.data));\r\n         // console.log(this.blobToJson(event.data));\r\n      }.bind(this);\r\n\r\n      webSocket.onerror = function(error) {\r\n         console.log('Ошибка ', error.message);\r\n      };\r\n\r\n   }\r\n   getStatus(){\r\n      return webSocket.readyState;\r\n   }\r\n   blobToJson(data){\r\n      var u, x;\r\n      u = URL.createObjectURL(data);\r\n      x = new XMLHttpRequest();\r\n      x.open('GET', u, false);\r\n      x.send();\r\n      URL.revokeObjectURL(u);\r\n\r\n      return JSON.parse(x.responseText);\r\n   }\r\n   makeId() {\r\n      var result = '';\r\n      var characters = '0123456789';\r\n      var charactersLength = characters.length;\r\n      for ( var i = 0; i < 18; i++ ) {\r\n         result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n      }\r\n\r\n      return parseInt(result);\r\n   }\r\n   send(data){\r\n      webSocket.send(JSON.stringify(data));\r\n   }\r\n   onMessage(){}\r\n   wsOnConnect(){}\r\n}\r\n\r\nlet wSocket = new Socket();\r\n\r\nexport default wSocket;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Row, Col, Button, Form, Input } from 'antd';\r\n// import {BrowserRouter as Router, Redirect} from \"react-router-dom\";\r\nimport socket from './Socket';\r\nimport cookie from 'js-cookie';\r\n\r\nfunction Registration() {\r\n   const [name, setName] = useState('');\r\n   const [surname, setSurname] = useState('');\r\n   const [phone, setPhone] = useState('');\r\n   const [email, setEmail] = useState('');\r\n   const [nameErr, setNameErr] = useState(false);\r\n   const [contactsErr, setContactsErr] = useState(false);\r\n   const [btnLoader, setbtnLoader] = useState(false);\r\n\r\n   useEffect(() => {\r\n      socket.onMessage = function(data){\r\n         if (data.ErrorCode !== 0) {\r\n            console.log(data);\r\n         }\r\n         else {\r\n            if (data.ResponseType === 6){\r\n               cookie.set('FileAccessToken', data.FileAccessToken);\r\n               cookie.set('AccessToken', data.Token.AccessToken);\r\n               cookie.set('RefreshToken', data.Token.RefreshToken);\r\n               cookie.set('User', data.User);\r\n\r\n               window.location.replace('/');\r\n            }\r\n         }\r\n      }.bind(this);\r\n   }, [])\r\n   \r\n   const handleRegistration = () => {\r\n      if (name.length === 0) {\r\n         setNameErr('Это поле обязательно для заполнения')\r\n      }\r\n      else if (phone.length === 0 && email.length === 0) {\r\n         setContactsErr('Одно из этих полей обязательно для заполнения')\r\n      }\r\n      else {\r\n         setbtnLoader(true);\r\n         \r\n         let regData = {\r\n            'User': {\r\n               'Id': 0,\r\n               'Phones': null,\r\n               'NameFirst': name,\r\n               'NameSecond': surname,\r\n               'About': '',\r\n               'Photo': '',\r\n               'Country': '',\r\n               'City': '',\r\n               'Birthday': '',\r\n               'Language': null,\r\n               'NodeId': 0,\r\n               'Online': null,\r\n               'Emails': null,\r\n               'Blacklist': null,\r\n               'Visible': null,\r\n               'Security': null,\r\n               'Tag': 0,\r\n               'RegistrationDate': null\r\n            },\r\n            'RequestId': socket.makeId(),\r\n            'RequestType': 37,\r\n            'Type': 0\r\n         };\r\n   \r\n         socket.send(regData);\r\n      }\r\n   }\r\n\r\n   const handleSetName = (e) => {\r\n      setName(e.target.value)\r\n      setNameErr(false)\r\n   }\r\n\r\n   const handleSetSurname = (e) => {\r\n      setSurname(e.target.value)\r\n   }\r\n\r\n   const handleSetPhone = (e) => {\r\n      setPhone(e.target.value)\r\n      setContactsErr(false)\r\n   }\r\n\r\n   const handleSetEmail = (e) => {\r\n      setEmail(e.target.value)\r\n      setContactsErr(false)\r\n   }\r\n\r\n   \r\n   return (\r\n      <Row type=\"flex\" align=\"middle\" justify=\"center\" style={{height: '100vh'}}>\r\n         <Col>\r\n            <div className='auth__type'>\r\n               <h1>Регистрация</h1>\r\n               <div>\r\n                  <Form className=\"login-form\">\r\n                     <Form.Item validateStatus={nameErr ? 'error' : ''} help={nameErr ? nameErr : ''}>\r\n                        <Input placeholder=\"Имя\" onChange={handleSetName} />\r\n                     </Form.Item>\r\n                     <Form.Item validateStatus=''>\r\n                        <Input placeholder=\"Фамилия\" onChange={handleSetSurname} />\r\n                     </Form.Item>\r\n                     <Form.Item validateStatus={contactsErr ? 'error' : ''} help={contactsErr ? contactsErr : ''}>\r\n                        <Input placeholder=\"Номер телефона\" onChange={handleSetPhone} />\r\n                     </Form.Item>\r\n                     <Form.Item validateStatus={contactsErr ? 'error' : ''} help={contactsErr ? contactsErr : ''}>\r\n                        <Input placeholder=\"Email\" onChange={handleSetEmail} />\r\n                     </Form.Item>\r\n                     <Form.Item>\r\n                        <Row>\r\n                           <Col style={{ textAlign: 'center' }}>\r\n                              <Button type=\"primary\" onClick={handleRegistration} loading={btnLoader}>\r\n                                 Зарегистрироваться\r\n                              </Button>\r\n                           </Col>\r\n                        </Row>\r\n                     </Form.Item>\r\n                  </Form>\r\n               </div>\r\n            </div>\r\n         </Col>\r\n      </Row>\r\n   );\r\n}\r\n\r\nexport default Registration;\r\n","import React, { Component } from 'react';\r\nimport { Row, Col, Button, Form, Icon, Input, Checkbox } from 'antd';\r\nimport {BrowserRouter as Router, Redirect} from \"react-router-dom\";\r\nimport socket from '../components/Socket';\r\nimport cookie from 'js-cookie';\r\nimport { log } from 'util';\r\n\r\nclass AuthByPhone extends Component {\r\n   constructor(){\r\n      super();\r\n      this.state = {\r\n         phoneNumber: null,\r\n         phoneNumberErr: null,\r\n         phoneNumberSended: false,\r\n         verificationCode: null,\r\n         verificationCodeErr: null,\r\n         redirect: false,\r\n         btnPreloader: false\r\n      }\r\n   }\r\n   componentDidMount() {\r\n      socket.onMessage = function(data){\r\n         this.setState({\r\n            btnPreloader: false\r\n         });\r\n\r\n         if (data.ErrorCode !== 0) {\r\n            this.setState({\r\n               phoneNumberErr: data.Message\r\n            });\r\n         }\r\n         else {\r\n            if (data.ResponseType === 10) {\r\n               this.setState({\r\n                  phoneNumberSended: true\r\n               });\r\n            }\r\n            else if (data.ResponseType === 6){\r\n               console.log(data);\r\n               cookie.set('FileAccessToken', data.FileAccessToken);\r\n               cookie.set('AccessToken', data.Token.AccessToken);\r\n               cookie.set('RefreshToken', data.Token.RefreshToken);\r\n               cookie.set('User', data.User);\r\n\r\n               window.location.replace('/');\r\n            }\r\n         }\r\n      }.bind(this);\r\n   }\r\n   sendVerificationQuery(e){\r\n      e.preventDefault();\r\n\r\n      this.setState({\r\n         btnPreloader: true\r\n      });\r\n\r\n      let data = {\r\n         'VerificationType': 0,\r\n         'Uid': this.state.phoneNumber,\r\n         'RequestId': socket.makeId(),\r\n         'RequestType': 42,\r\n         'Type': 0\r\n      };\r\n\r\n      socket.send(data);\r\n   }\r\n   sendVerificationCode(e){\r\n      e.preventDefault();\r\n\r\n      this.setState({\r\n         btnPreloader: true\r\n      });\r\n\r\n      let data = {\r\n         'Uid': this.state.phoneNumber,\r\n         'VCode': this.state.verificationCode,\r\n         'LoginType': 1,\r\n         'UidType': 0,\r\n         'RequestId': socket.makeId(),\r\n         'RequestType': 33,\r\n         'Type': 0\r\n      };\r\n\r\n      socket.send(data);\r\n   }\r\n   onChangePhone(e){\r\n      this.setState({\r\n         phoneNumber: e.target.value,\r\n         phoneNumberErr: null\r\n      });\r\n   };\r\n   onChangeVerifCode(e){\r\n      this.setState({\r\n         verificationCode: e.target.value,\r\n         verificationCodeErr: null\r\n      });\r\n   }\r\n   render() {\r\n      return (\r\n         <Row type=\"flex\" align=\"middle\" justify=\"center\" style={{height: '100vh'}}>\r\n            <Col>\r\n               <div className='auth__type'>\r\n                  <h1>Вход</h1>\r\n                  {\r\n                     !this.state.phoneNumberSended ?\r\n                        <div>\r\n                           <h2>Введите номер телефона</h2>\r\n                              <Form onSubmit={this.sendVerificationQuery.bind(this)} className=\"login-form\">\r\n                                 <Form.Item validateStatus={this.state.phoneNumberErr ? 'error' : ''} help={this.state.phoneNumberErr ? this.state.phoneNumberErr : ''}>\r\n                                    <Input placeholder=\"Номер телефона\" onChange={this.onChangePhone.bind(this)}/>\r\n                                 </Form.Item>\r\n                                 <Form.Item>\r\n                                    <Row>\r\n                                       <Col style={{ textAlign: 'center' }}>\r\n                                          <Button type=\"primary\" htmlType=\"submit\" disabled={this.state.phoneNumber ? false : true} loading={this.state.btnPreloader ? true : false}>\r\n                                             Получить SMS с кодом\r\n                                          </Button>\r\n                                       </Col>\r\n                                    </Row>\r\n                                 </Form.Item>\r\n                              </Form>\r\n                        </div>\r\n                     :\r\n                        <div>\r\n                           <h2>Код подтверждения из SMS</h2>\r\n                           <p>Мы отправили SMS на номер {this.state.phoneNumber}. Введите полученый код в поле ниже</p>\r\n                              <Form onSubmit={this.sendVerificationCode.bind(this)} className=\"login-form\">\r\n                                 <Form.Item validateStatus={this.state.verificationCodeErr ? 'error' : ''} help={this.state.verificationCodeErr ? this.state.verificationCodeErr : ''}>\r\n                                    <Input placeholder=\"Код из SMS, 4 цифры, как пароль\" onChange={this.onChangeVerifCode.bind(this)}/>\r\n                                 </Form.Item>\r\n                                 <Form.Item>\r\n                                    <Row>\r\n                                       <Col style={{ textAlign: 'center' }}>\r\n                                          <Button type=\"primary\" htmlType=\"submit\" disabled={this.state.verificationCode ? false : true} loading={this.state.btnPreloader ? true : false}>\r\n                                             Войти\r\n                                          </Button>\r\n                                       </Col>\r\n                                    </Row>\r\n                                 </Form.Item>\r\n                              </Form>\r\n                        </div>\r\n                  }\r\n               </div>\r\n            </Col>\r\n         </Row>\r\n      );\r\n   }\r\n}\r\n\r\nexport default AuthByPhone;\r\n","import React, { Component } from 'react';\r\nimport {NavLink} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\nimport {openDialog} from '../actions/dialogs';\r\n\r\nclass SidebarItem extends Component {\r\n   constructor(){\r\n      super();\r\n      this.state = {\r\n         defaultAva: ''\r\n      }\r\n   }\r\n   componentDidMount(){\r\n      // обрезаем строку с последним сообщением (не css потому что 2 строки)\r\n      let size = 60;\r\n      let newsContent= this.refs.messageText;\r\n      let newsText = newsContent.innerText;\r\n\r\n      if(newsText.length > size){\r\n      \tnewsContent.innerText = newsText.slice(0, size) + ' ...';\r\n      }\r\n\r\n      // добавляем инициалы в стэйт если нет аватарки\r\n      if (!this.props.dialog.Photo) {\r\n         let defaultAva = this.props.dialog.Title.split(' ', 2);\r\n         defaultAva = defaultAva[0][0] + defaultAva[1][0];\r\n         this.setState({\r\n            defaultAva: defaultAva\r\n         });\r\n      }\r\n   }\r\n   openDialog(){\r\n      this.props.openDialog(this.props.dialog.ConversationId);\r\n   }\r\n   render() {\r\n      let avatarStyle = {\r\n         width: '100%',\r\n         height: '100%',\r\n         backgroundSize: 'cover',\r\n         backgroundPosition: 'center center',\r\n         backgroundImage: `url(https://testnode1.ymess.org:5000/api/Files/${this.props.dialog.Photo})`,\r\n         backgroundRepeat: 'no-repeat'\r\n      };\r\n\r\n      return (\r\n         <NavLink to={'/dialog/' + this.props.dialog.ConversationId} onClick={() => this.openDialog()}>\r\n            <div className='sidebar__item'>\r\n               <div className='sidebar__ava'>\r\n                  {\r\n                     this.props.dialog.UnreadedCount > 0 ? <div className='sidebar__badge'>{this.props.dialog.UnreadedCount}</div> : null\r\n                  }\r\n                  <div className='sidebar__photo'>\r\n                     {\r\n                        this.props.dialog.Photo ?\r\n                           <div style={avatarStyle}></div>\r\n                        :\r\n                           <div className='sidebar__photo-default'>{this.state.defaultAva}</div>\r\n                     }\r\n                  </div>\r\n               </div>\r\n               <div>\r\n                  <div className='sidebar__name'>\r\n                     <span>\r\n                        {this.props.dialog.Title}\r\n                     </span>\r\n                  </div>\r\n                  <div className='sidebar__message' ref='messageText'>{this.props.dialog.PreviewText}</div>\r\n               </div>\r\n            </div>\r\n         </NavLink>\r\n      );\r\n   }\r\n}\r\n\r\nfunction mapStateToProps(state){\r\n   return {\r\n\r\n   };\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n      openDialog: (dialogId) => dispatch(openDialog(dialogId))\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SidebarItem);\r\n","import React, { useEffect } from 'react';\r\nimport SidebarItem from '../components/SidebarItem';\r\nimport socket from '../components/Socket';\r\nimport {connect} from 'react-redux';\r\nimport {openDialog} from '../actions/dialogs';\r\n\r\nfunction Sidebar(props) {\r\n   useEffect(() => {\r\n      // console.log(props);\r\n   }, []);\r\n\r\n   function showSidebarItem(){\r\n      return props.dialogs.map(function(dialog, i){\r\n         return (\r\n            <SidebarItem dialog={dialog} key={dialog.ConversationId} />\r\n         )\r\n      })\r\n   }\r\n\r\n   return (\r\n      <div className='sidebar'>\r\n         {\r\n            showSidebarItem()\r\n         }\r\n      </div>\r\n   );\r\n}\r\n\r\nfunction mapStateToProps(state){\r\n   return {\r\n      dialogs: state.dialogs\r\n   };\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n      openDialog: (dialogId) => dispatch(openDialog(dialogId))\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Sidebar);\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Modal } from 'antd';\r\nimport {connect} from 'react-redux';\r\nimport {NavLink, Redirect} from 'react-router-dom';\r\nimport socket from '../components/Socket';\r\nimport {forwardingMessage} from '../actions/dialogs';\r\n\r\nfunction Message(props) {\r\n   const [visible, setVisible] = useState(false);\r\n   const [messageTime, setMessageTime] = useState('');\r\n   const [forwardMessage, setForwardMessage] = useState(false);\r\n   const [redirect, setRedirect] = useState(false);\r\n\r\n   useEffect(() => {\r\n      // console.log(props.user);\r\n   }, [props.user]);\r\n\r\n   useEffect(() => {\r\n      if (props.message) {\r\n         // формируем время сообщения\r\n         let timestamp = new Date(props.message.SendingTime);\r\n         let date = new Date();\r\n         date.setTime(timestamp);\r\n\r\n         let hour = date.getHours() + '';\r\n         let minutes = date.getMinutes() + '';\r\n\r\n         if (hour.length === 1) {\r\n            hour = '0' + hour\r\n         }\r\n         if (minutes.length === 1) {\r\n            minutes = '0' + minutes\r\n         }\r\n\r\n         setMessageTime(hour + ':' + minutes);\r\n\r\n         // console.log(props.message);\r\n      }\r\n   }, [props.message]);\r\n\r\n   function getForwardingUser(userId){\r\n      let forwardingUser = props.users.find(user => user.Id === userId);\r\n      if (forwardingUser) {\r\n         return ` ${forwardingUser.NameFirst} ${forwardingUser.NameSecond}`;\r\n      }\r\n   }\r\n\r\n   function showMessage(message) {\r\n      if (message.Attachments.length) {\r\n         // СООБЩЕНИЯ С ВЛОЖЕНИЯМИ\r\n         // сообщения с изображением\r\n         if (message.Attachments[0].Type === 2) {\r\n            return (\r\n               <div className='message__img' onClick={() => setVisible(true)}>\r\n                  <img src={'https://testnode1.ymess.org:5000/api/Files/' + message.Attachments[0].Payload.FileId} alt='' />\r\n               </div>\r\n            );\r\n         }\r\n         // Пересланное сообщение\r\n         else if(message.Attachments[0].Type === 5) {\r\n            // console.log(message.Attachments[0].Payload[0]);\r\n            // получаем информацию об авторе пересылаемого сообщения\r\n            // если юзера с таким id нет в списке юзеров, то делаем запрос на сервер\r\n            let foundUser = props.users.find(user => user.Id === message.Attachments[0].Payload[0].SenderId);\r\n\r\n            if (!foundUser) {\r\n               let getUsers = {\r\n                  'UsersId': [message.Attachments[0].Payload[0].SenderId],\r\n                  'RequestType': 28,\r\n                  'RequestId': socket.makeId(),\r\n                  'Type': 0\r\n               };\r\n\r\n               socket.send(getUsers);\r\n            }\r\n\r\n            return (\r\n               <div className='forwarding_message'>\r\n                  Пересланное сообщение от\r\n                     <NavLink to={'/dialog/' + message.ConversationId}>\r\n                        {getForwardingUser(message.Attachments[0].Payload[0].SenderId)}\r\n                  </NavLink>\r\n                  <div className='message__text'>\r\n                     {message.Attachments[0].Payload[0].Text}\r\n                  </div>\r\n               </div>\r\n            );\r\n         }\r\n      }\r\n      else {\r\n         // обычное сообщение с текстом\r\n         return (\r\n            message.Text ?\r\n               <div className='message__text'>\r\n                  {message.Text}\r\n               </div>\r\n            : null\r\n         );\r\n      }\r\n   }\r\n\r\n   function showMessageMenu(){\r\n      // setForwardMessage(props.message);\r\n      props.forwardingMessage(props.message);\r\n   }\r\n\r\n   const handleReplyToMessage = () => {\r\n      props.onReplyToMessage(props.message)\r\n   }\r\n\r\n   const handleForwardMessage = () => {\r\n      setRedirect(true)\r\n   }\r\n   \r\n\r\n   if (redirect) {\r\n      return <Redirect to=\"/\" />\r\n   } else {\r\n      return (\r\n         <div \r\n            className={props.users.Id === props.message.SenderId ? 'message message-out' : 'message message-in'} \r\n            onClick={showMessageMenu}\r\n            style={props.message && props.forwardMessage.GlobalId === props.message.GlobalId ? {background: '#ebf5ff'} : null}\r\n         >\r\n            {\r\n               showMessage(props.message)\r\n            }\r\n            <div className='message__time'>{messageTime}</div>\r\n            {\r\n               props.message.Attachments[0] ?\r\n                  <Modal visible={visible} onCancel={() => setVisible(false)} footer={null} maskClosable={true} >\r\n                     <img className='popup__img' src={'https://testnode1.ymess.org:5000/api/Files/' + props.message.Attachments[0].Payload.FileId} alt='' />\r\n                  </Modal>\r\n               :\r\n                  null\r\n            }\r\n            {\r\n               props.message && props.forwardMessage.GlobalId === props.message.GlobalId ? \r\n                  <div className='message-menu'>\r\n                     <ul>\r\n                        <li onClick={handleReplyToMessage}>Ответить</li>\r\n                        <li onClick={handleForwardMessage}>Переслать</li>\r\n                     </ul>\r\n                  </div>\r\n               : null\r\n            }\r\n         </div>\r\n      );\r\n   }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n   return {\r\n      users: state.users,\r\n      forwardMessage: state.forwardMessage\r\n   };\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n   return {\r\n      forwardingMessage: (message) => dispatch(forwardingMessage(message))\r\n   };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Message);\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(-198)\",\n  id: \"g69\"\n}, React.createElement(\"g\", {\n  id: \"_x33__22_\"\n}, React.createElement(\"g\", {\n  id: \"g66\"\n}, React.createElement(\"path\", {\n  id: \"path64\",\n  d: \"m 544.5,99 v 495 c 0,82.021 -66.479,148.5 -148.5,148.5 -82.021,0 -148.5,-66.479 -148.5,-148.5 V 148.5 c 0,-54.673 44.327,-99 99,-99 54.673,0 99,44.327 99,99 V 594 c 0,27.349 -22.176,49.5 -49.5,49.5 -27.349,0 -49.5,-22.151 -49.5,-49.5 V 198 H 297 v 396 c 0,54.673 44.327,99 99,99 54.673,0 99,-44.327 99,-99 V 148.5 C 495,66.479 428.521,0 346.5,0 264.479,0 198,66.479 198,148.5 V 618.75 C 210.202,716.389 295.045,792 396,792 496.955,792 581.798,716.389 594,618.75 V 99 Z\"\n}))));\n\nvar SvgPaperclipIcon = function SvgPaperclipIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    xmlSpace: \"preserve\",\n    viewBox: \"0 0 396 792\",\n    height: 0,\n    width: 0,\n    y: \"0px\",\n    x: \"0px\",\n    id: \"Capa_1\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgPaperclipIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/paperclip_icon.b4a5561e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g95\"\n}, React.createElement(\"g\", {\n  id: \"send\"\n}, React.createElement(\"polygon\", {\n  id: \"polygon92\",\n  points: \"0,38.25 0,216.75 382.5,267.75 0,318.75 0,497.25 535.5,267.75 \"\n})));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g97\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g99\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g101\"\n});\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g103\"\n});\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g105\"\n});\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g107\"\n});\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g109\"\n});\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g111\"\n});\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g113\"\n});\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g115\"\n});\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g117\"\n});\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g119\"\n});\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g121\"\n});\n\nvar _ref16 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g123\"\n});\n\nvar _ref17 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g125\"\n});\n\nvar SvgSendButtonIcon = function SvgSendButtonIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    xmlSpace: \"preserve\",\n    viewBox: \"0 0 535.5 459\",\n    height: 0,\n    width: 0,\n    y: \"0px\",\n    x: \"0px\",\n    id: \"Capa_1\",\n    ref: svgRef\n  }, props), _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgSendButtonIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/send_button_icon.56dc055f.svg\";\nexport { ForwardRef as ReactComponent };","import React, {useState, useEffect} from 'react';\r\nimport { ReactComponent as Paperclip } from '../assets/paperclip_icon.svg';\r\nimport { ReactComponent as SendBtn } from '../assets/send_button_icon.svg';\r\nimport socket from '../components/Socket';\r\nimport {connect} from 'react-redux';\r\nimport {dialogsReceived, messagesReceived} from '../actions/dialogs';\r\n\r\nfunction NewMessageField(props) {\r\n   const [messageText, setMessageText] = useState('');\r\n\r\n   useEffect(() => {\r\n      // console.log(props.match.params.id)\r\n   }, []);\r\n\r\n   function sendMessage(){\r\n      if (props.forwardMessage) {\r\n          // отправка пересылаемого сообщения\r\n          let data = {\r\n            'Messages': [{\r\n               'Id': 0,\r\n               'SendingTime': '',\r\n               'SenderId': props.user.Id,\r\n               'ReceiverId': 15,\r\n               'ConversationId': null,\r\n               'ConversationType': props.dialog.ConversationType,\r\n               'Read': false,\r\n               'NodesId': null,\r\n               'ReplyTo': null,\r\n               'Text': messageText,\r\n               'Attachments': [props.forwardMessage],\r\n               'GlobalId': null\r\n            }],\r\n            'RequestType': 39,\r\n            'RequestId': socket.makeId(),\r\n            'Type': 0\r\n         };\r\n\r\n         socket.send(data);\r\n      }\r\n      else {\r\n         // отправка обычного сообщения без вложения\r\n         let data = {\r\n            'Messages': [{\r\n               'Id': 0,\r\n               'SendingTime': '',\r\n               'SenderId': props.user.Id,\r\n               'ReceiverId': 15,\r\n               'ConversationId': null,\r\n               'ConversationType': props.dialog.ConversationType,\r\n               'Read': false,\r\n               'NodesId': null,\r\n               'ReplyTo': null,\r\n               'Text': messageText,\r\n               'Attachments': null,\r\n               'GlobalId': null\r\n            }],\r\n            'RequestType': 39,\r\n            'RequestId': socket.makeId(),\r\n            'Type': 0\r\n         };\r\n\r\n         socket.send(data);\r\n      }\r\n\r\n      setMessageText('');\r\n   }\r\n\r\n   const attach = () => {\r\n      console.log(55);\r\n   }\r\n\r\n   return (\r\n      <div className='new-message'>\r\n         <label>\r\n            <input type=\"file\" style={{display: 'none'}} />\r\n            <Paperclip className='new-message__attach' onClick={attach} />\r\n         </label>\r\n         <input type='text' className='new-message__inp' placeholder='Введите сообщение' value={messageText} onChange={ e => {setMessageText(e.target.value)}} />\r\n         <SendBtn onClick={() => {sendMessage()}} className='new-message__send' />\r\n      </div>\r\n   );\r\n}\r\n\r\nfunction mapStateToProps(state){\r\n   return {\r\n      user: state.users.find(user => user.currentUser === true),\r\n      dialogs: state.dialog,\r\n      forwardMessage: state.forwardMessage\r\n   };\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n      // openDialog: (dialogId) => dispatch(openDialog(dialogId))\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NewMessageField);\r\n","import React, {useState, useEffect, useRef} from 'react';\r\nimport Message from '../components/Message';\r\nimport NewMessageField from '../components/NewMessageField';\r\nimport socket from '../components/Socket';\r\nimport {connect} from 'react-redux';\r\nimport {openDialog} from '../actions/dialogs';\r\n\r\nfunction Dialog(props) {\r\n   const [messages, setMessages] = useState([]);\r\n   const [dialog, setDialog] = useState(null);\r\n   const [replyMessage, setReplyMessage] = useState(null);\r\n   const mesViewport = useRef(null);\r\n\r\n   useEffect(() => {\r\n      setDialog(props.dialog);\r\n      // props.dialogs.map(dialog => {\r\n      //    if (dialog.ConversationId === parseInt(props.match.params.id)) {\r\n      //       setDialog(dialog);\r\n      //    }\r\n      // });\r\n   }, [props.dialog]);\r\n\r\n   useEffect(() => {\r\n      let mess = props.messages.filter(message => message.ConversationId === parseInt(props.match.params.id));\r\n      setMessages(mess);\r\n\r\n      // console.log(mesViewport.current);\r\n      setTimeout(function(){mesViewport.current.scrollTop = 450000;}, 10);\r\n   }, [dialog, props.match.params.id, props.messages]);\r\n\r\n   useEffect(() => {\r\n      // console.log(props);\r\n   }, []);\r\n\r\n   const replyToMessage = (replyMessage) => {\r\n      setReplyMessage(replyMessage)\r\n   }\r\n\r\n   return (\r\n      <div className='dialog'>\r\n         <div className='dialog__messages-viewport' ref={mesViewport}>\r\n            <div className='dialog__messages'>\r\n               {\r\n                  dialog ?\r\n                     messages.map(message => {\r\n                        return <Message key={message.SendingTime} message={message} onReplyToMessage={replyToMessage}/>\r\n                     })\r\n                  : null\r\n               }\r\n            </div>\r\n         </div>\r\n         {\r\n            props.forwardMessage ? \r\n               <div className='reply-message'>\r\n                  Ответ на: \r\n                  {` ${props.forwardMessage.Text}`}\r\n               </div>\r\n            : null\r\n         }\r\n         <NewMessageField {...props} dialog={dialog} />\r\n      </div>\r\n   );\r\n}\r\n\r\nfunction mapStateToProps(state){\r\n   return {\r\n      dialogs: state.dialogs,\r\n      messages: state.messages,\r\n      forwardMessage: state.forwardMessage\r\n   };\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n      openDialog: (dialogId) => dispatch(openDialog(dialogId))\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Dialog);\r\n","import React, {useState, useEffect} from 'react';\r\nimport Message from '../components/Message';\r\nimport NewMessageField from '../components/NewMessageField';\r\nimport socket from '../components/Socket';\r\nimport Dialog from './Dialog';\r\nimport {connect} from 'react-redux';\r\nimport {openDialog} from '../actions/dialogs';\r\n\r\nfunction DialogContainer(props) {\r\n   const [messages, setMessages] = useState([]);\r\n   const [dialog, setDialog] = useState(null);\r\n   const dialogId = parseInt(props.match.params.id);\r\n\r\n   useEffect(() => {\r\n      props.dialogs.map(dialog => {\r\n         if (dialog.ConversationId === dialogId) {\r\n            setDialog(dialog);\r\n         }\r\n      });\r\n   }, [props.dialogs]);\r\n\r\n   useEffect(() => {\r\n      // if (props.messages) {\r\n      //    props.messages.map(message => {\r\n      //       if (message.ConversationId === dialogId) {\r\n      //          // console.log(messages);\r\n      //          let mess = messages;\r\n      //          mess.push(message);\r\n      //          // console.log(mess);\r\n      //          setMessages(messages.push(message));\r\n      //       }\r\n      //    });\r\n      // }\r\n   }, [props.messages]);\r\n\r\n   useEffect(() => {\r\n      if (dialog) {\r\n         props.openDialog(dialogId);\r\n         setMessages([]);\r\n\r\n         // если для этого диалога сообщения еще не запрашивались, то запрашиваем\r\n         if (!dialog.messagesRecieved) {\r\n            // запрос на получение сообщений\r\n            let data = {\r\n               'ConversationType': dialog.ConversationType,\r\n               'ConversationId': props.match.params.id,\r\n               'NavigationMessageTime': null,\r\n               'MessageId': null,\r\n               'RequestType': 25,\r\n               'RequestId': socket.makeId(),\r\n               'Type': 0\r\n            };\r\n\r\n            socket.send(data);\r\n         }\r\n      }\r\n   }, [dialog]);\r\n\r\n   return (\r\n      <Dialog dialog={dialog} {...props}  />\r\n   );\r\n}\r\n\r\nfunction mapStateToProps(state){\r\n   return {\r\n      dialogs: state.dialogs,\r\n      messages: state.messages\r\n   };\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n      openDialog: (dialogId) => dispatch(openDialog(dialogId))\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DialogContainer);\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M401.625,210.375v-66.938C401.625,65.025,336.6,0,258.188,0C179.775,0,114.75,65.025,114.75,143.438v66.938 c-32.513,0-57.375,24.862-57.375,57.375v95.625c0,84.15,68.85,153,153,153H306c84.15,0,153-68.85,153-153V267.75 C459,237.15,434.138,210.375,401.625,210.375z M133.875,143.438c0-68.85,55.462-124.312,124.312-124.312 c68.85,0,124.312,55.462,124.312,124.312v66.938h-19.125v-66.938c0-57.375-47.812-105.188-105.188-105.188S153,86.062,153,143.438 v66.938h-19.125V143.438z M344.25,143.438v66.938H172.125v-66.938c0-47.812,38.25-86.062,86.062-86.062 S344.25,95.625,344.25,143.438z M439.875,363.375c0,74.588-59.287,133.875-133.875,133.875h-95.625 c-74.587,0-133.875-59.287-133.875-133.875V267.75c0-21.038,17.212-38.25,38.25-38.25h286.875c21.037,0,38.25,17.212,38.25,38.25 V363.375z\"\n}), React.createElement(\"path\", {\n  d: \"M258.188,286.875c-26.775,0-47.812,21.037-47.812,47.812c0,15.3,7.65,28.688,19.125,38.25v38.25 c0,15.3,13.388,28.688,28.688,28.688s28.688-13.388,28.688-28.688v-38.25c11.475-9.562,19.125-22.95,19.125-38.25 C306,307.912,284.963,286.875,258.188,286.875z M267.75,361.463v49.725c0,5.737-3.825,9.562-9.562,9.562s-9.562-3.825-9.562-9.562 v-49.725c-11.475-3.825-19.125-15.301-19.125-26.775c0-15.3,13.388-28.688,28.688-28.688s28.688,13.388,28.688,28.688 C286.875,348.075,279.225,357.638,267.75,361.463z\"\n})));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref16 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref17 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar SvgLockIcon = function SvgLockIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    width: 0,\n    height: 0,\n    viewBox: \"0 0 516.375 516.375\",\n    style: {\n      enableBackground: \"new 0 0 516.375 516.375\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgLockIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/lock_icon.bcc89e52.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, useEffect } from 'react';\r\nimport logo from '../assets/logo.PNG';\r\nimport { ReactComponent as LockIcon } from '../assets/lock_icon.svg';\r\nimport {connect} from 'react-redux';\r\nimport socket from '../components/Socket';\r\nimport cookie from 'js-cookie';\r\nimport {BrowserRouter as Redirect} from \"react-router-dom\";\r\nimport ReactTimeAgo from 'react-time-ago';\r\nimport JavascriptTimeAgo from 'javascript-time-ago';\r\nimport ru from 'javascript-time-ago/locale/ru';\r\nimport {Link} from \"react-router-dom\";\r\n\r\nJavascriptTimeAgo.locale(ru)\r\n\r\nfunction Head(props) {\r\n   const [dialog, setDialog] = useState(null);\r\n   const [defaultAva, setDefaultAva] = useState('');\r\n   const [user, setUser] = useState(null);\r\n   const [windowWidth, setWindowWidth] = useState(document.body.clientWidth);\r\n\r\n   useEffect(() => {\r\n   }, [windowWidth]);\r\n\r\n   window.onresize = function() {\r\n      setWindowWidth(document.body.clientWidth);\r\n   };\r\n\r\n   useEffect(() => {\r\n      if (props.users && dialog) {\r\n         let user = props.users.find(user => user.Id === dialog.SecondUid);\r\n         setUser(user);\r\n      }\r\n   }, [props.users]);\r\n\r\n   useEffect(() => {\r\n      props.dialogs.map(dialog => {\r\n         if (dialog.active) {\r\n            setDialog(dialog);\r\n         }\r\n      });\r\n   }, [props.dialogs]);\r\n\r\n   useEffect(() => {\r\n      if (dialog) {\r\n         // получаем информацию о пользователе\r\n         let getUsers = {\r\n            'UsersId': [dialog.SecondUid],\r\n            'RequestType': 28,\r\n            'RequestId': socket.makeId(),\r\n            'Type': 0\r\n         };\r\n\r\n         socket.send(getUsers);\r\n\r\n         // добавляем инициалы в стэйт если нет аватарки\r\n         if (!dialog.Photo) {\r\n            let defaultAva = dialog.Title.split(' ', 2);\r\n            defaultAva = defaultAva[0][0] + defaultAva[1][0];\r\n            setDefaultAva(defaultAva);\r\n         }\r\n      }\r\n   }, [dialog]);\r\n\r\n   const logout = () => {\r\n      let logout = {\r\n         'Full': false,\r\n         'AccessToken': cookie.get('AccessToken'),\r\n         'RequestType': 34,\r\n         'RequestId': socket.makeId(),\r\n         'Type': 0\r\n      };\r\n\r\n      socket.send(logout);\r\n\r\n      cookie.remove('AccessToken');\r\n      cookie.remove('FileAccessToken');\r\n      cookie.remove('RefreshToken');\r\n      cookie.remove('User');\r\n\r\n      window.location.replace('/');\r\n   }\r\n\r\n   return (\r\n      <div className='head'>\r\n         {\r\n            windowWidth <= 675 && props.location.pathname.indexOf('dialog') > 0 ?\r\n               <>\r\n                  <div className='head__back'><Link to={'/'}>Назад</Link><br/></div>\r\n                  <div className='head__user'>\r\n                     <div className='head__ava'>\r\n                        {\r\n                           dialog ?\r\n                              dialog.Photo ?\r\n                                 <div style={{width: '100%',\r\n                                 height: '100%',\r\n                                 backgroundSize: 'cover',\r\n                                 backgroundPosition: 'center center',\r\n                                 backgroundImage: `url(https://testnode1.ymess.org:5000/api/Files/${dialog.Photo})`,\r\n                                 backgroundRepeat: 'no-repeat'}}></div>\r\n                              :\r\n                                 <div className='head__photo-default'>{defaultAva}</div>\r\n                           : null\r\n                        }\r\n                     </div>\r\n                     <div>\r\n                        <div className='head__name'>{dialog ? dialog.Title : null}</div>\r\n                        <div className='head__status'>\r\n                           {\r\n                              user ? <ReactTimeAgo date={user.Online * 1000} locale=\"ru\"/> : null\r\n                           }\r\n                        </div>\r\n                     </div>\r\n                  </div>\r\n               </>\r\n            : windowWidth <= 675 && props.location.pathname.indexOf('dialog') < 0 ?\r\n               <>\r\n                  <div className='head__logo'>\r\n                     <img src={logo} />\r\n                  </div>\r\n               </>\r\n            : \r\n               <>\r\n                  <div className='head__logo'>\r\n                     <img src={logo} />\r\n                  </div>\r\n               </>\r\n         }\r\n         <div onClick={logout} className='head__logout'>Выход</div>\r\n         {\r\n            /* <div className='head__lock'>\r\n               <LockIcon />\r\n            </div> */\r\n         }\r\n      </div>\r\n   );\r\n}\r\n\r\nfunction mapStateToProps(state){\r\n   return {\r\n      dialogs: state.dialogs,\r\n      users: state.users\r\n   };\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n      // getConversations: (url) => dispatch(getConversations(url))\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Head);\r\n","import React, { useState, useEffect } from 'react';\r\nimport {connect} from 'react-redux';\r\nimport Sidebar from '../components/Sidebar';\r\nimport DialogContainer from '../components/DialogContainer';\r\nimport Head from '../components/Head';\r\nimport {BrowserRouter as Router, Route, Link, Redirect} from \"react-router-dom\";\r\n\r\nfunction MainContainer(props) {\r\n   const [windowWidth, setWindowWidth] = useState(document.body.clientWidth);\r\n\r\n   useEffect(() => {\r\n      // console.log(props);\r\n   }, []);\r\n\r\n   useEffect(() => {\r\n   }, [windowWidth]);\r\n\r\n   window.onresize = function() {\r\n      setWindowWidth(document.body.clientWidth);\r\n   };\r\n\r\n   return (\r\n      <div className={windowWidth > 675 ? 'page' : 'page-mobile'}>\r\n         <Head {...props} />\r\n         <div className='page__content'>\r\n            <Route exact={windowWidth > 675 ? false : true} path=\"/\" render={(props)=> <Sidebar {...props} />} />\r\n            <Route path=\"/dialog/:id\" render={(props)=> <DialogContainer {...props} />} />\r\n         </div>\r\n      </div>\r\n   );\r\n}\r\n\r\nfunction mapStateToProps(state){\r\n   return {\r\n      dialogs: state.dialogs\r\n   };\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n      // getConversations: (url) => dispatch(getConversations(url))\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MainContainer);\r\n","import React, { useState, useEffect } from 'react';\nimport {connect} from 'react-redux';\nimport {dialogsReceived, messagesReceived, openDialog} from './actions/dialogs';\nimport {userReceived} from './actions/user';\nimport {BrowserRouter as Router, Route, Redirect} from \"react-router-dom\";\nimport Auth from './components/Auth';\nimport Registration from './components/Registration';\nimport {Spin} from 'antd';\nimport AuthByPhone from './components/AuthByPhone';\nimport MainContainer from './components/MainContainer';\nimport cookie from 'js-cookie';\nimport socket from './components/Socket';\n\nfunction App(props) {\n   const [auth, setAuth] = useState('CHECK_AUTH');\n\n   useEffect(() => {\n      if (auth === 'AUTH_SUCCESS') {\n         // запрос диалогов\n         let getDialogs = {\n            'NavigationMessageTime': null,\n            'RequestId': socket.makeId(),\n            'RequestType': 12,\n            'Type': 0\n         };\n\n         socket.send(getDialogs);\n      }\n   }, [auth]);\n\n   useEffect(() => {\n      socket.wsOnConnect = function(){\n         socket.onMessage = function(data){\n            console.log(data);\n            if (data.ErrorCode !== 0) {\n               console.log(data);\n            }\n            else {\n               // Ответ на запрос авторизации либо на запрос обновления токенов\n               if (data.ResponseType === 6){\n                  // запрашиваем информацию об авторизировашемся пользователе\n                  let getSelf = {\n                     'RequestId': socket.makeId(),\n                     'RequestType': 27,\n                     'Type': 0\n                  }\n\n                  socket.send(getSelf);\n\n                  cookie.set('FileAccessToken', data.FileAccessToken);\n                  cookie.set('AccessToken', data.Token.AccessToken);\n                  cookie.set('RefreshToken', data.Token.RefreshToken);\n\n                  setAuth('AUTH_SUCCESS');\n               }\n               // Ответ на запрос получения текущего пользователя\n               else if(data.ResponseType === 12){\n                  let user = data.User;\n                  user.currentUser = true;\n                  props.userReceived([user]);\n               }\n               // Ответ на запрос получения дилогов\n               else if(data.ResponseType === 15){\n                  props.dialogsReceived(data.Conversations);\n               }\n               // Ответ на запрос получения сообщений\n               else if(data.ResponseType === 9){\n                  props.messagesReceived(data.Messages);\n               }\n               // Ответ на запрос юзеров\n               else if(data.ResponseType === 0){\n                  props.userReceived(data.Users);\n               }\n            }\n         };\n\n         if (cookie.get('AccessToken')) {\n            let login;\n            if (cookie.get('User')) {\n               login = {\n                  'Token': {\n                     'UserId': JSON.parse(cookie.get('User')).Id,\n                     'AccessToken': cookie.get('AccessToken'),\n                     'RefreshToken': cookie.get('RefreshToken')\n                  },\n                  'LoginType': 0,\n                  'UidType': 1,\n                  'RequestId': socket.makeId(),\n                  'RequestType': 33,\n                  'Type': 0\n               }\n            }\n            else if (cookie.get('Phone')) {\n               login = {\n                  'Uid': cookie.get('Phone'),\n                  'Token': {\n                     'AccessToken': cookie.get('AccessToken'),\n                     'RefreshToken': cookie.get('RefreshToken')\n                  },\n                  'LoginType': 0,\n                  'UidType': 0,\n                  'RequestId': socket.makeId(),\n                  'RequestType': 33,\n                  'Type': 0\n               }\n            }\n            else if (cookie.get('Email')) {\n               console.log('По почте');\n            }\n\n            socket.send(login);\n         }\n         else {\n            setAuth('NO_AUTH');\n         }\n      }\n   }, []);\n\n   return (\n      <Router>\n         <Route path=\"/\" render={\n            auth === 'CHECK_AUTH' ?\n               () => (\n                  <div className='preloader test'>\n                     <Spin size=\"large\" />\n                  </div>\n               )\n            : auth === 'AUTH_SUCCESS' ?\n               () => (\n                  <Route path='/' component={MainContainer} />\n               )\n            : () => (<Redirect to=\"/auth\" />)\n            }\n         />\n         <Route path=\"/auth/by-phone\" component={AuthByPhone} />\n         <Route exact path=\"/auth\" component={Auth} />\n         <Route exact path=\"/registration\" component={Registration} />\n      </Router>\n   );\n}\n\nfunction mapStateToProps(state){\n   return {\n      dialogs: state.dialogs,\n      users: state.users,\n   };\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n      dialogsReceived: (dialogs) => dispatch(dialogsReceived(dialogs)),\n      openDialog: (dialogId) => dispatch(openDialog(dialogId)),\n      userReceived: (user) => dispatch(userReceived(user)),\n      messagesReceived: (messages) => dispatch(messagesReceived(messages))\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","export function userReceived(users) {\r\n    return {\r\n        type: 'USER_RECEIVED',\r\n        users: users\r\n    };\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import './css/style.css';\nimport 'antd/dist/antd.css';\nimport './css/style.scss';\nimport {Provider} from 'react-redux';\nimport configureStore from './store/configureStore';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport {BrowserRouter as Router, Route, Link, Redirect} from \"react-router-dom\";\n\nconst store = configureStore();\n\nReactDOM.render(\n   <Provider store={store}>\n      <Router>\n         <App />\n      </Router>\n   </Provider>,\n   document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import {createStore, applyMiddleware} from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from '../reducers';\r\n\r\nexport default function configureStore(initialState) {\r\n    return createStore(\r\n        rootReducer,\r\n        initialState,\r\n        applyMiddleware(thunk)\r\n    );\r\n}\r\n"],"sourceRoot":""}