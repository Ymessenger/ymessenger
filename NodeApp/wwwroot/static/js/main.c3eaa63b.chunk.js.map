{"version":3,"sources":["assets/logo.PNG","reducers/ui.js","reducers/index.js","reducers/dialogs.js","reducers/chats.js","reducers/messages.js","reducers/users.js","reducers/forwardMessage.js","reducers/auth.js","reducers/search.js","actions/dialogs.js","actions/user.js","components/Auth.js","transport/Connect.js","components/Registration.js","components/Verify.js","selectors/index.js","selectors/Message.js","selectors/Dialog.js","selectors/User.js","components/SidebarItem.js","components/HeadSidebar.js","components/Search.js","actions/search.js","components/Sidebar.js","actions/ui.js","components/HeadDialog.js","assets/tick_icon.svg","assets/double_tick_icon.svg","components/Message.js","assets/paperclip_icon.svg","assets/send_button_icon.svg","components/NewMessageField.js","components/Dialog.js","components/DialogContainer.js","components/Profile.js","components/MainContainer.js","actions/auth.js","transport/Socket.js","App.js","serviceWorker.js","index.js","store/configureStore.js"],"names":["module","exports","__webpack_require__","p","defaultState","profile","search","combineReducers","dialogs","state","arguments","length","undefined","action","type","newState","Object","toConsumableArray","activeDialog","find","dialog","active","forEach","ConversationId","payload","data","UnreadedCount","SecondUid","Id","fakeDialog","Title","NameFirst","NameSecond","Photo","ConversationType","fake","push","messages","conversationId","messagesRecieved","PreviewText","Text","chats","chatsUsers","ChatId","Users","message","mess","GlobalId","sort","a","b","a_date","Date","SendingTime","b_date","messageIDs","read","users","user","concat","forwardMessage","auth","ui","_objectSpread","text","searchResult","search_objectSpread","dialogsReceived","messagesReceived","forwardingMessage","openDialog","userReceived","Auth","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","nodes","activeNode","thiss","fetch","then","response","json","setState","catch","node","item","props","localStorage","setItem","JSON","stringify","menu","react_default","createElement","es_menu","onClick","selectNode","bind","map","i","Item","key","Name","row","align","justify","style","height","col","className","react_router_dom","to","match","url","es_button","dropdown","overlay","getItem","parse","icon","Component","webSocket","WebSocket","wSocket","Connect","onopen","console","log","wsOnConnect","onclose","event","wasClean","onmessage","blobToJson","ErrorCode","onMessage","onerror","error","readyState","u","x","URL","createObjectURL","XMLHttpRequest","open","send","revokeObjectURL","responseText","result","charactersLength","charAt","Math","floor","random","parseInt","Registration","_useState","useState","_useState2","slicedToArray","name","setName","_useState3","_useState4","surname","setSurname","_useState5","_useState6","phone","setPhone","_useState7","_useState8","email","setEmail","_useState9","_useState10","nameErr","setNameErr","_useState11","_useState12","contactsErr","setContactsErr","_useState13","_useState14","btnLoader","setbtnLoader","useEffect","socket","ResponseType","FileAccessToken","Token","AccessToken","RefreshToken","User","window","location","replace","es_form","validateStatus","help","input","placeholder","onChange","e","target","value","textAlign","regData","Phones","About","Country","City","Birthday","Language","NodeId","Online","Emails","Blacklist","Visible","Security","Tag","RegistrationDate","RequestId","makeId","RequestType","Type","loading","Verify","verifyUid","verifyErr","verifyRequestSended","verifyCode","verifyCodeErr","btnPreloader","verifyType","_this2","path","pathname","split","Message","preventDefault","Uid","VCode","LoginType","UidType","VerificationType","onSubmit","sendverifyCode","onChangeVerifCode","htmlType","disabled","sendVerificationQuery","onChangePhone","selectors","getFormatedMessages","tempMess","Attachments","Read","SenderId","getFormatedDialogs","tempDialogs","AttachmentType","IsMuted","LastMessageId","LastMessageSenderId","LastMessageSenderName","LastMessageTime","getFormatedChats","chat","tempChat","Key","NodesId","Public","getFormatedChatsUsers","tempUser","Banned","Deleted","InviterId","Joined","UserId","UserInfo","UserRole","getFormatedUser","BlackList","Confirmed","Contact","ContactsPrivacy","Encryption","Groups","Keys","getUserById","id","getUserInitials","initials","ChannelName","defaultAva","getActiveDialog","SidebarItem","newsContent","refs","messageText","newsText","innerText","slice","avatarStyle","width","backgroundSize","backgroundPosition","backgroundImage","backgroundRepeat","ref","connect","dispatch","dialogId","HeadSidebar","src","logo","alt","Search","Input","searchStart","searchEnd","searchDialogs","toLowerCase","searchRequest","SearchQuery","Direction","onSearch","enterButton","localFoundDialogs","setLocalFoundDialogs","filter","indexOf","components_HeadSidebar","components_Search","components_SidebarItem","showSearchResultUsers","showSearchResultChats","channels","showSearchResultChannels","openProfile","JavascriptTimeAgo","locale","ru","setDialog","setDefaultAva","setUser","document","body","clientWidth","windowWidth","setWindowWidth","onresize","ReactTimeAgo","date","logout","Full","remove","_extends","assign","source","prototype","hasOwnProperty","apply","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","points","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","tick_icon_SvgTickIcon","_ref","svgRef","y","viewBox","enableBackground","xmlSpace","ForwardRef","forwardRef","double_tick_icon_extends","double_tick_icon_objectWithoutProperties","double_tick_icon_objectWithoutPropertiesLoose","double_tick_icon_ref2","d","double_tick_icon_ref3","double_tick_icon_ref4","double_tick_icon_ref5","double_tick_icon_ref6","double_tick_icon_ref7","double_tick_icon_ref8","double_tick_icon_ref9","double_tick_icon_ref10","double_tick_icon_ref11","double_tick_icon_ref12","double_tick_icon_ref13","double_tick_icon_ref14","double_tick_icon_ref15","double_tick_icon_ref16","double_tick_icon_ref17","double_tick_icon_SvgDoubleTickIcon","double_tick_icon_ForwardRef","visible","setVisible","messageTime","setMessageTime","isContextMenuVisible","setSsContextMenuVisible","redirect","setRedirect","timestamp","setTime","hour","getHours","minutes","getMinutes","alignSelf","flexShrink","borderRadius","react_router","currentUser","background","Payload","FileId","Filename","userId","forwardingUser","getForwardingUser","showMessage","modal","onCancel","footer","maskClosable","paperclip_icon_extends","paperclip_icon_objectWithoutProperties","paperclip_icon_objectWithoutPropertiesLoose","paperclip_icon_ref2","transform","paperclip_icon_SvgPaperclipIcon","send_button_icon_extends","send_button_icon_objectWithoutProperties","send_button_icon_objectWithoutPropertiesLoose","send_button_icon_ref2","send_button_icon_ref3","send_button_icon_ref4","send_button_icon_ref5","send_button_icon_ref6","send_button_icon_ref7","send_button_icon_ref8","send_button_icon_ref9","send_button_icon_ref10","send_button_icon_ref11","send_button_icon_ref12","send_button_icon_ref13","send_button_icon_ref14","send_button_icon_ref15","send_button_icon_ref16","send_button_icon_ref17","send_button_icon_SvgSendButtonIcon","send_button_icon_ForwardRef","setMessageText","sendMessage","Messages","ReceiverId","ReplyTo","MessagesGlobalId","onKeyDown","keyCode","setMessages","mesViewport","useRef","MessagesId","ChannelId","setTimeout","current","scrollTop","uniqueUsers","Set","n","requestUsers","UsersId","getUsers","components_Message","size","ChannelsId","components_NewMessageField","NavigationMessageTime","MessageId","components_HeadDialog","components_Dialog","setProfile","prevProfile","setPrevProfile","getChatInfo","ChatsId","undefinedUsers","handleCancelProfile","margin","FullNumber","href","foundUser","marginTop","addEventListener","Fragment","components_Sidebar","components_DialogContainer","exact","render","components_Profile","setAuth","chatsReceived","chatsUsersReceived","readMessages","searchResultReceived","getSelf","Conversations","getDialogs","Code","Chats","getChatsUsers","NavigationUserId","ChatUsers","Channels","login","transport_Socket","spin","component","MainContainer","Boolean","hostname","initialState","store","createStore","rootReducer","applyMiddleware","thunk","ReactDOM","es","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c3eaa63b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.024bbe57.PNG\";","/* eslint-disable */\nconst defaultState = {\n  profile: null,\n  search: false\n}\n\nexport function ui(state = defaultState, action) {\n  if(action.type === 'OPEN_PROFILE') {\n    let newState = {...state};     \n    newState.profile = action.dialog\n    return newState;\n  }\n  else if (action.type === 'SEARCH_START') {\n    let newState = {...state};     \n    newState.search = action.text\n    return newState;\n  }\n  else if (action.type === 'SEARCH_END') {\n    let newState = {...state};     \n    newState.search = false\n    return newState;\n  }\n  else {\n    return state;\n  }\n}\n","import { combineReducers } from \"redux\"\nimport { dialogs } from \"./dialogs\"\nimport { chats } from \"./chats\"\nimport { messages } from \"./messages\"\nimport { users } from \"./users\"\nimport { forwardMessage } from \"./forwardMessage\"\nimport { auth } from \"./auth\"\nimport { ui } from \"./ui\"\nimport { searchResult } from \"./search\"\n\nexport default combineReducers({\n  dialogs,\n  chats,\n  messages,\n  users,\n  forwardMessage,\n  auth,\n  ui,\n  searchResult\n})\n","/* eslint-disable */\nexport function dialogs(state = [], action) {\n   if (action.type === 'DIALOGS_RECEIVED') {\n      let newState = [...state]\n      let activeDialog = newState.find(dialog => dialog.active)\n      newState = action.dialogs\n      if (activeDialog) {\n         newState.forEach(dialog => {\n            if (dialog.ConversationId === activeDialog.ConversationId) {\n               dialog.active = true\n            }\n         })\n      }\n      return newState\n   }\n   else if(action.type === 'OPEN_DIALOG') {\n      let newState = [...state]\n\n      // В action.payload.data может содержаться и сам диалог и объект юзера диалога с которым еще нет\n      // Если диалога с юзером нет, то создаем фэйковый диалог\n      // И после отправи сообщения диалог будет создан и просто запрашиваем его на сервере\n      if (action.payload.type === 'dialog') {\n         newState.forEach(function(dialog){\n            dialog.active = false\n   \n            if (dialog.ConversationId === action.payload.data.ConversationId) {\n               dialog.active = true\n               dialog.UnreadedCount = 0\n               dialog.type = action.payload.type\n            }\n         })\n      } else if (action.payload.type === 'user') {\n         let dialogWithUser = newState.find(dialog => dialog.SecondUid === action.payload.data.Id)\n         if (dialogWithUser) {\n            newState.forEach(dialog => {\n               dialog.active = false\n\n               if (dialog.SecondUid === action.payload.data.Id) {\n                  dialog.active = true\n                  dialog.UnreadedCount = 0\n                  dialog.type = 'dialog'\n               }\n            })\n         } else {\n            let fakeDialog = {}\n         \n            fakeDialog.ConversationId = action.payload.data.Id,\n            fakeDialog.Title = action.payload.data.NameFirst + ' ' + action.payload.data.NameSecond,\n            fakeDialog.Photo = action.payload.data.Photo,\n            fakeDialog.ConversationType = 1,\n            fakeDialog.SecondUid = action.payload.data.Id,\n            fakeDialog.fake = true\n   \n            newState.push(fakeDialog)\n   \n            newState.forEach(function(dialog){\n               dialog.active = false\n      \n               if (dialog.ConversationId === action.payload.data.Id) {\n                  dialog.active = true\n                  dialog.UnreadedCount = 0\n                  dialog.type = action.payload.type\n               }\n            })\n         }\n      } else if (action.payload.type === 'channel') {\n         newState.push(action.payload.data)\n\n         newState.forEach(function(dialog){\n            dialog.active = false\n   \n            if (dialog.ConversationId === action.payload.data.Id) {\n               dialog.active = true\n               dialog.UnreadedCount = 0\n               dialog.type = action.payload.type,\n               dialog.fake = true\n            }\n         })\n      }\n\n      return newState\n   }\n   else if(action.type === 'MESSAGES_RECEIVED'){\n      let newState = [...state]\n\n      if (action.messages.length) {\n         let conversationId = action.messages[0].ConversationId\n         newState.forEach(dialog => {\n            if (dialog.ConversationId === conversationId) {\n               // устанавливаем флаг по которому при открытии диалога проверяем запрашивались ли для него сообщения\n               dialog.messagesRecieved = true\n               // превью диалога отображается в сайдбаре\n               dialog.PreviewText = action.messages[0].Text\n               // если диалог не открыт, то накручиваем счетчик непрочитаных\n               if(!dialog.active) {\n                  dialog.UnreadedCount += 1\n               }\n               // поднимаем диалог на первое место в сайдбаре\n               // let dialogIndex = newState.indexOf(dialog)\n               // newState.splice(dialogIndex, 1)\n               // newState.unshift(dialog)\n            }\n         })\n\n      }\n\n      return newState\n   }\n   else {\n      return state\n   }\n}\n","/* eslint-disable */\n// В chats хрнаится объект только одного чата, информацию о котором просматривается в данный момент\nexport function chats(state = [], action) {\nif (action.type === 'CHATS_RECEIVED') {\n    let newState = [...state];\n    newState = action.chats;\n    return newState;\n  }\n  else if (action.type === 'CHATS_USERS_RECEIVED') {\n    let newState = [...state];\n    if (newState[0].Id === action.chatsUsers[0].ChatId) {\n      newState[0].Users = action.chatsUsers;\n    }\n    return newState;\n  }\n  else {\n    return state;\n  }\n}\n","/* eslint-disable  */\n\nfunction sortMessages(messages) {\n  return messages.sort(function(a, b) {\n    let a_date = new Date(a.SendingTime)\n    let b_date = new Date(b.SendingTime)\n    if (a_date < b_date) {\n      return -1\n    } if (a_date > b_date) {\n      return 1\n    } else {\n      return 0\n    }\n  })\n}\n\nexport function messages(state = [], action) {\n  if (action.type === \"MESSAGES_RECEIVED\") {\n    let newState = [...state]\n    action.messages.forEach(message => {\n      let existence = newState.find(mess => mess.GlobalId === message.GlobalId)\n      if (!existence) {\n        newState.push(message)\n      }\n    })\n\n    return sortMessages(newState)\n  }\n  else if(action.type === \"READ_MESSAGES\") {\n    let newState = [...state]\n\n    newState.forEach(message => {\n      if (message.GlobalId === action.messageIDs[0].GlobalId) {\n        message.read = true\n      }\n    })\n\n    return newState\n  }\n  else {\n    return state\n  }\n}\n","/* eslint-disable */\nexport function users(state = [], action) {\n  if(action.type === 'USER_RECEIVED') {\n    let newState = state;\n    \n    if(action.users.length > 0) {\n      let foundUser = newState.find(user => user.Id === action.users[0].Id);\n\n      if (!foundUser) {\n        newState = [...newState, ...action.users];\n      }\n    }\n    \n    return newState;\n  } else {\n    return state;\n  }\n}\n","/* eslint-disable */\nexport function forwardMessage(state = false, action) {\n  if (action.type === \"FORWARD_MESSAGE\") {\n    let newState = state\n\n    newState = action.message\n\n    return newState\n  } else {\n    return state\n  }\n}\n","export function auth(state = \"CHECK_AUTH\", action) {\n  if(action.type === 'SET_AUTH') {\n    let newState = state;\n    newState = action.auth;\n    return newState;\n  }\n  return state;\n}\n","/* eslint-disable */\nexport function searchResult(state = null, action) {\n  if(action.type === 'SEARCH_RESULT_RECEIVED') {\n    let newState = {...state}\n    newState = action.searchResult\n    return newState\n  }\n  else if(action.type === 'SEARCH_END') {\n    let newState = {...state}\n    newState = null\n    return newState\n  }\n  else {\n    return state\n  }\n}\n","export function dialogsReceived(dialogs) {\n  return {\n    type: \"DIALOGS_RECEIVED\",\n    dialogs\n  }\n}\n\nexport function chatsReceived(chats) {\n  return {\n    type: \"CHATS_RECEIVED\",\n    chats\n  }\n}\n\nexport function messagesReceived(messages) {\n  return {\n    type: \"MESSAGES_RECEIVED\",\n    messages\n  }\n}\n\nexport function readMessages(messageIDs) {\n  return {\n    type: \"READ_MESSAGES\",\n    messageIDs\n  }\n}\n\nexport function forwardingMessage(message) {\n  return {\n    type: \"FORWARD_MESSAGE\",\n    message\n  }\n}\n\nexport function openDialog(payload) {\n  return {\n    type: \"OPEN_DIALOG\",\n    payload\n  }\n}\n","export function userReceived(users) {\n  return {\n    type: \"USER_RECEIVED\",\n    users\n  }\n}\n\nexport function chatsUsersReceived(chatsUsers) {\n  return {\n    type: \"CHATS_USERS_RECEIVED\",\n    chatsUsers\n  }\n}\n","import React, { Component } from \"react\"\nimport { Row, Col, Button, Menu, Dropdown, Icon } from \"antd\"\nimport { Link } from \"react-router-dom\"\n\nclass Auth extends Component {\n  constructor() {\n    super()\n    this.state = {\n      nodes: [],\n      activeNode: null\n    }\n  }\n\n  componentDidMount() {\n    const thiss = this\n    fetch(\"https://223421.selcdn.ru/Eruption-dev/nodes/list.json\")\n      .then(response => {\n        response.json().then(data => {\n          thiss.setState({\n            nodes: data\n          })\n        })\n      })\n      .catch(() => {\n        // console.log(err)\n      })\n  }\n\n  selectNode(node) {\n    this.setState({\n      activeNode: node.item.props.data\n    })\n    // console.log(node.item.props.data)\n    localStorage.setItem(\"node\", JSON.stringify(node.item.props.data))\n  }\n\n  render() {\n    const menu = (\n      <Menu onClick={this.selectNode.bind(this)}>\n        {this.state.nodes.map((node, i) => {\n          return (\n            <Menu.Item key={i} data={node}>\n              {node.Name}\n            </Menu.Item>\n          )\n        })}\n        {\n          // this.state.activeNode ? <Menu.Item key='auto' data={null}>Автоматически</Menu.Item> : null\n        }\n      </Menu>\n    )\n    return (\n      <Row\n        type=\"flex\"\n        align=\"middle\"\n        justify=\"center\"\n        style={{ height: \"100vh\" }}\n      >\n        <Col>\n          <div className=\"auth__type\">\n            <h1>Вход</h1>\n            <h2>Выберите способ входа</h2>\n            <Link to={this.props.match.url + \"/by-phone\"}>\n              <Button type=\"secondary\">По номеру телефона</Button>\n            </Link>\n            <br />\n            <Link to={this.props.match.url + \"/by-email\"}>\n              <Button type=\"secondary\">По электронной почте</Button>\n            </Link>\n            <br />\n            <Button type=\"secondary\">Через приложение</Button>\n            <br />\n            <br />\n            <Link to={\"/registration\"}>Регистрация</Link>\n            <br />\n            <div className=\"auth__type_server\">\n              <span>Сервер: </span>\n              <Dropdown overlay={menu}>\n                <span className=\"ant-dropdown-link\">\n                  {localStorage.getItem(\"node\")\n                    ? JSON.parse(localStorage.getItem(\"node\")).Name\n                    : \"Автоматически\"}\n                  <Icon type=\"down\" />\n                </span>\n              </Dropdown>\n            </div>\n          </div>\n        </Col>\n      </Row>\n    )\n  }\n}\n\n// Auth.defaultProps = {\n//    img: 'https://223421.selcdn.ru/chatix-dev/assets/img/default_avatar.png'\n// }\n\nexport default Auth\n","const webSocket = new WebSocket(\"wss://testnode1-1.ymess.org:5000\")\n\nclass Connect {\n  constructor() {\n    webSocket.onopen = () => {\n      console.log(\"Соединение установлено\")\n      this.wsOnConnect()\n    }\n\n    webSocket.onclose = event => {\n      if (event.wasClean) {\n        console.log(\"Соединение закрыто\")\n      } else {\n        console.log(\"Обрыв соединения\")\n      }\n      console.log(\"Код: \", event)\n    }\n\n    webSocket.onmessage = event => {\n      const message = this.blobToJson(event.data)\n\n      if (message.ErrorCode && message.ErrorCode !== 0) {\n        console.log('%c REQUEST ERR ',  'background: #ff4545; color: #bada55; padding: 3px', message)\n      } else {\n        this.onMessage(message)\n        console.log(\n          \"%c RESPONSE \",\n          \"background: #00ff00; color: #000; padding: 3px\",\n          this.blobToJson(event.data)\n        )\n      }\n    }\n    webSocket.onerror = error => {\n      console.log('%c ERROR CONNECT ',  'background: red; color: #bada55; padding: 3px', error);\n    }\n  }\n\n  getStatus(){\n    return webSocket.readyState\n  }\n\n  blobToJson(data) {\n    var u, x\n    u = URL.createObjectURL(data)\n    x = new XMLHttpRequest()\n    x.open(\"GET\", u, false)\n    x.send()\n    URL.revokeObjectURL(u)\n\n    return JSON.parse(x.responseText)\n  }\n\n  makeId() {\n    var result = \"\"\n    var characters = \"0123456789\"\n    var charactersLength = characters.length\n    for (var i = 0; i < 18; i++) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength))\n    }\n\n    return parseInt(result)\n  }\n\n  send(data) {\n    console.log(\n      \"%c REQUEST \",\n      \"background: #222; color: #bada55; padding: 3px\",\n      data\n    )\n    webSocket.send(JSON.stringify(data))\n  }\n\n  onMessage() {}\n\n  wsOnConnect() {}\n}\n\nconst wSocket = new Connect()\n\nexport default wSocket\n","import React, { useState, useEffect } from \"react\"\nimport { Row, Col, Button, Form, Input } from \"antd\"\n// import {BrowserRouter as Router, Redirect} from \"react-router-dom\";\nimport socket from \"../transport/Connect\"\n\nfunction Registration() {\n  const [name, setName] = useState(\"\")\n  const [surname, setSurname] = useState(\"\")\n  const [phone, setPhone] = useState(\"\")\n  const [email, setEmail] = useState(\"\")\n  const [nameErr, setNameErr] = useState(false)\n  const [contactsErr, setContactsErr] = useState(false)\n  const [btnLoader, setbtnLoader] = useState(false)\n\n  useEffect(() => {\n    socket.onMessage = data => {\n      if (data.ErrorCode !== 0) {\n        // console.log(data)\n      } else if (data.ResponseType === 6) {\n        localStorage.getItem(\"FileAccessToken\", data.FileAccessToken)\n        localStorage.getItem(\"AccessToken\", data.Token.AccessToken)\n        localStorage.getItem(\"RefreshToken\", data.Token.RefreshToken)\n        localStorage.getItem(\"User\", data.User)\n\n        window.location.replace(\"/\")\n      }\n    }\n  }, [])\n\n  const handleRegistration = () => {\n    if (name.length === 0) {\n      setNameErr(\"Это поле обязательно для заполнения\")\n    } else if (phone.length === 0 && email.length === 0) {\n      setContactsErr(\"Одно из этих полей обязательно для заполнения\")\n    } else {\n      setbtnLoader(true)\n\n      const regData = {\n        User: {\n          Id: 0,\n          Phones: phone,\n          NameFirst: name,\n          NameSecond: surname,\n          About: \"\",\n          Photo: \"\",\n          Country: \"\",\n          City: \"\",\n          Birthday: \"\",\n          Language: null,\n          NodeId: 0,\n          Online: null,\n          Emails: [email],\n          Blacklist: null,\n          Visible: null,\n          Security: null,\n          Tag: 0,\n          RegistrationDate: null\n        },\n        RequestId: socket.makeId(),\n        RequestType: 37,\n        Type: 0\n      }\n\n      socket.send(regData)\n    }\n  }\n\n  const handleSetName = e => {\n    setName(e.target.value)\n    setNameErr(false)\n  }\n\n  const handleSetSurname = e => {\n    setSurname(e.target.value)\n  }\n\n  const handleSetPhone = e => {\n    setPhone(e.target.value)\n    setContactsErr(false)\n  }\n\n  const handleSetEmail = e => {\n    setEmail(e.target.value)\n    setContactsErr(false)\n  }\n\n  return (\n    <Row\n      type=\"flex\"\n      align=\"middle\"\n      justify=\"center\"\n      style={{ height: \"100vh\" }}\n    >\n      <Col>\n        <div className=\"auth__type\">\n          <h1>Регистрация</h1>\n          <div>\n            <Form className=\"login-form\">\n              <Form.Item\n                validateStatus={nameErr ? \"error\" : \"\"}\n                help={nameErr || \"\"}\n              >\n                <Input placeholder=\"Имя\" onChange={handleSetName} />\n              </Form.Item>\n              <Form.Item validateStatus=\"\">\n                <Input placeholder=\"Фамилия\" onChange={handleSetSurname} />\n              </Form.Item>\n              <Form.Item\n                validateStatus={contactsErr ? \"error\" : \"\"}\n                help={contactsErr || \"\"}\n              >\n                <Input placeholder=\"Номер телефона\" onChange={handleSetPhone} />\n              </Form.Item>\n              <Form.Item\n                validateStatus={contactsErr ? \"error\" : \"\"}\n                help={contactsErr || \"\"}\n              >\n                <Input placeholder=\"Email\" onChange={handleSetEmail} />\n              </Form.Item>\n              <Form.Item>\n                <Row>\n                  <Col style={{ textAlign: \"center\" }}>\n                    <Button\n                      type=\"primary\"\n                      onClick={handleRegistration}\n                      loading={btnLoader}\n                    >\n                      Зарегистрироваться\n                    </Button>\n                  </Col>\n                </Row>\n              </Form.Item>\n            </Form>\n          </div>\n        </div>\n      </Col>\n    </Row>\n  )\n}\n\nexport default Registration\n","import React, { Component } from \"react\"\nimport { Row, Col, Button, Form, Input } from \"antd\"\nimport socket from \"../transport/Connect\"\n\nclass Verify extends Component {\n  constructor() {\n    super()\n    this.state = {\n      verifyUid: null,\n      verifyErr: null,\n      verifyRequestSended: false,\n      verifyCode: null,\n      verifyCodeErr: null,\n      btnPreloader: false,\n      verifyType: \"\"\n    }\n  }\n\n  componentDidMount() {\n    const path = this.props.location.pathname.split('/');\n    this.setState({\n      verifyType: path[2]\n    })\n\n    socket.onMessage = data => {\n      this.setState({\n        btnPreloader: false\n      })\n\n      if (data.ErrorCode !== 0) {\n        this.setState({\n          verifyErr: data.Message\n        })\n      } else if (data.ResponseType === 10) {\n        this.setState({\n          verifyRequestSended: true\n        })\n      } else if (data.ResponseType === 6) {\n        localStorage.setItem(\"FileAccessToken\", data.FileAccessToken)\n        localStorage.setItem(\"AccessToken\", data.Token.AccessToken)\n        localStorage.setItem(\"RefreshToken\", data.Token.RefreshToken)\n        localStorage.setItem(\"User\", JSON.stringify(data.User))\n\n        window.location.replace(\"/\")\n      }\n    }\n  }\n\n  onChangePhone(e) {\n    this.setState({\n      verifyUid: e.target.value,\n      verifyErr: null\n    })\n  }\n\n  onChangeVerifCode(e) {\n    this.setState({\n      verifyCode: e.target.value,\n      verifyCodeErr: null\n    })\n  }\n\n  sendverifyCode(e) {\n    e.preventDefault()\n\n    this.setState({\n      btnPreloader: true\n    })\n\n    const data = {\n      Uid: this.state.verifyUid,\n      VCode: this.state.verifyCode,\n      LoginType: 1,\n      UidType: this.state.verifyType === 'by-email' ? 2 : this.state.verifyType === 'by-phone' ? 0 : 0,\n      RequestId: socket.makeId(),\n      RequestType: 33,\n      Type: 0\n    }\n\n    socket.send(data)\n  }\n\n  sendVerificationQuery(e) {\n    e.preventDefault()\n\n    this.setState({\n      btnPreloader: true\n    })\n\n    const data = {\n      VerificationType: this.state.verifyType === 'by-email' ? 1 : this.state.verifyType === 'by-phone' ? 0 : 0,\n      Uid: this.state.verifyUid,\n      RequestId: socket.makeId(),\n      RequestType: 42,\n      Type: 0\n    }\n\n    socket.send(data)\n  }\n\n  render() {\n    return (\n      <Row\n        type=\"flex\"\n        align=\"middle\"\n        justify=\"center\"\n        style={{ height: \"100vh\" }}\n      >\n        <Col>\n          <div className=\"auth__type\">\n            <h1>Вход</h1>\n            {!this.state.verifyRequestSended ? (\n              <div>\n                <h2>\n                  {this.state.verifyType === 'by-email' ? 'Введите ваш email' : this.state.verifyType === 'by-phone' ? 'Введите номер телефона' : ''}\n                </h2>\n                <Form\n                  onSubmit={this.sendVerificationQuery.bind(this)}\n                  className=\"login-form\"\n                >\n                  <Form.Item\n                    validateStatus={this.state.verifyErr ? \"error\" : \"\"}\n                    help={this.state.verifyErr ? this.state.verifyErr : \"\"}\n                  >\n                    <Input\n                      placeholder={this.state.verifyType === 'by-email' ? 'Ваш email' : this.state.verifyType === 'by-phone' ? 'Ваш номер телефона' : ''}\n                      onChange={this.onChangePhone.bind(this)}\n                    />\n                  </Form.Item>\n                  <Form.Item>\n                    <Row>\n                      <Col style={{ textAlign: \"center\" }}>\n                        <Button\n                          type=\"primary\"\n                          htmlType=\"submit\"\n                          disabled={!this.state.verifyUid}\n                          loading={!!this.state.btnPreloader}\n                        >\n                          Получить {this.state.verifyType === 'by-email' ? 'письмо' : this.state.verifyType === 'by-phone' ? 'SMS' : ''} с кодом\n                        </Button>\n                      </Col>\n                    </Row>\n                  </Form.Item>\n                </Form>\n              </div>\n            ) : (\n              <div>\n                <h2>Код подтверждения из {this.state.verifyType === 'by-email' ? 'письма' : this.state.verifyType === 'by-phone' ? 'SMS' : ''}</h2>\n                <p>\n                  Мы отправили {this.state.verifyType === 'by-email' ? 'письмо' : this.state.verifyType === 'by-phone' ? 'SMS' : ''} \n                  на {this.state.verifyType === 'by-email' ? 'email' : this.state.verifyType === 'by-phone' ? 'номер' : ''} {this.state.verifyUid}. Введите\n                  полученый код в поле ниже\n                </p>\n                <Form\n                  onSubmit={this.sendverifyCode.bind(this)}\n                  className=\"login-form\"\n                >\n                  <Form.Item\n                    validateStatus={this.state.verifyCodeErr ? \"error\" : \"\"}\n                    help={this.state.verifyCodeErr ? this.state.verifyCodeErr : \"\"}\n                  >\n                    <Input\n                      placeholder={`Код из ${this.state.verifyType === 'by-email' ? 'письма' : this.state.verifyType === 'by-phone' ? 'SMS' : ''}, 4 цифры`}\n                      onChange={this.onChangeVerifCode.bind(this)}\n                    />\n                  </Form.Item>\n                  <Form.Item>\n                    <Row>\n                      <Col style={{ textAlign: \"center\" }}>\n                        <Button\n                          type=\"primary\"\n                          htmlType=\"submit\"\n                          disabled={!this.state.verifyCode}\n                          loading={!!this.state.btnPreloader}\n                        >\n                          Войти\n                        </Button>\n                      </Col>\n                    </Row>\n                  </Form.Item>\n                </Form>\n              </div>\n            )}\n          </div>\n        </Col>\n      </Row>\n    )\n  }\n}\n\nexport default Verify\n","import { getFormatedMessages } from \"./Message\"\nimport {\n  getFormatedDialogs,\n  getFormatedChats,\n  getActiveDialog\n} from \"./Dialog\"\nimport {\n  getFormatedUser,\n  getFormatedChatsUsers,\n  getUserById,\n  getUserInitials\n} from \"./User\"\n\nexport default {\n  getFormatedMessages,\n  getFormatedDialogs,\n  getFormatedChats,\n  getFormatedChatsUsers,\n  getFormatedUser,\n  getUserById,\n  getUserInitials,\n  getActiveDialog\n}\n","// eslint-disable-next-line\nexport function getFormatedMessages(messages) {\n  const mess = []\n  messages.forEach(message => {\n    const tempMess = {\n      Attachments: message.Attachments,\n      ConversationId: message.ConversationId,\n      ConversationType: message.ConversationType,\n      GlobalId: message.GlobalId,\n      Read: message.Read,\n      SenderId: message.SenderId,\n      SendingTime: message.SendingTime,\n      Text: message.Text\n    }\n    mess.push(tempMess)\n  })\n\n  return mess\n}\n","// eslint-disable-next-line\nexport function getFormatedDialogs(data) {\n  const dialogs = []\n  data.forEach(dialog => {\n    const tempDialogs = {\n      AttachmentType: dialog.AttachmentType,\n      ConversationId: dialog.ConversationId,\n      ConversationType: dialog.ConversationType,\n      IsMuted: dialog.IsMuted,\n      LastMessageId: dialog.LastMessageId,\n      LastMessageSenderId: dialog.LastMessageSenderId,\n      LastMessageSenderName: dialog.LastMessageSenderName,\n      LastMessageTime: dialog.LastMessageTime,\n      Photo: dialog.Photo,\n      PreviewText: dialog.PreviewText,\n      Read: dialog.Read,\n      SecondUid: dialog.SecondUid,\n      Title: dialog.Title,\n      UnreadedCount: dialog.UnreadedCount,\n      messagesRecieved: dialog.messagesRecieved\n    }\n    dialogs.push(tempDialogs)\n  })\n\n  return dialogs\n}\n\nexport function getFormatedChats(data) {\n  const chats = []\n  data.forEach(chat => {\n    const tempChat = {\n      About: chat.About,\n      Id: chat.Id,\n      Key: chat.Key,\n      Name: chat.Name,\n      NodesId: chat.NodesId,\n      Photo: chat.Photo,\n      Public: chat.Public,\n      Security: chat.Security,\n      Tag: chat.Tag,\n      Type: chat.Type,\n      Users: chat.Users,\n      Visible: chat.Visible\n    }\n    chats.push(tempChat)\n  })\n\n  return chats\n}\n\nexport function getActiveDialog(dialogs) {\n  const dialog = dialogs.find(dialog => dialog.active)\n\n  return dialog\n}\n","// eslint-disable-next-line\nexport function getFormatedUser(data) {\n  const users = []\n  data.forEach(user => {\n    const tempUser = {\n      About: user.About,\n      Birthday: user.Birthday,\n      BlackList: user.BlackList,\n      City: user.City,\n      Confirmed: user.Confirmed,\n      Contact: user.Contact,\n      ContactsPrivacy: user.ContactsPrivacy,\n      Country: user.Country,\n      Emails: user.Emails,\n      Encryption: user.Encryption,\n      Groups: user.Groups,\n      Id: user.Id,\n      Keys: user.Keys,\n      Language: user.Language,\n      NameFirst: user.NameFirst,\n      NameSecond: user.NameSecond,\n      NodeId: user.NodeId,\n      Online: user.Online,\n      Phones: user.Phones,\n      Photo: user.Photo,\n      RegistrationDate: user.RegistrationDate,\n      Security: user.Security,\n      Tag: user.Tag,\n      Visible: user.Visible\n    }\n    users.push(tempUser)\n  })\n\n  return users\n}\n\nexport function getFormatedChatsUsers(data) {\n  const users = []\n  data.forEach(user => {\n    const tempUser = {\n      Banned: user.Banned,\n      ChatId: user.ChatId,\n      Deleted: user.Deleted,\n      InviterId: user.InviterId,\n      IsMuted: user.IsMuted,\n      Joined: user.Joined,\n      UserId: user.UserId,\n      UserInfo: user.UserInfo,\n      UserRole: user.UserRole\n    }\n    users.push(tempUser)\n  })\n\n  return users\n}\n\nexport function getUserById(id, users) {\n  const foundUser = users.find(user => user.Id === id)\n  return foundUser\n}\n\nexport function getUserInitials(dialog) {\n  if (!dialog.Photo) {\n    let initials = \"\"\n\n    if (dialog.Title || dialog.ChannelName) {\n      let defaultAva = dialog.Title || dialog.ChannelName\n      defaultAva = defaultAva.split(\" \", 2)\n\n      if (defaultAva[0]) {\n        initials = defaultAva[0][0]\n      }\n      if (defaultAva[1]) {\n        initials += defaultAva[1][0]\n      }\n    } else if (dialog.NameFirst) {\n      initials = dialog.NameFirst[0]\n      if (dialog.NameSecond) {\n        initials = initials + dialog.NameSecond[0]\n      }\n    }\n\n    return initials\n  }\n}\n","import React, { Component } from \"react\"\nimport { NavLink } from \"react-router-dom\"\nimport { connect } from \"react-redux\"\nimport { openDialog } from \"../actions/dialogs\"\nimport selectors from \"../selectors\"\n\nclass SidebarItem extends Component {\n  constructor() {\n    super()\n    this.state = {\n      defaultAva: \"\"\n    }\n  }\n\n  componentDidMount() {\n    // обрезаем строку с последним сообщением (не css потому что 2 строки)\n    const size = 60\n    const newsContent = this.refs.messageText\n    const newsText = newsContent.innerText\n\n    if (newsText.length > size) {\n      newsContent.innerText = newsText.slice(0, size) + \" ...\"\n    }\n\n    // добавляем инициалы в стэйт если нет аватарки\n    if (!this.props.dialog.Photo) {\n      this.setState({\n        defaultAva: selectors.getUserInitials(this.props.dialog)\n      })\n    }\n  }\n\n  openDialog() {\n    const payload = {}\n    payload.type = this.props.type\n    payload.data = this.props.dialog\n    this.props.openDialog(payload)\n  }\n\n  render() {\n    const avatarStyle = {\n      width: \"100%\",\n      height: \"100%\",\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center center\",\n      backgroundImage: `url(https://testnode1-1.ymess.org:5000/api/Files/${this.props.dialog.Photo})`,\n      backgroundRepeat: \"no-repeat\"\n    }\n\n    return (\n      <NavLink to={\"/\"} onClick={() => this.openDialog()}>\n        <div className=\"sidebar__item\">\n          <div className=\"sidebar__ava\">\n            {this.props.dialog.UnreadedCount > 0 ? (\n              <div className=\"sidebar__badge\">\n                {this.props.dialog.UnreadedCount}\n              </div>\n            ) : null}\n            <div className=\"sidebar__photo\">\n              {this.props.dialog.Photo ? (\n                <div style={avatarStyle} />\n              ) : (\n                <div className=\"sidebar__photo-default\">\n                  {this.state.defaultAva}\n                </div>\n              )}\n            </div>\n          </div>\n          <div>\n            <div className=\"sidebar__name\">\n              <span>{this.props.dialog.Title || this.props.dialog.NameFirst + this.props.dialog.NameSecond || this.props.dialog.ChannelName}</span>\n            </div>\n            <div className=\"sidebar__message\" ref=\"messageText\">\n              {\n                this.props.dialog.PreviewText ? this.props.dialog.PreviewText : \n                this.props.dialog.AttachmentType ===  2 ? 'Изображение' : null\n              }\n            </div>\n          </div>\n        </div>\n      </NavLink>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {}\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    openDialog: dialogId => dispatch(openDialog(dialogId))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SidebarItem)\n","/* eslint-disable */\nimport React from \"react\"\nimport logo from \"../assets/logo.PNG\"\n\nfunction HeadSidebar() {\n  return (\n    <div className=\"head-sidebar\">\n      <div className=\"head-sidebar__logo\">\n        <img src={logo} alt=\"Y Messenger\" />\n      </div>\n    </div>\n  )\n}\n\nexport default HeadSidebar\n","import React, { useState, useEffect } from \"react\"\nimport { connect } from \"react-redux\"\nimport { searchStart, searchEnd } from \"../actions/search\"\nimport socket from \"../transport/Connect\"\nimport { Input } from 'antd'\n\nconst { Search } = Input\n\nfunction SearchComponent(props) {\n  const searchDialogs = value => {\n    let text = \"\"\n    // в функцию может прилетать и текст и евент\n    if (typeof value === \"object\") {\n      text = value.target.value\n    } else if (typeof value === \"string\") {\n      text = value\n    }\n\n    if (text.length) {\n      props.searchStart(text.toLowerCase())\n    } else if (!text.length) {\n      props.searchEnd()\n    }\n\n    const searchRequest = {\n      RequestType: 46,\n      SearchQuery: text,\n      RequestId: socket.makeId(),\n      Direction: true,\n      Type: 0\n    }\n\n    socket.send(searchRequest)\n  }\n\n  return (\n    <div className=\"search\">\n      <Search\n        placeholder=\"Поиск\"\n        onSearch={searchDialogs}\n        onChange={searchDialogs}\n        enterButton\n      />\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    search: state.ui.search\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    searchStart: (data) => dispatch(searchStart(data)),\n    searchEnd: () => dispatch(searchEnd()),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchComponent)\n","export function searchResultReceived(searchResult) {\n  return {\n    type: \"SEARCH_RESULT_RECEIVED\",\n    searchResult\n  }\n}\n\nexport function searchStart(text) {\n  return {\n    type: \"SEARCH_START\",\n    text\n  }\n}\n\nexport function searchEnd() {\n  return {\n    type: \"SEARCH_END\"\n  }\n}\n","/* eslint-disable */\nimport React, { useState, useEffect } from \"react\"\nimport { connect } from \"react-redux\"\nimport SidebarItem from \"./SidebarItem\"\nimport HeadSidebar from \"./HeadSidebar\"\nimport Search from \"./Search\"\nimport { openDialog } from \"../actions/dialogs\"\nimport socket from \"../transport/Connect\"\n\nfunction Sidebar(props) {\n  const [localFoundDialogs, setLocalFoundDialogs] = useState([])\n\n  useEffect(() => {\n    if (props.search) {\n      const searchDialogs = props.dialogs.filter(dialog => {\n        if (!dialog.fake) {\n          return dialog.Title.toLowerCase().indexOf(props.search) >= 0\n        }\n      })\n      setLocalFoundDialogs(searchDialogs)\n    } else {\n      setLocalFoundDialogs(props.dialogs)\n    }\n  }, [props.search, props.dialogs])\n\n  const showSidebarItem = () => {\n    return localFoundDialogs.map(dialog => {\n      if(dialog && !dialog.fake){\n        return <SidebarItem dialog={dialog} key={socket.makeId()} type='dialog' />\n      }\n    })\n  }\n\n  const showSearchResultChannels = () => {\n    if (props.searchResult.channels) {\n      return props.searchResult.channels.map((dialog, i) => {\n        if(dialog){\n          if (i === 0) {\n            return (\n              <div key={socket.makeId()}>\n                <div className=\"sidebar__title\">Каналы:</div>\n                <SidebarItem dialog={dialog} type=\"channel\" />\n              </div>\n            )\n          } else {\n            return (\n              <SidebarItem dialog={dialog} type=\"channel\" key={socket.makeId()} />\n            )\n          }\n        }\n      })\n    }\n  }\n\n  const showSearchResultChats = () => {\n    if (props.searchResult.chats) {\n      return props.searchResult.chats.map((dialog, i) => {\n        if(dialog){\n          if (i === 0) {\n            return (\n              <div key={socket.makeId()}>\n                <div className=\"sidebar__title\">Чаты:</div>\n                <SidebarItem dialog={dialog} type=\"chat\" />\n              </div>\n            )\n          } else {\n            return (\n              <SidebarItem dialog={dialog} type=\"chat\" key={socket.makeId()} />\n            )\n          }\n        }\n      })\n    }\n  }\n\n  const showSearchResultUsers = () => {\n    if (props.searchResult.users) {\n      return props.searchResult.users.map((dialog, i) => {\n        if(dialog){\n          if (i === 0) {\n            return (\n              <div key={socket.makeId()}>\n                <div className=\"sidebar__title\">Пользователи:</div>\n                <SidebarItem dialog={dialog} type=\"user\" />\n              </div>\n            )\n          } else {\n            return (\n              <SidebarItem dialog={dialog} type=\"user\" key={socket.makeId()} />\n            )\n          }\n        }\n      })\n    }\n  }\n\n  return (\n    <div className=\"sidebar\">\n      <HeadSidebar />\n      <Search />\n      <div className=\"sidebar-viewport\">\n        {showSidebarItem()}\n        {props.searchResult ? showSearchResultUsers() : null}\n        {props.searchResult ? showSearchResultChats() : null}\n        {props.searchResult ? showSearchResultChannels() : null}\n      </div>\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    dialogs: state.dialogs,\n    search: state.ui.search,\n    searchResult: state.searchResult\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    openDialog: dialogId => dispatch(openDialog(dialogId))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Sidebar)\n","// eslint-disable-next-line\nexport function openProfile(dialog) {\n  return {\n    type: \"OPEN_PROFILE\",\n    dialog\n  }\n}\n","/* eslint-disable */\nimport React, { useState, useEffect } from \"react\"\nimport { connect } from \"react-redux\"\nimport ReactTimeAgo from \"react-time-ago\"\nimport JavascriptTimeAgo from \"javascript-time-ago\"\nimport ru from \"javascript-time-ago/locale/ru\"\nimport { Link } from \"react-router-dom\"\nimport { Icon } from \"antd\"\nimport socket from \"../transport/Connect\"\nimport { openProfile } from \"../actions/ui\"\nimport selectors from \"../selectors\"\n\nJavascriptTimeAgo.locale(ru)\n\nfunction HeadDialog(props) {\n  const [dialog, setDialog] = useState(null)\n  const [defaultAva, setDefaultAva] = useState(\"\")\n  const [user, setUser] = useState(null)\n  const [windowWidth, setWindowWidth] = useState(document.body.clientWidth)\n\n  useEffect(() => {}, [windowWidth])\n\n  window.onresize = () => {\n    setWindowWidth(document.body.clientWidth)\n  }\n\n  useEffect(() => {\n    if (props.users && dialog) {\n      const user = props.users.find(user => user.Id === dialog.SecondUid)\n      setUser(user)\n    }\n  }, [props.users, dialog])\n\n  useEffect(() => {\n    props.dialogs.forEach(dialog => {\n      if (dialog.active) {\n        setDialog(dialog)\n      }\n    })\n  }, [props.dialogs])\n\n  useEffect(() => {\n    if (dialog) {\n      // добавляем инициалы в стэйт если нет аватарки\n      if (!dialog.Photo) {\n        setDefaultAva(selectors.getUserInitials(dialog))\n      }\n    }\n  }, [dialog])\n\n  const logout = () => {\n    const logout = {\n      Full: false,\n      AccessToken: localStorage.getItem(\"AccessToken\"),\n      RequestType: 34,\n      RequestId: socket.makeId(),\n      Type: 0\n    }\n\n    socket.send(logout)\n\n    localStorage.remove(\"AccessToken\")\n    localStorage.remove(\"FileAccessToken\")\n    localStorage.remove(\"RefreshToken\")\n    localStorage.remove(\"User\")\n\n    window.location.replace(\"/\")\n  }\n\n  const handleOpenProfile = () => {\n    props.openProfile(dialog)\n  }\n\n  return (\n    <div className=\"head-dialog\">\n      {windowWidth <= 675 && props.location.pathname.indexOf(\"dialog\") > 0 ? (\n        <div className=\"head-dialog__back\">\n          <Link to=\"/\"><Icon type=\"left\" /></Link>\n          <br />\n        </div>\n      ) : null}\n      <div className=\"head-dialog__user\" onClick={handleOpenProfile}>\n        <div className=\"head-dialog__ava\">\n          {dialog ? (\n            dialog.Photo ? (\n              <div\n                style={{\n                  width: \"100%\",\n                  height: \"100%\",\n                  backgroundSize: \"cover\",\n                  backgroundPosition: \"center center\",\n                  backgroundImage: `url(https://testnode1-1.ymess.org:5000/api/Files/${dialog.Photo})`,\n                  backgroundRepeat: \"no-repeat\"\n                }}\n              />\n            ) : (\n              <div className=\"head-dialog__photo-default\">{defaultAva}</div>\n            )\n          ) : null}\n        </div>\n        <div>\n          <div className=\"head-dialog__name\">{dialog ? dialog.Title || dialog.ChannelName : null}</div>\n          <div className=\"head-dialog__status\">\n            {user ? (\n              <ReactTimeAgo date={user.Online * 1000} locale=\"ru\" />\n            ) : null}\n          </div>\n        </div>\n      </div>\n      <div onClick={logout} className=\"head-dialog__logout\">\n        Выход\n      </div>\n      {/* <div className='head__lock'>\n        <LockIcon />\n      </div> */}\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    dialogs: state.dialogs,\n    users: state.users\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    openProfile: (data) => dispatch(openProfile(data))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HeadDialog)\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", {\n  id: \"check\"\n}, React.createElement(\"polygon\", {\n  points: \"142.8,323.85 35.7,216.75 0,252.45 142.8,395.25 448.8,89.25 413.1,53.55  \"\n})));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref16 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref17 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar SvgTickIcon = function SvgTickIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"448.8px\",\n    height: \"448.8px\",\n    viewBox: \"0 0 448.8 448.8\",\n    style: {\n      enableBackground: \"new 0 0 448.8 448.8\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgTickIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/tick_icon.06277842.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", {\n  id: \"done-all\"\n}, React.createElement(\"path\", {\n  d: \"M448.8,161.925l-35.7-35.7l-160.65,160.65l35.7,35.7L448.8,161.925z M555.899,126.225l-267.75,270.3l-107.1-107.1 l-35.7,35.7l142.8,142.8l306-306L555.899,126.225z M0,325.125l142.8,142.8l35.7-35.7l-142.8-142.8L0,325.125z\"\n})));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref16 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref17 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar SvgDoubleTickIcon = function SvgDoubleTickIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"594.149px\",\n    height: \"594.149px\",\n    viewBox: \"0 0 594.149 594.149\",\n    style: {\n      enableBackground: \"new 0 0 594.149 594.149\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgDoubleTickIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/double_tick_icon.7319bcfe.svg\";\nexport { ForwardRef as ReactComponent };","/* eslint-disable */\nimport React, { useState, useEffect } from \"react\"\nimport { Modal } from \"antd\"\nimport { connect } from \"react-redux\"\nimport { NavLink, Redirect } from \"react-router-dom\"\nimport selectors from \"../selectors\"\nimport { forwardingMessage } from \"../actions/dialogs\"\nimport { ReactComponent as TickIcon } from \"../assets/tick_icon.svg\"\nimport { ReactComponent as DoubleTickIcon } from \"../assets/double_tick_icon.svg\"\n\nfunction Message(props) {\n  const [visible, setVisible] = useState(false)\n  const [messageTime, setMessageTime] = useState(\"\")\n  const [isContextMenuVisible, setSsContextMenuVisible] = useState(false)\n  const [redirect, setRedirect] = useState(false)\n  const user = selectors.getUserById(props.message.SenderId, props.users) || {}\n\n  useEffect(() => {\n    if (props.message) {\n      // формируем время сообщения\n      const timestamp = new Date(props.message.SendingTime * 1000)\n      const date = new Date()\n      date.setTime(timestamp)\n\n      let hour = `${date.getHours()}`\n      let minutes = `${date.getMinutes()}`\n\n      if (hour.length === 1) {\n        hour = `0${hour}`\n      }\n      if (minutes.length === 1) {\n        minutes = `0${minutes}`\n      }\n\n      setMessageTime(`${hour}:${minutes}`)\n    }\n  }, [props.message])\n\n  function getForwardingUser(userId) {\n    const forwardingUser = props.users.find(user => user.Id === userId)\n    if (forwardingUser) {\n      return ` ${forwardingUser.NameFirst} ${forwardingUser.NameSecond}`\n    }\n  }\n\n  function showMessage(message) {\n    if (message.Attachments) {\n      if (message.Attachments.length) {\n        // СООБЩЕНИЯ С ВЛОЖЕНИЯМИ\n        // сообщения с изображением\n        if (message.Attachments[0].Type === 2) {\n          return (\n            <div className=\"message__img\" onClick={() => setVisible(true)}>\n              <img\n                src={\"https://testnode1-1.ymess.org:5000/api/Files/\" + message.Attachments[0].Payload.FileId}\n                alt=\"\"\n              />\n            </div>\n          )\n        } else if (message.Attachments[0].Type === 1) {\n          // сообщение с файлом\n          if (message.Attachments[0].Payload) {\n            return (\n              <div>\n                <NavLink to={`/dialog/${message.ConversationId}`}>\n                  {message.Attachments[0].Payload.Filename}\n                </NavLink>\n                {message.Text}\n              </div>\n            )\n          }\n        } else if (message.Attachments[0].Type === 5) {\n          // Пересланное сообщение\n          if (message.Attachments[0].Payload.length > 0) {\n            return (\n              <div className=\"forwarding_message\">\n                Пересланное сообщение от\n                <NavLink to={`/dialog/${message.ConversationId}`}>\n                  {getForwardingUser(message.Attachments[0].Payload[0].SenderId)}\n                </NavLink>\n                <div>\n                  {message.Attachments[0].Payload[0].Text}\n                </div>\n                {\n                  message.Text ?\n                    <div>\n                      {message.Text}\n                    </div>\n                  : null\n                }\n              </div>\n            )\n          } else {\n            return (\n              <div className=\"forwarding_message\">\n                Пересланное сообщение от:\n                <div>Пересланное сообщение удалено</div>\n              </div>\n            )\n          }\n        }\n      } else {\n        // обычное сообщение с текстом\n        return message.Text ? (\n          <div>{message.Text}</div>\n        ) : null\n      }\n    } else {\n      // обычное сообщение с текстом\n      return message.Text ? (\n        <div>{message.Text}</div>\n      ) : null\n    }\n  }\n\n  function showMessageMenu() {\n    setSsContextMenuVisible(!isContextMenuVisible)\n  }\n\n  const handleReplyToMessage = () => {\n    props.forwardingMessage(props.message)\n  }\n\n  const handleForwardMessage = () => {\n    props.forwardingMessage(props.message)\n    setRedirect(true)\n  }\n\n  let avatarStyle = {}\n\n  if (user) {\n    avatarStyle = {\n      alignSelf: \"flex-end\",\n      flexShrink: 0,\n      width: \"44px\",\n      height: \"44px\",\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center center\",\n      backgroundImage: `url(https://testnode1-1.ymess.org:5000/api/Files/${user.Photo})`,\n      backgroundRepeat: \"no-repeat\",\n      borderRadius: \"100%\"\n    }\n  }\n\n  if (redirect) {\n    return <Redirect to=\"/\" />\n  }\n  if (user && props.message) {\n    return (\n      <div\n        className={\n          user.currentUser\n            ? \"message message-out\"\n            : \"message message-in\"\n        }\n        onClick={showMessageMenu}\n        style={props.message && isContextMenuVisible ? { background: \"#ebf5ff\" } : null }\n      >\n        {!user.currentUser ? <div className=\"message__ava\" style={avatarStyle} /> : null}\n        {\n          user.currentUser && props.message.Read ?\n            <DoubleTickIcon className='message__read' />\n          : user.currentUser && !props.message.Read ? \n            <TickIcon className='message__read' />\n          : null\n        }\n        <div className=\"message__content\">\n          {\n            !user.currentUser ?\n              <div className=\"message__name\">\n                {user.NameFirst ? user.NameFirst + ' ' : null}\n                {user.NameSecond ? user.NameSecond : null}\n              </div>\n            : null\n          }          \n          {showMessage(props.message)}\n        </div>\n        <div className=\"message__time\">{messageTime}</div>\n\n        {props.message.Attachments && props.message.Attachments[0] ? (\n          <Modal\n            visible={visible}\n            onCancel={() => setVisible(false)}\n            footer={null}\n            maskClosable\n          >\n            <img\n              className=\"popup__img\"\n              src={`https://testnode1-1.ymess.org:5000/api/Files/${props.message.Attachments[0].Payload.FileId}`}\n              alt=\"\"\n            />\n          </Modal>\n        ) : null}\n        {props.message && isContextMenuVisible ? (\n          <div className=\"message-menu\">\n            <ul>\n              <li onClick={handleReplyToMessage}>Ответить</li>\n              <li onClick={handleForwardMessage}>Переслать</li>\n            </ul>\n          </div>\n        ) : null}\n      </div>\n    )\n  } else {\n    return null\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    users: state.users,\n    forwardMessage: state.forwardMessage\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    forwardingMessage: message => dispatch(forwardingMessage(message))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Message)\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(-198)\",\n  id: \"g69\"\n}, React.createElement(\"g\", {\n  id: \"_x33__22_\"\n}, React.createElement(\"g\", {\n  id: \"g66\"\n}, React.createElement(\"path\", {\n  id: \"path64\",\n  d: \"m 544.5,99 v 495 c 0,82.021 -66.479,148.5 -148.5,148.5 -82.021,0 -148.5,-66.479 -148.5,-148.5 V 148.5 c 0,-54.673 44.327,-99 99,-99 54.673,0 99,44.327 99,99 V 594 c 0,27.349 -22.176,49.5 -49.5,49.5 -27.349,0 -49.5,-22.151 -49.5,-49.5 V 198 H 297 v 396 c 0,54.673 44.327,99 99,99 54.673,0 99,-44.327 99,-99 V 148.5 C 495,66.479 428.521,0 346.5,0 264.479,0 198,66.479 198,148.5 V 618.75 C 210.202,716.389 295.045,792 396,792 496.955,792 581.798,716.389 594,618.75 V 99 Z\"\n}))));\n\nvar SvgPaperclipIcon = function SvgPaperclipIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    xmlSpace: \"preserve\",\n    viewBox: \"0 0 396 792\",\n    height: 0,\n    width: 0,\n    y: \"0px\",\n    x: \"0px\",\n    id: \"Capa_1\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgPaperclipIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/paperclip_icon.b4a5561e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g95\"\n}, React.createElement(\"g\", {\n  id: \"send\"\n}, React.createElement(\"polygon\", {\n  id: \"polygon92\",\n  points: \"0,38.25 0,216.75 382.5,267.75 0,318.75 0,497.25 535.5,267.75 \"\n})));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g97\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g99\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g101\"\n});\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g103\"\n});\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g105\"\n});\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g107\"\n});\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g109\"\n});\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g111\"\n});\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g113\"\n});\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g115\"\n});\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g117\"\n});\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g119\"\n});\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g121\"\n});\n\nvar _ref16 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g123\"\n});\n\nvar _ref17 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g125\"\n});\n\nvar SvgSendButtonIcon = function SvgSendButtonIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    xmlSpace: \"preserve\",\n    viewBox: \"0 0 535.5 459\",\n    height: 0,\n    width: 0,\n    y: \"0px\",\n    x: \"0px\",\n    id: \"Capa_1\",\n    ref: svgRef\n  }, props), _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgSendButtonIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/send_button_icon.56dc055f.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState } from \"react\"\nimport { connect } from \"react-redux\"\nimport { ReactComponent as Paperclip } from \"../assets/paperclip_icon.svg\"\nimport { ReactComponent as SendBtn } from \"../assets/send_button_icon.svg\"\nimport { forwardingMessage } from \"../actions/dialogs\"\nimport socket from \"../transport/Connect\"\n\nfunction NewMessageField(props) {\n  const [messageText, setMessageText] = useState(\"\")\n\n  function sendMessage() {\n    if (props.forwardMessage) {\n      // отправка пересылаемого сообщения или ответ на сообщение\n      const data = {\n        Messages: [\n          {\n            Id: 0,\n            SendingTime: \"\",\n            SenderId: props.user.Id,\n            ReceiverId: 15,\n            ConversationId: props.dialog.ConversationId,\n            ConversationType: props.dialog.ConversationType,\n            Read: false,\n            NodesId: null,\n            ReplyTo: null,\n            Text: messageText,\n            Attachments: [\n              {\n                Type: 5,\n                Payload: {\n                  MessagesGlobalId: [props.forwardMessage.GlobalId],\n                  ConversationId: props.forwardMessage.ConversationId,\n                  ConversationType: props.forwardMessage.ConversationType\n                }\n              }\n            ]\n          }\n        ],\n        RequestType: 39,\n        RequestId: socket.makeId(),\n        Type: 0\n      }\n\n      socket.send(data)\n    } else {\n      // отправка обычного сообщения без вложения\n      const data = {\n        Messages: [\n          {\n            Id: 0,\n            SendingTime: \"\",\n            SenderId: props.user.Id,\n            ReceiverId: props.dialog.SecondUid,\n            ConversationId: props.dialog.ConversationId,\n            ConversationType: props.dialog.ConversationType,\n            Read: false,\n            NodesId: null,\n            ReplyTo: null,\n            Text: messageText,\n            Attachments: null,\n            GlobalId: null\n          }\n        ],\n        RequestType: 39,\n        RequestId: socket.makeId(),\n        Type: 0\n      }\n\n      socket.send(data)\n    }\n\n    setMessageText(\"\")\n\n    if(props.forwardMessage){\n      props.forwardingMessage(false)\n    }\n  }\n\n  const handleOnKeyDown = event => {\n    if (event.keyCode === 13) {\n      sendMessage()\n    }\n  }\n\n  // const attach = () => {\n  //   console.log(55)\n  // }\n\n  return (\n    <div className=\"new-message\">\n      {/* <label>\n        <input type=\"file\" style={{ display: \"none\" }} />\n        <Paperclip className=\"new-message__attach\" onClick={attach} />\n      </label> */}\n      <input\n        type=\"text\"\n        className=\"new-message__inp\"\n        placeholder=\"Введите сообщение\"\n        value={messageText}\n        onChange={e => {\n          setMessageText(e.target.value)\n        }}\n        onKeyDown={handleOnKeyDown}\n      />\n      <SendBtn\n        onClick={() => {\n          sendMessage()\n        }}\n        className=\"new-message__send\"\n      />\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.users.find(user => user.currentUser === true),\n    dialogs: state.dialog,\n    forwardMessage: state.forwardMessage\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    forwardingMessage: message => dispatch(forwardingMessage(message))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewMessageField)\n","/* eslint-disable */\nimport React, { useState, useEffect, useRef } from \"react\"\nimport { connect } from \"react-redux\"\nimport { Button } from 'antd'\nimport Message from \"./Message\"\nimport NewMessageField from \"./NewMessageField\"\nimport { openDialog } from \"../actions/dialogs\"\nimport socket from \"../transport/Connect\"\n\nfunction Dialog(props) {\n  const [messages, setMessages] = useState([])\n  const [dialog, setDialog] = useState(null)\n  const mesViewport = useRef(null)\n\n  // функция для получения отправитля в сообщениях и в пересланных сообщениях\n  const getUsers = mess => {\n    const users = []\n    mess.forEach(message => {\n      if (message.Attachments) {\n        if (message.Attachments.length) {\n          if (message.Attachments[0].Type === 5) {\n            if (message.Attachments[0].Payload.length > 0) {\n              const foundUser = props.users.find(\n                user => user.Id === message.Attachments[0].Payload[0].SenderId\n              )\n\n              if (!foundUser) {\n                if(message.Attachments[0].Payload[0].SenderId){\n                  users.push(message.Attachments[0].Payload[0].SenderId)\n                }\n              }\n            }\n          }\n        }\n      }\n      const foundUser = props.users.find(user => user.Id === message.SenderId)\n\n      if (!foundUser) {\n        if(message.SenderId){\n          users.push(message.SenderId)\n        }\n      }\n    })\n    const uniqueUsers = [...new Set(users.map(n => n))]\n\n    if (uniqueUsers.length) {\n      const requestUsers = {\n        UsersId: [...uniqueUsers],\n        RequestType: 28,\n        RequestId: socket.makeId(),\n        Type: 0\n      }\n\n      socket.send(requestUsers)\n    }\n  }\n\n  useEffect(() => {\n    if(props.dialog){\n      setDialog(props.dialog)\n\n      // отмечаем сообщения прочитанными\n      if (props.dialog.LastMessageId) {\n        const data = {\n          MessagesId: [props.dialog.LastMessageId],\n          ConversationType: props.dialog.ConversationType,\n          ConversationId: props.dialog.ConversationId,\n          RequestId: socket.makeId(),\n          RequestType: 35,\n          Type: 0\n        }\n\n        socket.send(data)\n      }\n\n      // подгрузка сообщений по скроллу\n      // mesViewport.current.onscroll = () => {\n      //   if (mesViewport.current.scrollTop === 0) {\n      //     const messagesRequest = {\n      //       ConversationType: props.dialog.ConversationType,\n      //       ConversationId: props.match.params.id,\n      //       NavigationMessageId: \"e4b9b6d5-ec14-ea92-6723-b29d3e32ac05\",\n      //       MessagesId: null,\n      //       RequestType: 25,\n      //       RequestId: socket.makeId(),\n      //       Direction: true,\n      //       Type: 0\n      //     }\n\n      //     socket.send(messagesRequest)\n      //   }\n      // }\n    }\n  }, [props.dialog])\n\n  useEffect(() => {\n    if (dialog) {\n      const mess = props.messages.filter(\n        message => message.ConversationId === parseInt(dialog.ConversationId || dialog.ChannelId)\n      )\n      setMessages(mess)\n\n      setTimeout(() => {\n        if (mesViewport.current) {\n          mesViewport.current.scrollTop = 450000\n        }\n      }, 10)\n\n      getUsers(mess)\n    }\n  }, [dialog, props.messages])\n\n  const joinToChannel = () => {\n    const data = {\n      ChannelsId: [dialog.ChannelId],\n      UsersId: [props.user.Id],\n      RequestType: 48,\n      RequestId: socket.makeId(),\n      Type: 0\n    }\n\n    socket.send(data)\n  }\n\n  return (\n    <div className=\"dialog\">\n      <div className=\"dialog__messages-viewport\" ref={mesViewport}>\n        <div className=\"dialog__messages\">\n          {dialog\n            ? messages.map(message => {\n                return <Message key={message.GlobalId} message={message} />\n              })\n            : null}\n        </div>\n      </div>\n      {props.forwardMessage ? (\n        <div className=\"reply-message\">\n          Ответ на:\n          {` ${props.forwardMessage.Text}`}\n        </div>\n      ) : null}\n      {\n        props.dialog ? \n          props.dialog.type === \"channel\" && props.dialog.fake ? \n            <Button type=\"primary\" size='large' onClick={joinToChannel}>Вступить</Button> \n          : props.dialog.ConversationType !== 3 ?\n            <NewMessageField {...props} dialog={dialog} />\n          : null\n        : null\n      }\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    messages: state.messages,\n    forwardMessage: state.forwardMessage,\n    users: state.users,\n    user: state.users.find(user => user.currentUser === true),\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    openDialog: dialogId => dispatch(openDialog(dialogId))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Dialog)\n","import React, { useState, useEffect } from \"react\"\nimport { connect } from \"react-redux\"\nimport socket from \"../transport/Connect\"\nimport HeadDialog from \"./HeadDialog\"\nimport Dialog from \"./Dialog\"\nimport { openDialog } from \"../actions/dialogs\"\n\nfunction DialogContainer(props) {\n  // const [messages, setMessages] = useState([]);\n  const [dialog, setDialog] = useState(null)\n\n  useEffect(() => {\n    props.dialogs.forEach(dialog => {\n      if (dialog.active) {\n        setDialog(dialog)\n      }\n    })\n  }, [props.dialogs])\n\n  useEffect(() => {\n    // if (props.messages) {\n    //    props.messages.map(message => {\n    //       if (message.ConversationId === dialogId) {\n    //          // console.log(messages);\n    //          let mess = messages;\n    //          mess.push(message);\n    //          // console.log(mess);\n    //          setMessages(messages.push(message));\n    //       }\n    //    });\n    // }\n  }, [props.messages])\n\n  useEffect(() => {\n    if (dialog) {\n      // props.openDialog(dialog)\n      // setMessages([]);\n\n      // если для этого диалога сообщения еще не запрашивались, то запрашиваем\n      if (!dialog.messagesRecieved) {\n        // запрос на получение сообщений\n        const data = {\n          ConversationType: dialog.type === \"channel\" ? 3 : dialog.ConversationType,\n          ConversationId: dialog.ConversationId ? dialog.ConversationId : dialog.ChannelId,\n          NavigationMessageTime: null,\n          MessageId: null,\n          RequestType: 25,\n          RequestId: socket.makeId(),\n          Type: 0\n        }\n\n        socket.send(data)\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [dialog])\n\n  return (\n    <div className=\"dialog-container\">\n      <HeadDialog {...props} />\n      <Dialog dialog={dialog} {...props} />\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    dialogs: state.dialogs,\n    messages: state.messages\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    openDialog: dialogId => dispatch(openDialog(dialogId))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DialogContainer)\n","/* eslint-disable */\nimport React, { useState, useEffect } from \"react\"\nimport { connect } from \"react-redux\"\nimport { NavLink } from \"react-router-dom\"\nimport { Modal } from \"antd\"\nimport { openProfile } from \"../actions/ui\"\nimport { openDialog } from \"../actions/dialogs\"\nimport socket from \"../transport/Connect\"\nimport selectors from \"../selectors\"\n\nfunction Profile(props) {\n  const [visible, setVisible] = useState(false)\n  const [profile, setProfile] = useState(null)\n  const [prevProfile, setPrevProfile] = useState(null)\n\n  useEffect(() => {\n    if(props.profile) {\n      if(props.profile.ConversationType === 1){\n        const user = selectors.getUserById(props.profile.SecondUid, props.users)\n        if (user) {\n          setProfile(user)\n          setVisible(true)\n        }\n      } else if (props.profile.NameFirst) {\n        setProfile(props.profile)\n        setVisible(true)\n      } else if (props.profile.Users) {\n        setProfile(props.profile)\n        setVisible(true)\n      } else if (props.profile.ConversationType === 2){\n        const getChatInfo = {\n          RequestType: 45,\n          ChatsId: [props.profile.ConversationId],\n          RequestId: socket.makeId(),\n          Type: 0\n        }\n    \n        socket.send(getChatInfo)\n      }\n    }\n  }, [props.profile])\n\n  useEffect(() => {\n    if (props.chats.length) {\n      setProfile(props.chats[0])\n      setVisible(true)\n\n      // запрашиваем недостающих юзеров для отображения в профиле\n      const undefinedUsers = []\n      props.chats[0].Users.map(user => {\n        const foundUser = selectors.getUserById(user.UserId, props.users)\n        if(!foundUser){\n          undefinedUsers.push(user.UserId)\n        }\n      })\n      if(undefinedUsers.length){\n        const requestUsers = {\n          UsersId: [...undefinedUsers],\n          RequestType: 28,\n          RequestId: socket.makeId(),\n          Type: 0\n        }\n\n        socket.send(requestUsers)\n      }\n    }\n  }, [props.chats])\n\n  const openProfile = data => {\n    setPrevProfile(profile)\n    props.openProfile(data)\n  }\n\n  const showUsers = () => {\n    return props.chats[0].Users.map(user => {\n      const foundUser = selectors.getUserById(user.UserId, props.users)\n      if(foundUser){\n        // console.log(foundUser)\n        return (\n          <div key={foundUser.Tag} className='profile__info_user' onClick={() => {openProfile(foundUser)}}>\n            {foundUser.NameFirst + ' ' + foundUser.NameSecond}\n            {\n              foundUser.Photo ? \n                <div\n                  style={{\n                    width: \"50px\",\n                    height: \"50px\",\n                    backgroundSize: \"cover\",\n                    backgroundPosition: \"center center\",\n                    backgroundImage: `url(https://testnode1-1.ymess.org:5000/api/Files/${foundUser.Photo})`,\n                    backgroundRepeat: \"no-repeat\",\n                    borderRadius: 100,\n                    margin: '0 auto',\n                    marginTop: \"10px\"\n                  }}\n                ></div>\n              : \n              <div className='profile__info_ava'>{selectors.getUserInitials(foundUser)}</div> \n            }\n          </div>\n        )\n      }\n    })\n  }\n\n  const handleCancelProfile = () => {\n    setVisible(false)\n    props.openProfile(null)\n  }\n\n  const handleOpenDialog = () => {\n    let payload = {}\n    payload.data = props.profile\n    payload.type = \"user\"\n    props.openDialog(payload)\n    handleCancelProfile()\n  }\n\n  const handleBackProfile = () => {\n    props.openProfile(prevProfile)\n    setPrevProfile(null)\n  }\n\n  return (\n    <Modal\n      visible={visible}\n      onCancel={handleCancelProfile}\n      footer={null}\n      maskClosable\n    >\n      {\n        profile ? \n          <div className='profile'>\n            {\n              prevProfile ? <div onClick={handleBackProfile}>Назад</div> : null\n            }\n            {\n              profile.Photo ? \n                <div\n                  className='profile__ava'\n                  style={{\n                    width: \"100px\",\n                    height: \"100px\",\n                    backgroundSize: \"cover\",\n                    backgroundPosition: \"center center\",\n                    backgroundImage: `url(https://testnode1-1.ymess.org:5000/api/Files/${profile.Photo})`,\n                    backgroundRepeat: \"no-repeat\",\n                    borderRadius: 100,\n                    margin: '0 auto'\n                  }}\n                ></div>\n              : null \n            }\n            {\n              profile.Name ?\n                <div className='profile__name'>{profile.Name}</div>\n              :\n                <div className='profile__name'>\n                  {profile.NameFirst ? profile.NameFirst  : null}\n                  {' '}\n                  {profile.NameSecond ? profile.NameSecond : null}\n                </div>\n            }\n            {\n              profile.Phones ? \n                profile.Phones.length > 0 ?\n                  <div className='profile__info'>\n                    <div className='profile__info_name'>Телефон</div>\n                    <div className='profile__info_value'>{profile.Phones[0].FullNumber}</div>\n                  </div>\n                : null\n              : null\n            }\n            {\n              profile.Emails ? \n                <div className='profile__info'>\n                  <div className='profile__info_name'>Email</div>\n                  <div className='profile__info_value'><a href={`mailto:${profile.Emails[0]}`}>{profile.Emails[0]}</a></div>\n                </div>\n              : null\n            }\n            {\n              profile.About ? \n                <div className='profile__info'>\n                  <div className='profile__info_name'>О себе</div>\n                  <div className='profile__info_value'>{profile.About}</div>\n                </div>\n              : null\n            }\n            {\n              profile.Users ? \n                <div className='profile__info'>\n                  <div className='profile__info_name'>Участники</div>\n                  <div className='profile__info_users'>{showUsers()}</div>\n                </div>\n              : null\n            }\n            {\n              props.profile ? \n                <NavLink\n                  to={\"/\"}\n                  onClick={handleOpenDialog}\n                >\n                  <div className='profile__open_chat'>Открыть чат</div>\n                </NavLink>\n              : null\n            }\n          </div>\n        : null\n      }\n      \n    </Modal>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    profile: state.ui.profile,\n    users: state.users,\n    chats: state.chats\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    openProfile: user => dispatch(openProfile(user)),\n    openDialog: dialogId => dispatch(openDialog(dialogId))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Profile)\n","import React, { useState } from \"react\"\nimport { connect } from \"react-redux\"\nimport { BrowserRouter as Router, Route } from \"react-router-dom\"\nimport Sidebar from \"./Sidebar\"\nimport DialogContainer from \"./DialogContainer\"\nimport Profile from \"./Profile\"\nimport selectors from \"../selectors\"\n\nfunction MainContainer(props) {\n  const [windowWidth, setWindowWidth] = useState(document.body.clientWidth)\n\n  window.addEventListener(\"resize\", () => {\n    setWindowWidth(document.body.clientWidth)\n  }, false)\n\n  return (\n    <Router>\n      <div className=\"page\">\n        <div className=\"page__content\">\n          {windowWidth > 675 ? (\n            <>\n              <Sidebar {...props} />\n              {selectors.getActiveDialog(props.dialogs) ? <DialogContainer /> : null}\n            </>\n          ) : (\n            <>\n              <Route\n                exact\n                path=\"/\"\n                render={props => <Sidebar {...props} />}\n              />\n              {selectors.getActiveDialog(props.dialogs) ? <DialogContainer /> : null}\n            </>\n          )}\n        </div>\n      </div>\n      <Profile />\n    </Router>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    dialogs: state.dialogs,\n    ui: state.ui\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    // getConversations: (url) => dispatch(getConversations(url))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MainContainer)\n","export function setAuth(auth) {\n  return {\n    type: \"SET_AUTH\",\n    auth\n  }\n}\n","import React, {useEffect} from \"react\"\nimport { connect } from \"react-redux\"\nimport Connect from \"./Connect\"\nimport {\n  dialogsReceived,\n  chatsReceived,\n  messagesReceived,\n  openDialog,\n  readMessages,\n} from \"../actions/dialogs\"\nimport { searchResultReceived } from \"../actions/search\"\nimport selectors from \"../selectors\"\nimport { userReceived, chatsUsersReceived } from \"../actions/user\"\nimport { setAuth } from \"../actions/auth\"\n\nfunction Socket(props) {\n  useEffect(() => {\n    Connect.onMessage = data => {\n      // Ответ на запрос авторизации либо на запрос обновления токенов\n      if (data.ResponseType === 6) {\n        // запрашиваем информацию об авторизировашемся пользователе\n        const getSelf = {\n          RequestId: Connect.makeId(),\n          RequestType: 27,\n          Type: 0\n        }\n\n        Connect.send(getSelf)\n\n        localStorage.setItem(\"FileAccessToken\", data.FileAccessToken)\n        localStorage.setItem(\"AccessToken\", data.Token.AccessToken)\n        localStorage.setItem(\"RefreshToken\", data.Token.RefreshToken)\n\n        props.setAuth(\"AUTH_SUCCESS\")\n      }\n      // Ответ на запрос получения текущего пользователя\n      else if (data.ResponseType === 12) {\n        const user = selectors.getFormatedUser([data.User])\n        user[0].currentUser = true\n        props.userReceived(user)\n      }\n      // Ответ на запрос получения дилогов\n      else if (data.ResponseType === 15) {\n        props.dialogsReceived(selectors.getFormatedDialogs(data.Conversations))\n      }\n      // Ответ на запрос получения сообщений\n      else if (data.ResponseType === 9) {\n        props.messagesReceived(selectors.getFormatedMessages(data.Messages))\n      }\n      // Новое сообщение\n      else if (data.Message) {\n        props.messagesReceived(selectors.getFormatedMessages([data.Message]))\n        // запрос диалогов\n        const getDialogs = {\n          NavigationMessageTime: null,\n          RequestId: Connect.makeId(),\n          RequestType: 12,\n          Type: 0\n        }\n\n        Connect.send(getDialogs)\n      }\n      // Прочтение исходящийх сообщений\n      else if (data.Type === 2 && data.Code === 5) {\n        props.readMessages(data.MessagesId)\n      }\n      // Ответ на запрос юзеров\n      else if (data.ResponseType === 0) {\n        props.userReceived(selectors.getFormatedUser(data.Users))\n      }\n      // Ответ на запрос чатов\n      else if (data.ResponseType === 2) {\n        const chats = selectors.getFormatedChats(data.Chats)\n\n        // запрашиваем список пользователей для чатов\n        chats.forEach(chat => {\n          const getChatsUsers = {\n            ChatId: chat.Id,\n            NavigationUserId: null,\n            RequestId: Connect.makeId(),\n            RequestType: 17,\n            Type: 0\n          }\n\n          Connect.send(getChatsUsers)\n        })\n\n        props.chatsReceived(selectors.getFormatedChats(data.Chats))\n      }\n      // Ответ на запрос юзеров в чате\n      // У них структура отличается от обычных юзеров, здесь приходит информация относящаяся именно к этому чату\n      else if (data.ResponseType === 16) {\n        props.chatsUsersReceived(selectors.getFormatedChatsUsers(data.ChatUsers))\n      }\n      // Ответ на вступление в канал\n      else if (data.ResponseType === 21) {\n        // запрос диалогов\n        const getDialogs = {\n          NavigationMessageTime: null,\n          RequestId: Connect.makeId(),\n          RequestType: 12,\n          Type: 0\n        }\n\n        Connect.send(getDialogs)\n      }\n      // Ответ на событие поиска\n      else if (data.ResponseType === 23) {\n        const searchResult = {}\n        if (data.Users.length > 0) {\n          searchResult.users = data.Users\n        }\n        if (data.Chats.length > 0) {\n          searchResult.chats = data.Chats\n        }\n        if (data.Channels.length > 0) {\n          searchResult.channels = data.Channels\n        }\n        props.searchResultReceived(searchResult)\n      }\n    }\n  }, [])\n\n  return null\n}\n\nfunction mapStateToProps(state) {\n  return {\n    users: state.users\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    dialogsReceived: dialogs => dispatch(dialogsReceived(dialogs)),\n    chatsReceived: chats => dispatch(chatsReceived(chats)),\n    chatsUsersReceived: chatsUsers => dispatch(chatsUsersReceived(chatsUsers)),\n    openDialog: dialogId => dispatch(openDialog(dialogId)),\n    userReceived: user => dispatch(userReceived(user)),\n    messagesReceived: messages => dispatch(messagesReceived(messages)),\n    readMessages: data => dispatch(readMessages(data)),\n    setAuth: auth => dispatch(setAuth(auth)),\n    searchResultReceived: data => dispatch(searchResultReceived(data)),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Socket)\n","import React, { useState, useEffect } from \"react\"\nimport { connect } from \"react-redux\"\nimport { BrowserRouter as Router, Route, Redirect } from \"react-router-dom\"\nimport { Spin } from \"antd\"\nimport {\n  dialogsReceived,\n  messagesReceived,\n  openDialog\n} from \"./actions/dialogs\"\nimport { userReceived } from \"./actions/user\"\nimport Auth from \"./components/Auth\"\nimport Registration from \"./components/Registration\"\nimport Verify from \"./components/Verify\"\nimport MainContainer from \"./components/MainContainer\"\nimport socket from \"./transport/Connect\"\nimport Connect from \"./transport/Socket\"\nimport { setAuth } from \"./actions/auth\"\n\nfunction App(props) {\n  useEffect(() => {\n    if (props.auth === \"AUTH_SUCCESS\") {\n      // запрос диалогов\n      const getDialogs = {\n        NavigationMessageTime: null,\n        RequestId: socket.makeId(),\n        RequestType: 12,\n        Type: 0\n      }\n\n      socket.send(getDialogs)\n    }\n  }, [props.auth])\n\n  useEffect(() => {\n    socket.wsOnConnect = () => {\n      if (localStorage.getItem(\"AccessToken\")) {\n        let login\n        if (localStorage.getItem(\"User\")) {\n          login = {\n            Token: {\n              UserId: JSON.parse(localStorage.getItem(\"User\")).Id,\n              AccessToken: localStorage.getItem(\"AccessToken\"),\n              RefreshToken: localStorage.getItem(\"RefreshToken\")\n            },\n            LoginType: 0,\n            UidType: 1,\n            RequestId: socket.makeId(),\n            RequestType: 33,\n            Type: 0\n          }\n        } else if (localStorage.getItem(\"Phone\")) {\n          login = {\n            Uid: localStorage.getItem(\"Phone\"),\n            Token: {\n              AccessToken: localStorage.getItem(\"AccessToken\"),\n              RefreshToken: localStorage.getItem(\"RefreshToken\")\n            },\n            LoginType: 0,\n            UidType: 0,\n            RequestId: socket.makeId(),\n            RequestType: 33,\n            Type: 0\n          }\n        } else if (localStorage.getItem(\"Email\")) {\n          console.log(\"По почте\")\n        }\n\n        socket.send(login)\n      } else {\n        props.setAuth(\"NO_AUTH\")\n      }\n    }\n  })\n\n  return (\n    <>\n      <Connect />\n      <Router>\n        <Route\n          path=\"/\"\n          render={\n            // eslint-disable-next-line no-nested-ternary\n            props.auth === \"CHECK_AUTH\"\n              ? () => (\n                  <div className=\"preloader\">\n                    <Spin size=\"large\" />\n                  </div>\n                )\n              : props.auth === \"AUTH_SUCCESS\"\n              ? () => (\n                  <>\n                    <Route path=\"/\" component={MainContainer} />\n                  </>\n                )\n              : () => <Redirect to=\"/auth\" />\n          }\n        />\n        <Route path=\"/auth/by-phone\" component={Verify} />\n        <Route path=\"/auth/by-email\" component={Verify} />\n        <Route exact path=\"/auth\" component={Auth} />\n        <Route exact path=\"/registration\" component={Registration} />\n      </Router>\n    </>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    dialogs: state.dialogs,\n    users: state.users,\n    auth: state.auth\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    dialogsReceived: dialogs => dispatch(dialogsReceived(dialogs)),\n    openDialog: dialogId => dispatch(openDialog(dialogId)),\n    userReceived: user => dispatch(userReceived(user)),\n    messagesReceived: messages => dispatch(messagesReceived(messages)),\n    setAuth: auth => dispatch(setAuth(auth))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import './css/style.css';\nimport 'antd/dist/antd.css';\nimport './css/style.scss';\nimport {Provider} from 'react-redux';\nimport configureStore from './store/configureStore';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport {BrowserRouter as Router} from \"react-router-dom\";\n\nconst store = configureStore();\n\nReactDOM.render(\n   <Provider store={store}>\n      <Router>\n         <App />\n      </Router>\n   </Provider>,\n   document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import {createStore, applyMiddleware} from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from '../reducers';\n\nexport default function configureStore(initialState) {\n    return createStore(\n        rootReducer,\n        initialState,\n        applyMiddleware(thunk)\n    );\n}\n"],"sourceRoot":""}