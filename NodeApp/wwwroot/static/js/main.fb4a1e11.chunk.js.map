{"version":3,"sources":["assets/logo.PNG","reducers/node.js","reducers/path.js","reducers/ui.js","reducers/contacts.js","reducers/index.js","reducers/dialogs.js","reducers/chats.js","reducers/messages.js","reducers/users.js","reducers/forwardMessage.js","reducers/auth.js","reducers/search.js","actions/dialogs.js","actions/user.js","actions/ui.js","transport/Connect.js","actions/node.js","actions/path.js","components/Auth.js","components/Registration.js","actions/auth.js","components/Verify.js","selectors/index.js","selectors/Message.js","selectors/Dialog.js","selectors/User.js","components/SidebarItem.js","components/HeadSidebar.js","components/Search.js","actions/search.js","components/Sidebar.js","components/HeadDialog.js","components/Avatar.js","assets/tick_icon.svg","assets/double_tick_icon.svg","components/Message.js","assets/paperclip_icon.svg","assets/send_button_icon.svg","components/NewMessageField.js","components/Dialog.js","components/DialogContainer.js","components/ProfileModal.js","components/CreateChatModal.js","transport/Request.js","components/ContactsModal.js","components/ContactsGroupsModal.js","actions/contacts.js","components/SettingsModal.js","components/MainContainer.js","transport/Socket.js","App.js","serviceWorker.js","index.js","store/configureStore.js"],"names":["module","exports","__webpack_require__","p","defaulState","activeNode","allNodes","defaultState","prevPath","currentPath","profile","search","showDrawer","appFocus","modals","createChatModal","contactsModal","contactsGroupsModal","settingsModal","users","usersIDs","groups","combineReducers","dialogs","state","arguments","length","undefined","action","type","newState","Object","toConsumableArray","activeDialog","find","dialog","active","forEach","ConversationId","ConversationType","messagesRecieved","payload","data","console","log","UnreadedCount","SecondUid","Id","fakeDialog","Title","NameFirst","NameSecond","Photo","fake","push","messages","conversationId","conversationType","PreviewText","Text","chats","chatsUsers","ChatId","Users","message","mess","GlobalId","sort","a","b","a_date","Date","SendingTime","b_date","Read","user","concat","contacts","objectSpread2","ContactUserId","userId","groupIndex","GroupsId","indexOf","groupId","splice","group","GroupId","forwardMessage","auth","node","nodes","path","ui","text","name","searchResult","dialogsReceived","messagesReceived","forwardingMessage","openDialog","userReceived","openProfile","toggleDrawer","toggleModal","wSocket","Connect","classCallCheck","this","domain","_this","webSocket","WebSocket","onopen","wsOnConnect","onclose","event","wasClean","onmessage","blobToJson","ErrorCode","onMessage","onMessageAuth","onerror","error","readyState","u","x","URL","createObjectURL","XMLHttpRequest","open","send","revokeObjectURL","JSON","parse","responseText","result","charactersLength","i","charAt","Math","floor","random","parseInt","stringify","setActiveNode","setPath","Auth","possibleConstructorReturn","getPrototypeOf","call","props","item","localStorage","setItem","socket","start","Domains","menu","react_default","createElement","es_menu","onClick","selectNode","bind","map","Item","key","Name","row","align","justify","style","height","col","className","es_button","connectNode","dropdown","overlay","getItem","icon","Component","connect","dispatch","_useState","useState","_useState2","slicedToArray","setName","_useState3","_useState4","surname","setSurname","_useState5","_useState6","phone","setPhone","_useState7","_useState8","email","setEmail","_useState9","_useState10","verifyCode","setVerifyCode","_useState11","_useState12","nameErr","setNameErr","_useState13","_useState14","contactsErr","setContactsErr","_useState15","_useState16","verifyCodeErr","setVerifyCodeErr","_useState17","_useState18","btnLoader","setbtnLoader","_useState19","_useState20","_useState21","_useState22","showRegButton","setShowRegButton","useEffect","ResponseType","FileAccessToken","Token","AccessToken","RefreshToken","User","window","location","replace","es_form","Fragment","validateStatus","help","input","placeholder","value","onChange","e","target","textAlign","regData","Phones","About","Country","City","Birthday","Language","NodeId","Online","Emails","Blacklist","Visible","Security","Tag","RegistrationDate","VCode","RequestId","makeId","RequestType","Type","loading","verifyData","VerificationType","Uid","IsRegistration","getVerifyCode","setAuth","Verify","verifyUid","verifyErr","verifyRequestSended","btnPreloader","redirect","_this2","setState","Message","preventDefault","LoginType","UidType","verifyType","_this3","react_router","to","setPrevPath","onSubmit","sendverifyCode","autoFocus","inputMode","onChangeVerifCode","htmlType","disabled","sendVerificationQuery","onChangePhone","selectors","getFormatedMessages","tempMess","Attachments","SenderId","getFormatedDialogs","tempDialogs","AttachmentType","IsMuted","LastMessageId","LastMessageSenderId","LastMessageSenderName","LastMessageTime","getFormatedChats","chat","tempChat","Key","NodesId","Public","getFormatedChatsUsers","tempUser","Banned","Deleted","InviterId","Joined","UserId","UserInfo","UserRole","getFormatedUser","BlackList","Confirmed","Contact","ContactsPrivacy","Encryption","Groups","Keys","getUserById","id","getUserInitials","initials","ChannelName","defaultAva","split","substr","getActiveDialog","SidebarItem","newsContent","refs","messageText","newsText","innerText","slice","avatarStyle","width","backgroundSize","backgroundPosition","backgroundImage","backgroundRepeat","react_router_dom","ref","dialogId","src","logo","alt","Search","Input","searchStart","searchEnd","queryText","setQueryText","searchDialogs","toLowerCase","searchRequest","SearchQuery","Direction","onSearch","enterButton","localFoundDialogs","setLocalFoundDialogs","filter","components_HeadSidebar","components_Search","components_SidebarItem","showSearchResultUsers","showSearchResultChats","channels","showSearchResultChannels","JavascriptTimeAgo","locale","ru","closeDialog","setDialog","setDefaultAva","setUser","document","body","clientWidth","windowWidth","setWindowWidth","onresize","ReactTimeAgo","date","logout","Full","removeItem","borderRadius","_extends","assign","source","prototype","hasOwnProperty","apply","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","points","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","tick_icon_SvgTickIcon","_ref","svgRef","y","viewBox","enableBackground","xmlSpace","ForwardRef","forwardRef","double_tick_icon_extends","double_tick_icon_objectWithoutProperties","double_tick_icon_objectWithoutPropertiesLoose","double_tick_icon_ref2","d","double_tick_icon_ref3","double_tick_icon_ref4","double_tick_icon_ref5","double_tick_icon_ref6","double_tick_icon_ref7","double_tick_icon_ref8","double_tick_icon_ref9","double_tick_icon_ref10","double_tick_icon_ref11","double_tick_icon_ref12","double_tick_icon_ref13","double_tick_icon_ref14","double_tick_icon_ref15","double_tick_icon_ref16","double_tick_icon_ref17","double_tick_icon_SvgDoubleTickIcon","double_tick_icon_ForwardRef","visible","setVisible","messageTime","setMessageTime","isContextMenuVisible","setSsContextMenuVisible","setRedirect","timestamp","setTime","hour","getHours","minutes","getMinutes","setLinks","str","reg","match","k","conversation","Payload","currentUser","background","components_Avatar","FileId","forwardingUser","getForwardingUser","dangerouslySetInnerHTML","__html","fontStyle","href","download","Filename","modal","onCancel","footer","maskClosable","paperclip_icon_extends","paperclip_icon_objectWithoutProperties","paperclip_icon_objectWithoutPropertiesLoose","paperclip_icon_ref2","transform","paperclip_icon_SvgPaperclipIcon","paperclip_icon_ForwardRef","send_button_icon_extends","send_button_icon_objectWithoutProperties","send_button_icon_objectWithoutPropertiesLoose","send_button_icon_ref2","send_button_icon_ref3","send_button_icon_ref4","send_button_icon_ref5","send_button_icon_ref6","send_button_icon_ref7","send_button_icon_ref8","send_button_icon_ref9","send_button_icon_ref10","send_button_icon_ref11","send_button_icon_ref12","send_button_icon_ref13","send_button_icon_ref14","send_button_icon_ref15","send_button_icon_ref16","send_button_icon_ref17","send_button_icon_SvgSendButtonIcon","send_button_icon_ForwardRef","setMessageText","imgLoading","setImgLoading","imageUrl","setImageUrl","attachmentsType","setAttachmentsType","sendMessage","Messages","ReceiverId","ReplyTo","MessagesGlobalId","Hash","MessageId","upload","showUploadList","customRequest","file","fileAccessToken","axios","defaults","headers","formData","FormData","append","post","then","res","status","File","catch","err","handleUploadImage","beforeUpload","isJpgOrPng","info","onKeyDown","keyCode","setMessages","mesViewport","useRef","MessagesId","ChannelId","setTimeout","current","scrollTop","uniqueUsers","Set","n","requestUsers","UsersId","getUsers","onDragOver","classList","add","fileOver","onDragLeave","remove","fileLeave","onDrop","dataTransfer","files","attachmentType","fileDrop","components_Message","size","ChannelsId","components_NewMessageField","NavigationMessageTime","zIndex","components_HeadDialog","components_Dialog","setProfile","prevProfile","setPrevProfile","getChatInfo","ChatsId","undefinedUsers","handleCancelProfile","margin","FullNumber","foundUser","marginTop","chatName","setChatName","nameError","setNameError","chatPrivate","setChatPrivate","chatChannel","setChatChannel","setLoading","setUsersIds","showUsers","setShowUsers","title","listType","fontSize","color","divider","es_switch","checked","block","ContactUser","ContactId","includes","foudnUserIndex","addContactToChat","newChat","Chats","handleCreateChat","request","Request","getDialogs","getUserContacts","usersIds","requestdData","contactsIDs","TabPane","Tabs","getUserGroups","showContacts","contact","handleOpenChat","tabs","defaultActiveKey","getGroupContacts","tab","Typography","removeContactFromGroup","removeGroup","groupOpen","setGroupOpen","creatingGroup","setCreatingGroup","handleSetChatName","openGroup","openedGroup","strong","newGroup","Group","createGroup","defaultValue","shape","removeUser","removeUserFromGroup","addUsersToGroup","updateGroup","removeContactGroup","lastName","setLastName","about","setAbout","uploadButton","addonBefore","SubscriberNumber","userData","editUser","handleUpdateUser","addEventListener","drawer","placement","closable","onClose","components_Sidebar","components_DialogContainer","components_ProfileModal","components_CreateChatModal","components_ContactsModal","components_ContactsGroupsModal","components_SettingsModal","chatsReceived","chatsUsersReceived","readMessages","searchResultReceived","setContactUsersIDs","userGroupsReceived","setContacts","getSelf","Conversations","Code","getChatsUsers","NavigationUserId","ChatUsers","Channels","userIDs","Contacts","messagesRead","licens","setNodes","setAppFocus","onfocus","onblur","getNodesObj","response","Nodes","login","transport_Socket","spin","components_MainContainer","components_Verify","components_Registration","components_Auth","Boolean","hostname","initialState","store","createStore","rootReducer","applyMiddleware","thunk","ReactDOM","render","es","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.fb4a1e11.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.024bbe57.PNG\";","/* eslint-disable */\nconst defaulState = {\n  activeNode: null,\n  allNodes: null\n}\n\nexport function node(state = defaulState, action) {\n  if(action.type === 'SET_NODE') {\n    let newState = {...state}\n    newState.activeNode = action.node\n    return newState\n  } else if(action.type === 'SET_NODES') {\n    let newState = {...state}\n    newState.allNodes = action.nodes\n    return newState\n  }\n  return state\n}\n","/* eslint-disable */\nconst defaultState = {\n  prevPath: '',\n  currentPath: ''\n}\n\nexport function path(state = defaultState, action) {\n  if(action.type === 'SET_PATH') {\n    let newState = {...state}\n    newState.prevPath = newState.path\n    newState.currentPath = action.path\n    return newState\n  } else if(action.type === 'PREV_PATH') {\n    let newState = {...state}\n    newState.currentPath = newState.prevPath\n    return newState\n  }\n  return state\n}\n","/* eslint-disable */\nconst defaultState = {\n  profile: null,\n  search: false,\n  showDrawer: false,\n  appFocus: true,\n  modals: {\n    createChatModal: false,\n    contactsModal: false,\n    contactsGroupsModal: false,\n    settingsModal: false\n  }\n}\n\nexport function ui(state = defaultState, action) {\n  if(action.type === 'OPEN_PROFILE') {\n    let newState = {...state}\n    newState.profile = action.dialog\n    return newState\n  }\n  else if (action.type === 'SEARCH_START') {\n    let newState = {...state}\n    newState.search = action.text\n    return newState\n  }\n  else if (action.type === 'SEARCH_END') {\n    let newState = {...state}\n    newState.search = false\n    return newState\n  }\n  else if (action.type === 'TOGGLE_DRAWER') {\n    let newState = {...state}\n    if (action.name === \"close\") {\n      newState.showDrawer = false\n    } else {\n      newState.showDrawer = !newState.showDrawer\n    }\n    return newState\n  }\n  else if (action.type === 'TOGGLE_MODAL') {\n    let newState = {...state}\n    if (action.name === \"close\") {\n      for (var name in newState.modals) {\n        newState.modals[name] = false\n      }\n    } else {\n      newState.modals[action.name] = !newState.modals[action.name]\n    }\n    return newState\n  }\n  else if (action.type === 'SET_APP_FOCUS') {\n    let newState = {...state}\n    newState.appFocus = action.data\n    return newState\n  }\n  else {\n    return state\n  }\n}\n","/* eslint-disable */\nconst defaultState = {\n  users: [],\n  usersIDs: [],\n  groups: []\n}\n\nexport function contacts(state = defaultState, action) {\n  if(action.type === 'SET_CONTACT_USERS_IDS') {\n    let newState = {...state}\n    newState.usersIDs = action.usersIDs\n    return newState\n  }\n  if(action.type === 'SET_CONTACTS') {\n    let newState = {...state}\n    newState.users = action.contacts\n    return newState\n  }\n  else if (action.type === \"USER_GROUPS_RECEIVED\") {\n    let newState = {...state}\n    newState.groups = action.groups\n    return newState\n  }\n  else if (action.type === \"REMOVE_CONTACT_FROM_GROUP\") {\n    let newState = {...state}\n    newState.users.forEach(user => {\n      if (user.ContactUserId === action.payload.userId) {\n        let groupIndex = user.GroupsId.indexOf(action.payload.groupId)\n        user.GroupsId.splice(groupIndex, 1)\n      }\n    })\n    return newState\n  }\n  else if (action.type === \"REMOVE_GROUP\") {\n    let newState = {...state}\n    newState.groups.forEach(group => {\n      if (group.GroupId === action.groupId) {\n        let groupIndex = newState.groups.indexOf(group)\n        newState.groups.splice(groupIndex, 1)\n      }\n    })\n    return newState\n  }\n  else {\n    return state\n  }\n}\n","import { combineReducers } from \"redux\"\nimport { dialogs } from \"./dialogs\"\nimport { chats } from \"./chats\"\nimport { messages } from \"./messages\"\nimport { users } from \"./users\"\nimport { forwardMessage } from \"./forwardMessage\"\nimport { auth } from \"./auth\"\nimport { node } from \"./node\"\nimport { path } from \"./path\"\nimport { ui } from \"./ui\"\nimport { searchResult } from \"./search\"\nimport { contacts } from \"./contacts\"\n\nexport default combineReducers({\n  dialogs,\n  chats,\n  messages,\n  users,\n  contacts,\n  forwardMessage,\n  auth,\n  node,\n  path,\n  ui,\n  searchResult\n})\n","/* eslint-disable */\nexport function dialogs(state = [], action) {\n   if (action.type === 'DIALOGS_RECEIVED') {\n      let newState = [...state]\n      let activeDialog = newState.find(dialog => dialog.active)\n      newState = action.dialogs\n      if (activeDialog) {\n         newState.forEach(dialog => {\n            if (dialog.ConversationId === activeDialog.ConversationId && dialog.ConversationType === activeDialog.ConversationType) {\n               dialog.active = true\n               dialog.messagesRecieved = activeDialog.messagesRecieved\n            }\n         })\n      }\n      return newState\n   }\n   else if(action.type === 'OPEN_DIALOG') {\n      let newState = [...state]\n      // В action.payload.data может содержаться и сам диалог и объект юзера диалога с которым еще нет\n      // Если диалога с юзером нет, то создаем фэйковый диалог\n      // И после отправи сообщения диалог будет создан и просто запрашиваем его на сервере\n      if (action.payload.type === 'dialog') {\n         newState.forEach(function(dialog){\n            dialog.active = false\n   \n            if (dialog.ConversationId === action.payload.data.ConversationId && dialog.ConversationType === action.payload.data.ConversationType) {\n               console.log(dialog)\n               dialog.active = true\n               dialog.UnreadedCount = 0\n               dialog.type = action.payload.type\n            }\n         })\n      } else if (action.payload.type === 'user') {\n         let dialogWithUser = newState.find(dialog => dialog.SecondUid === action.payload.data.Id)\n         if (dialogWithUser) {\n            newState.forEach(dialog => {\n               dialog.active = false\n\n               if (dialog.SecondUid === action.payload.data.Id) {\n                  dialog.active = true\n                  dialog.UnreadedCount = 0\n                  dialog.type = 'dialog'\n               }\n            })\n         } else {\n            let fakeDialog = {}\n         \n            fakeDialog.ConversationId = action.payload.data.Id,\n            fakeDialog.Title = action.payload.data.NameFirst + ' ' + action.payload.data.NameSecond,\n            fakeDialog.Photo = action.payload.data.Photo,\n            fakeDialog.ConversationType = 1,\n            fakeDialog.SecondUid = action.payload.data.Id,\n            fakeDialog.fake = true\n   \n            newState.push(fakeDialog)\n   \n            newState.forEach(function(dialog){\n               dialog.active = false\n      \n               if (dialog.ConversationId === action.payload.data.Id) {\n                  dialog.active = true\n                  dialog.UnreadedCount = 0\n                  dialog.type = action.payload.type\n               }\n            })\n         }\n      } else if (action.payload.type === 'channel') {\n         newState.push(action.payload.data)\n\n         newState.forEach(function(dialog){\n            dialog.active = false\n   \n            if (dialog.ConversationId === action.payload.data.Id) {\n               dialog.active = true\n               dialog.UnreadedCount = 0\n               dialog.type = action.payload.type,\n               dialog.fake = true\n            }\n         })\n      } else if (action.payload.type === 'chat') {\n         let chat = newState.find(dialog => dialog.ConversationId === action.payload.data.Id)\n         if (chat) {\n            newState.forEach(dialog => {\n               dialog.active = false\n\n               if (dialog.ConversationId === action.payload.data.Id) {\n                  dialog.active = true\n                  dialog.UnreadedCount = 0\n                  dialog.type = 'chat'\n               }\n            })\n         } else {\n            let fakeDialog = {}\n         \n            fakeDialog.ConversationId = action.payload.data.Id,\n            fakeDialog.Title = action.payload.data.NameFirst + ' ' + action.payload.data.NameSecond,\n            fakeDialog.Photo = action.payload.data.Photo,\n            fakeDialog.ConversationType = 1,\n            fakeDialog.SecondUid = action.payload.data.Id,\n            fakeDialog.fake = true\n   \n            newState.push(fakeDialog)\n   \n            newState.forEach(function(dialog){\n               dialog.active = false\n      \n               if (dialog.ConversationId === action.payload.data.Id) {\n                  dialog.active = true\n                  dialog.UnreadedCount = 0\n                  dialog.type = action.payload.type\n               }\n            })\n         }\n      }\n\n      return newState\n   }\n   else if(action.type === 'CLOSE_DIALOG') {\n      let newState = [...state]\n\n      newState.forEach(dialog => {\n         if (dialog.active) {\n            dialog.active = false\n         }\n      })\n\n      return newState\n   }\n   else if(action.type === 'MESSAGES_RECEIVED'){\n      let newState = [...state]\n\n      if (action.messages.length) {\n         let conversationId = action.messages[0].ConversationId\n         let conversationType = action.messages[0].conversationType\n         newState.forEach(dialog => {\n            if (dialog.ConversationId === conversationId && dialog.ConversationType === conversationType) {\n               // устанавливаем флаг по которому при открытии диалога проверяем запрашивались ли для него сообщения\n               dialog.messagesRecieved = true\n               // превью диалога отображается в сайдбаре\n               dialog.PreviewText = action.messages[0].Text\n               // если диалог не открыт, то накручиваем счетчик непрочитаных\n               if(!dialog.active) {\n                  dialog.UnreadedCount += 1\n               }\n               // поднимаем диалог на первое место в сайдбаре\n               // let dialogIndex = newState.indexOf(dialog)\n               // newState.splice(dialogIndex, 1)\n               // newState.unshift(dialog)\n            }\n         })\n      }\n\n      return newState\n   }\n   else {\n      return state\n   }\n}\n","/* eslint-disable */\n// В chats хрнаится объект только одного чата, информацию о котором просматривается в данный момент\nexport function chats(state = [], action) {\nif (action.type === 'CHATS_RECEIVED') {\n    let newState = [...state];\n    newState = action.chats;\n    return newState;\n  }\n  else if (action.type === 'CHATS_USERS_RECEIVED') {\n    let newState = [...state];\n    if (newState[0].Id === action.chatsUsers[0].ChatId) {\n      newState[0].Users = action.chatsUsers;\n    }\n    return newState;\n  }\n  else {\n    return state;\n  }\n}\n","/* eslint-disable  */\n\nfunction sortMessages(messages) {\n  return messages.sort(function(a, b) {\n    let a_date = new Date(a.SendingTime)\n    let b_date = new Date(b.SendingTime)\n    if (a_date < b_date) {\n      return -1\n    } if (a_date > b_date) {\n      return 1\n    } else {\n      return 0\n    }\n  })\n}\n\nexport function messages(state = [], action) {\n  if (action.type === \"MESSAGES_RECEIVED\") {\n    let newState = [...state]\n    action.messages.forEach(message => {\n      let existence = newState.find(mess => mess.GlobalId === message.GlobalId)\n      if (!existence) {\n        newState.push(message)\n      }\n    })\n\n    return sortMessages(newState)\n  }\n  else if(action.type === \"READ_MESSAGES\") {\n    let newState = [...state]\n    \n    newState.forEach(message => {\n      if (message.ConversationId === action.data.ConversationId && message.ConversationType === action.data.ConversationType) {\n        message.Read = true\n      }\n    })\n\n    return newState\n  }\n  else {\n    return state\n  }\n}\n","/* eslint-disable */\nexport function users(state = [], action) {\n  if(action.type === 'USER_RECEIVED') {\n    let newState = state;\n    \n    if(action.users.length > 0) {\n      let foundUser = newState.find(user => user.Id === action.users[0].Id);\n\n      if (!foundUser) {\n        newState = [...newState, ...action.users];\n      }\n    }\n    \n    return newState;\n  } else {\n    return state;\n  }\n}\n","/* eslint-disable */\nexport function forwardMessage(state = false, action) {\n  if (action.type === \"FORWARD_MESSAGE\") {\n    let newState = state\n\n    newState = action.message\n\n    return newState\n  } else {\n    return state\n  }\n}\n","/* eslint-disable */\nexport function auth(state = \"CHECK_AUTH\", action) {\n  if(action.type === 'SET_AUTH') {\n    let newState = state\n    newState = action.auth\n    return newState\n  }\n  return state\n}\n","/* eslint-disable */\nexport function searchResult(state = null, action) {\n  if(action.type === 'SEARCH_RESULT_RECEIVED') {\n    let newState = {...state}\n    newState = action.searchResult\n    return newState\n  }\n  else if(action.type === 'SEARCH_END') {\n    let newState = {...state}\n    newState = null\n    return newState\n  }\n  else {\n    return state\n  }\n}\n","export function dialogsReceived(dialogs) {\n  return {\n    type: \"DIALOGS_RECEIVED\",\n    dialogs\n  }\n}\n\nexport function chatsReceived(chats) {\n  return {\n    type: \"CHATS_RECEIVED\",\n    chats\n  }\n}\n\nexport function messagesReceived(messages) {\n  return {\n    type: \"MESSAGES_RECEIVED\",\n    messages\n  }\n}\n\nexport function readMessages(data) {\n  return {\n    type: \"READ_MESSAGES\",\n    data\n  }\n}\n\nexport function forwardingMessage(message) {\n  return {\n    type: \"FORWARD_MESSAGE\",\n    message\n  }\n}\n\nexport function openDialog(payload) {\n  return {\n    type: \"OPEN_DIALOG\",\n    payload\n  }\n}\n\nexport function closeDialog() {\n  return {\n    type: \"CLOSE_DIALOG\"\n  }\n}\n","export function userReceived(users) {\n  return {\n    type: \"USER_RECEIVED\",\n    users\n  }\n}\n\nexport function chatsUsersReceived(chatsUsers) {\n  return {\n    type: \"CHATS_USERS_RECEIVED\",\n    chatsUsers\n  }\n}\n","/* eslint-disable */\nexport function openProfile(dialog) {\n  return {\n    type: \"OPEN_PROFILE\",\n    dialog\n  }\n}\n\nexport function toggleDrawer(name) {\n  return {\n    type: \"TOGGLE_DRAWER\",\n    name\n  }\n}\n\nexport function toggleModal(name) {\n  return {\n    type: \"TOGGLE_MODAL\",\n    name: name\n  }\n}\n\nexport function setAppFocus(data) {\n  return {\n    type: \"SET_APP_FOCUS\",\n    data\n  }\n}\n","/* eslint-disable */\nclass Connect {\n  constructor() {\n    \n  }\n\n  start(domain){\n    this.webSocket = new WebSocket(`wss://${domain}:5000`)\n\n    this.webSocket.onopen = () => {\n      console.log(\"Соединение установлено\")\n      this.wsOnConnect()\n    }\n\n    this.webSocket.onclose = event => {\n      if (event.wasClean) {\n        console.log(\"Соединение закрыто\")\n      } else {\n        console.log(\"Обрыв соединения\")\n      }\n      console.log(\"Код: \", event)\n    }\n\n    this.webSocket.onmessage = event => {\n      const message = this.blobToJson(event.data)\n\n      if (message.ErrorCode && message.ErrorCode !== 0) {\n        console.log('%c REQUEST ERR ',  'background: #ff4545; color: #bada55; padding: 3px', message)\n      } else {\n        this.onMessage(message)\n        this.onMessageAuth(message)\n        console.log(\n          \"%c RESPONSE \",\n          \"background: #00ff00; color: #000; padding: 3px\",\n          this.blobToJson(event.data)\n        )\n      }\n    }\n\n    this.webSocket.onerror = error => {\n      console.log('%c ERROR CONNECT ',  'background: red; color: #bada55; padding: 3px', error);\n    }\n  }\n\n  getStatus(){\n    return this.webSocket.readyState\n  }\n\n  blobToJson(data) {\n    var u, x\n    u = URL.createObjectURL(data)\n    x = new XMLHttpRequest()\n    x.open(\"GET\", u, false)\n    x.send()\n    URL.revokeObjectURL(u)\n\n    return JSON.parse(x.responseText)\n  }\n\n  makeId() {\n    var result = \"\"\n    var characters = \"0123456789\"\n    var charactersLength = characters.length\n    for (var i = 0; i < 18; i++) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength))\n    }\n\n    return parseInt(result)\n  }\n\n  send(data) {\n    console.log(\n      \"%c REQUEST \",\n      \"background: #222; color: #bada55; padding: 3px\",\n      data\n    )\n    this.webSocket.send(JSON.stringify(data))\n  }\n\n  onMessage() {}\n\n  onMessageAuth() {}\n\n  wsOnConnect() {}\n}\n\nconst wSocket = new Connect()\n\nexport default wSocket\n","/* eslint-disable */\nexport function setActiveNode(node) {\n  return {\n    type: \"SET_NODE\",\n    node\n  }\n}\n\nexport function setNodes(nodes) {\n  return {\n    type: \"SET_NODES\",\n    nodes\n  }\n}","export function setPath(path) {\n  return {\n    type: \"SET_PATH\",\n    path: path\n  }\n}\n\nexport function setPrevPath() {\n  return {\n    type: \"PREV_PATH\"\n  }\n}","import React, { Component } from \"react\"\nimport { Row, Col, Button, Menu, Dropdown, Icon } from \"antd\"\n// import { Link } from \"react-router-dom\"\nimport { connect } from \"react-redux\"\nimport socket from \"../transport/Connect\"\nimport { setActiveNode } from \"../actions/node\"\nimport { setPath } from \"../actions/path\"\n\nclass Auth extends Component {\n  constructor() {\n    super()\n    // this.state = {\n    //   nodes: [],\n    //   activeNode: null\n    // }\n  }\n\n  componentDidMount() {\n    // this.setState({\n    //   nodes: JSON.parse(localStorage.getItem(\"nodes\")),\n    //   activeNode: JSON.parse(localStorage.getItem(\"node\"))\n    // })\n  }\n\n  selectNode(node) {\n    // this.setState({\n    //   activeNode: node.item.props.data\n    // })\n    this.props.setActiveNode(node.item.props.data)\n    localStorage.setItem(\"node\", JSON.stringify(node.item.props.data))\n  }\n\n  connectNode(path) {\n    if (this.props.node.activeNode) {\n      socket.start(this.props.node.activeNode.Domains[0])\n    } else {\n      socket.start(this.props.node.allNodes[0].Domains[0])\n      this.props.setActiveNode(this.props.node.allNodes[0])\n      localStorage.setItem(\"node\", JSON.stringify(this.props.node.allNodes[0]))\n    }\n    this.props.setPath(path)\n  }\n\n  render() {\n    const menu = (\n      <Menu onClick={this.selectNode.bind(this)}>\n        {\n          this.props.node.allNodes ?\n            this.props.node.allNodes.map((node, i) => {\n              return (\n                <Menu.Item key={i} data={node}>\n                  {node.Name}\n                </Menu.Item>\n              )\n            })\n          : null\n        }\n      </Menu>\n    )\n    return (\n      <Row\n        type=\"flex\"\n        align=\"middle\"\n        justify=\"center\"\n        style={{ height: \"100vh\" }}\n      >\n        <Col>\n          <div className=\"auth__type\">\n            <h1>Вход</h1>\n            <h2>Выберите способ входа</h2>\n            <Button type=\"secondary\" onClick={this.connectNode.bind(this, 'by-phone')}>По номеру телефона</Button>\n            <br />\n            <Button type=\"secondary\" onClick={this.connectNode.bind(this, 'by-email')}>По электронной почте</Button>\n            <br />\n            <Button type=\"secondary\">Через приложение</Button>\n            <br />\n            <br />\n            <Button type=\"link\" onClick={this.connectNode.bind(this, 'registration')}>Регистрация</Button>\n            <br />\n            <div className=\"auth__type_server\">\n              <span>Сервер: </span>\n              <Dropdown overlay={menu}>\n                <span className=\"ant-dropdown-link\">\n                  {localStorage.getItem(\"node\")\n                    ? JSON.parse(localStorage.getItem(\"node\")).Name\n                    : \"Автоматически\"}\n                  <Icon type=\"down\" />\n                </span>\n              </Dropdown>\n            </div>\n          </div>\n        </Col>\n      </Row>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    node: state.node\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setActiveNode: node => dispatch(setActiveNode(node)),\n    setPath: path => dispatch(setPath(path))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Auth)\n","/* eslint-disable */\nimport React, { useState, useEffect } from \"react\"\nimport { Row, Col, Button, Form, Input, Dropdown, Menu, Icon } from \"antd\"\nimport { connect } from \"react-redux\"\nimport socket from \"../transport/Connect\"\n\nfunction Registration(props) {\n  const [name, setName] = useState(\"\")\n  const [surname, setSurname] = useState(\"\")\n  const [phone, setPhone] = useState(\"\")\n  const [email, setEmail] = useState(\"\")\n  const [verifyCode, setVerifyCode] = useState(\"\")\n  const [nameErr, setNameErr] = useState(false)\n  const [contactsErr, setContactsErr] = useState(false)\n  const [verifyCodeErr, setVerifyCodeErr] = useState(false)\n  const [btnLoader, setbtnLoader] = useState(false)\n  const [activeNode, setActiveNode] = useState(null)\n  const [showRegButton, setShowRegButton] = useState(false)\n\n  useEffect(() => {\n    socket.onMessage = data => {\n      if (data.ErrorCode !== 0) {\n        // console.log(data)\n      } else if (data.ResponseType === 6) {\n        localStorage.setItem(\"FileAccessToken\", data.FileAccessToken)\n        localStorage.setItem(\"AccessToken\", data.Token.AccessToken)\n        localStorage.setItem(\"RefreshToken\", data.Token.RefreshToken)\n        localStorage.setItem(\"User\", JSON.stringify(data.User))\n\n        window.location.replace(\"/\")\n      }\n    }\n\n    setActiveNode(JSON.parse(localStorage.getItem(\"node\")))\n  }, [])\n\n  const handleRegistration = () => {\n    if (!verifyCode) {\n      setVerifyCodeErr(\"Это поле обязательно для заполнения\")\n    } else {\n      setbtnLoader(true)\n\n      const regData = {\n        User: {\n          Id: 0,\n          Phones: phone ? [phone] : null,\n          NameFirst: name,\n          NameSecond: surname,\n          About: \"\",\n          Photo: \"\",\n          Country: \"\",\n          City: \"\",\n          Birthday: \"\",\n          Language: null,\n          NodeId: activeNode.Id,\n          Online: null,\n          Emails: email ? [email] : null,\n          Blacklist: null,\n          Visible: null,\n          Security: null,\n          Tag: 0,\n          RegistrationDate: null\n        },\n        VCode: parseInt(verifyCode),\n        RequestId: socket.makeId(),\n        RequestType: 37,\n        Type: 0\n      }\n\n      socket.send(regData)\n    }\n  }\n\n  const handleSetName = e => {\n    setName(e.target.value)\n    setNameErr(false)\n  }\n\n  const handleSetSurname = e => {\n    setSurname(e.target.value)\n  }\n\n  const handleSetPhone = e => {\n    setPhone(e.target.value)\n    setContactsErr(false)\n  }\n\n  const handleSetEmail = e => {\n    setEmail(e.target.value)\n    setContactsErr(false)\n  }\n\n  const handleSetVerifyCode = e => {\n    setVerifyCode(e.target.value)\n    setVerifyCodeErr(false)\n  }\n\n  const selectNode = data => {\n    if (data.item.props.data) {\n      setActiveNode(data.item.props.data)\n      localStorage.setItem(\"node\", JSON.stringify(data.item.props.data))\n    }\n  }\n\n  const menu = (\n    <Menu onClick={(node) => selectNode(node)}>\n      {props.nodes.map((node, i) => {\n        return (\n          <Menu.Item key={i} data={node}>\n            {node.Name}\n          </Menu.Item>\n        )\n      })}\n      {\n        // this.state.activeNode ? <Menu.Item key='auto' data={null}>Автоматически</Menu.Item> : null\n      }\n    </Menu>\n  )\n\n  const getVerifyCode = () => {\n    if (name.length === 0) {\n      setNameErr(\"Это поле обязательно для заполнения\")\n    } else if (phone.length === 0 && email.length === 0) {\n      setContactsErr(\"Одно из этих полей обязательно для заполнения\")\n    } else {\n      const verifyData = {\n        VerificationType: email ? 1 : phone ? 0 : 0,\n        Uid: phone ? phone : email,\n        IsRegistration: true,\n        RequestId: socket.makeId(),\n        RequestType: 42,\n        Type: 0\n      }\n\n      setShowRegButton(true)\n\n      socket.send(verifyData)\n    }\n  }\n\n  return (\n    <Row\n      type=\"flex\"\n      align=\"middle\"\n      justify=\"center\"\n      style={{ height: \"100vh\" }}\n    >\n      <Col>\n        <div className=\"auth__type\">\n          <h1>Регистрация</h1>\n          <div>\n            <Form className=\"login-form\">\n              {\n                showRegButton ? \n                  <>\n                    <div className=\"verify-text\">{`Мы отправили вам код подтверждения на ваш ${phone ? 'телефон' : 'email'}, пожалуйста введите его в поле ниже и завершите регистрацию`}</div>\n                    <Form.Item\n                      validateStatus={verifyCodeErr ? \"error\" : \"\"}\n                      help={verifyCodeErr || \"\"}\n                    >\n                      <Input placeholder=\"Код\" value={verifyCode} onChange={handleSetVerifyCode} />\n                    </Form.Item>\n                    <Form.Item>\n                      <Row>\n                        <Col style={{ textAlign: \"center\" }}>\n                          <Button\n                            type=\"primary\"\n                            onClick={handleRegistration}\n                            loading={btnLoader}\n                          >\n                            Зарегистрироваться\n                          </Button>\n                        </Col>\n                      </Row>\n                    </Form.Item>\n                  </>\n                :\n                  <>\n                    <Form.Item\n                      validateStatus={nameErr ? \"error\" : \"\"}\n                      help={nameErr || \"\"}\n                    >\n                      <Input placeholder=\"Имя\" onChange={handleSetName} />\n                    </Form.Item>\n                    <Form.Item validateStatus=\"\">\n                      <Input placeholder=\"Фамилия\" onChange={handleSetSurname} />\n                    </Form.Item>\n                    <Form.Item\n                      validateStatus={contactsErr ? \"error\" : \"\"}\n                      help={contactsErr || \"\"}\n                    >\n                      <Input placeholder=\"Номер телефона\" onChange={handleSetPhone} />\n                    </Form.Item>\n                    <div className=\"verify-text\"><span>или</span></div>\n                    <Form.Item\n                      validateStatus={contactsErr ? \"error\" : \"\"}\n                      help={contactsErr || \"\"}\n                    >\n                      <Input placeholder=\"Email\" onChange={handleSetEmail} />\n                    </Form.Item>\n                    <Form.Item>\n                      <Row>\n                        <Col style={{ textAlign: \"center\" }}>\n                          <Button\n                            type=\"primary\"\n                            onClick={() => getVerifyCode()}\n                          >\n                            Получить код\n                          </Button>\n                        </Col>\n                      </Row>\n                    </Form.Item>\n                  </>\n              }\n            </Form>\n            <div className=\"auth__type_server\">\n              <span>Сервер: </span>\n              <Dropdown overlay={menu}>\n                <span className=\"ant-dropdown-link\">\n                  {activeNode\n                    ? activeNode.Name\n                    : \"Автоматически\"}\n                  <Icon type=\"down\" />\n                </span>\n              </Dropdown>\n            </div>\n          </div>\n        </div>\n      </Col>\n    </Row>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    nodes: state.node.allNodes\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {}\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Registration)","export function setAuth(auth) {\n  return {\n    type: \"SET_AUTH\",\n    auth\n  }\n}\n","/* eslint-disable */\nimport React, { Component } from \"react\"\nimport { Row, Col, Button, Form, Input, Icon } from \"antd\"\nimport { Redirect } from \"react-router-dom\"\nimport { connect } from \"react-redux\"\nimport { setAuth } from \"../actions/auth\"\nimport { setPrevPath } from \"../actions/path\"\nimport socket from \"../transport/Connect\"\n\nclass Verify extends Component {\n  constructor() {\n    super()\n    this.state = {\n      verifyUid: null,\n      verifyErr: null,\n      verifyRequestSended: false,\n      verifyCode: null,\n      verifyCodeErr: null,\n      btnPreloader: false,\n      redirect: false\n    }\n  }\n\n  componentDidMount() {\n    socket.onMessageAuth = data => {\n      this.setState({\n        btnPreloader: false\n      })\n\n      if (data.ErrorCode !== 0) {\n        this.setState({\n          verifyErr: data.Message\n        })\n      } else if (data.ResponseType === 10) {\n        this.setState({\n          verifyRequestSended: true\n        })\n      } else if (data.ResponseType === 6) {\n        localStorage.setItem(\"FileAccessToken\", data.FileAccessToken)\n        localStorage.setItem(\"AccessToken\", data.Token.AccessToken)\n        localStorage.setItem(\"RefreshToken\", data.Token.RefreshToken)\n        localStorage.setItem(\"User\", JSON.stringify(data.User))\n\n        this.props.setAuth(\"AUTH_SUCCESS\")\n\n        this.setState({\n          redirect: true\n        })\n      }\n    }\n  }\n\n  onChangePhone(e) {\n    this.setState({\n      verifyUid: e.target.value,\n      verifyErr: null\n    })\n  }\n\n  onChangeVerifCode(e) {\n    this.setState({\n      verifyCode: e.target.value,\n      verifyCodeErr: null\n    })\n  }\n\n  sendverifyCode(e) {\n    e.preventDefault()\n\n    this.setState({\n      btnPreloader: true\n    })\n\n    const data = {\n      Uid: this.state.verifyUid,\n      VCode: this.state.verifyCode,\n      LoginType: 1,\n      UidType: this.props.verifyType === 'by-email' ? 2 : this.props.verifyType === 'by-phone' ? 0 : 0,\n      RequestId: socket.makeId(),\n      RequestType: 33,\n      Type: 0\n    }\n\n    socket.send(data)\n  }\n\n  sendVerificationQuery(e) {\n    e.preventDefault()\n\n    this.setState({\n      btnPreloader: true\n    })\n\n    const data = {\n      VerificationType: this.props.verifyType === 'by-email' ? 1 : this.props.verifyType === 'by-phone' ? 0 : 0,\n      Uid: this.state.verifyUid,\n      RequestId: socket.makeId(),\n      RequestType: 42,\n      Type: 0\n    }\n\n    socket.send(data)\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return <Redirect to=\"/\" />\n    } else {\n      return (\n        <Row\n          type=\"flex\"\n          align=\"middle\"\n          justify=\"center\"\n          style={{ height: \"100vh\" }}\n        >\n          <Col>\n            <div className=\"auth__type\">\n              <div className=\"modal_back\" onClick={() => this.props.setPrevPath()}><Icon type=\"arrow-left\" /></div>\n              <h1>Вход</h1>\n              {!this.state.verifyRequestSended ? (\n                <div>\n                  <h2>\n                    {this.props.verifyType === 'by-email' ? 'Введите ваш email' : this.props.verifyType === 'by-phone' ? 'Введите номер телефона' : ''}\n                  </h2>\n                  <Form\n                    onSubmit={this.sendVerificationQuery.bind(this)}\n                    className=\"login-form\"\n                  >\n                    <Form.Item\n                      validateStatus={this.state.verifyErr ? \"error\" : \"\"}\n                      help={this.state.verifyErr ? this.state.verifyErr : \"\"}\n                    >\n                      <Input\n                        autoFocus\n                        inputMode={this.props.verifyType === 'by-email' ? 'email' : this.props.verifyType === 'by-phone' ? 'tel' : ''}\n                        placeholder={this.props.verifyType === 'by-email' ? 'Ваш email' : this.props.verifyType === 'by-phone' ? 'Ваш номер телефона' : ''}\n                        onChange={this.onChangePhone.bind(this)}\n                      />\n                    </Form.Item>\n                    <Form.Item>\n                      <Row>\n                        <Col style={{ textAlign: \"center\" }}>\n                          <Button\n                            type=\"primary\"\n                            htmlType=\"submit\"\n                            disabled={!this.state.verifyUid}\n                            loading={!!this.state.btnPreloader}\n                          >\n                            Получить {this.props.verifyType === 'by-email' ? 'письмо' : this.props.verifyType === 'by-phone' ? 'SMS' : ''} с кодом\n                          </Button>\n                        </Col>\n                      </Row>\n                    </Form.Item>\n                  </Form>\n                </div>\n              ) : (\n                <div>\n                  <h2>Код подтверждения из {this.props.verifyType === 'by-email' ? 'письма' : this.props.verifyType === 'by-phone' ? 'SMS' : ''}</h2>\n                  <p>\n                    Мы отправили {this.props.verifyType === 'by-email' ? 'письмо' : this.props.verifyType === 'by-phone' ? 'SMS' : ''} \n                    на {this.props.verifyType === 'by-email' ? 'email' : this.props.verifyType === 'by-phone' ? 'номер' : ''} {this.state.verifyUid}. Введите\n                    полученый код в поле ниже\n                  </p>\n                  <Form\n                    onSubmit={this.sendverifyCode.bind(this)}\n                    className=\"login-form\"\n                  >\n                    <Form.Item\n                      validateStatus={this.state.verifyCodeErr ? \"error\" : \"\"}\n                      help={this.state.verifyCodeErr ? this.state.verifyCodeErr : \"\"}\n                    >\n                      <Input\n                        autoFocus\n                        inputMode='tel'\n                        placeholder={`Код из ${this.props.verifyType === 'by-email' ? 'письма' : this.props.verifyType === 'by-phone' ? 'SMS' : ''}, 4 цифры`}\n                        onChange={this.onChangeVerifCode.bind(this)}\n                      />\n                    </Form.Item>\n                    <Form.Item>\n                      <Row>\n                        <Col style={{ textAlign: \"center\" }}>\n                          <Button\n                            type=\"primary\"\n                            htmlType=\"submit\"\n                            disabled={!this.state.verifyCode}\n                            loading={!!this.state.btnPreloader}\n                          >\n                            Войти\n                          </Button>\n                        </Col>\n                      </Row>\n                    </Form.Item>\n                  </Form>\n                </div>\n              )}\n            </div>\n          </Col>\n        </Row>\n      )\n    }\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    verifyType: state.path.currentPath\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setAuth: auth => dispatch(setAuth(auth)),\n    setPrevPath: () => dispatch(setPrevPath())\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Verify)\n","import { getFormatedMessages } from \"./Message\"\nimport {\n  getFormatedDialogs,\n  getFormatedChats,\n  getActiveDialog\n} from \"./Dialog\"\nimport {\n  getFormatedUser,\n  getFormatedChatsUsers,\n  getUserById,\n  getUserInitials\n} from \"./User\"\n\nexport default {\n  getFormatedMessages,\n  getFormatedDialogs,\n  getFormatedChats,\n  getFormatedChatsUsers,\n  getFormatedUser,\n  getUserById,\n  getUserInitials,\n  getActiveDialog\n}\n","// eslint-disable-next-line\nexport function getFormatedMessages(messages) {\n  const mess = []\n  messages.forEach(message => {\n    const tempMess = {\n      Attachments: message.Attachments,\n      ConversationId: message.ConversationId,\n      ConversationType: message.ConversationType,\n      GlobalId: message.GlobalId,\n      Read: message.Read,\n      SenderId: message.SenderId,\n      SendingTime: message.SendingTime,\n      Text: message.Text\n    }\n    mess.push(tempMess)\n  })\n\n  return mess\n}\n","// eslint-disable-next-line\nexport function getFormatedDialogs(data) {\n  const dialogs = []\n  data.forEach(dialog => {\n    const tempDialogs = {\n      AttachmentType: dialog.AttachmentType,\n      ConversationId: dialog.ConversationId,\n      ConversationType: dialog.ConversationType,\n      IsMuted: dialog.IsMuted,\n      LastMessageId: dialog.LastMessageId,\n      LastMessageSenderId: dialog.LastMessageSenderId,\n      LastMessageSenderName: dialog.LastMessageSenderName,\n      LastMessageTime: dialog.LastMessageTime,\n      Photo: dialog.Photo,\n      PreviewText: dialog.PreviewText,\n      Read: dialog.Read,\n      SecondUid: dialog.SecondUid,\n      Title: dialog.Title,\n      UnreadedCount: dialog.UnreadedCount\n    }\n    dialogs.push(tempDialogs)\n  })\n\n  return dialogs\n}\n\nexport function getFormatedChats(data) {\n  const chats = []\n  data.forEach(chat => {\n    const tempChat = {\n      About: chat.About,\n      Id: chat.Id,\n      Key: chat.Key,\n      Name: chat.Name,\n      NodesId: chat.NodesId,\n      Photo: chat.Photo,\n      Public: chat.Public,\n      Security: chat.Security,\n      Tag: chat.Tag,\n      Type: chat.Type,\n      Users: chat.Users,\n      Visible: chat.Visible\n    }\n    chats.push(tempChat)\n  })\n\n  return chats\n}\n\nexport function getActiveDialog(dialogs) {\n  const dialog = dialogs.find(dialog => dialog.active)\n\n  return dialog\n}\n","// eslint-disable-next-line\nexport function getFormatedUser(data) {\n  const users = []\n  data.forEach(user => {\n    const tempUser = {\n      About: user.About,\n      Birthday: user.Birthday,\n      BlackList: user.BlackList,\n      City: user.City,\n      Confirmed: user.Confirmed,\n      Contact: user.Contact,\n      ContactsPrivacy: user.ContactsPrivacy,\n      Country: user.Country,\n      Emails: user.Emails,\n      Encryption: user.Encryption,\n      Groups: user.Groups,\n      Id: user.Id,\n      Keys: user.Keys,\n      Language: user.Language,\n      NameFirst: user.NameFirst,\n      NameSecond: user.NameSecond,\n      NodeId: user.NodeId,\n      Online: user.Online,\n      Phones: user.Phones,\n      Photo: user.Photo,\n      RegistrationDate: user.RegistrationDate,\n      Security: user.Security,\n      Tag: user.Tag,\n      Visible: user.Visible\n    }\n    users.push(tempUser)\n  })\n\n  return users\n}\n\nexport function getFormatedChatsUsers(data) {\n  const users = []\n  data.forEach(user => {\n    const tempUser = {\n      Banned: user.Banned,\n      ChatId: user.ChatId,\n      Deleted: user.Deleted,\n      InviterId: user.InviterId,\n      IsMuted: user.IsMuted,\n      Joined: user.Joined,\n      UserId: user.UserId,\n      UserInfo: user.UserInfo,\n      UserRole: user.UserRole\n    }\n    users.push(tempUser)\n  })\n\n  return users\n}\n\nexport function getUserById(id, users) {\n  const foundUser = users.find(user => user.Id === id)\n  return foundUser\n}\n\nexport function getUserInitials(dialog) {\n  if (!dialog.Photo) {\n    let initials = \"\"\n\n    if (dialog.Title || dialog.ChannelName) {\n      let defaultAva = dialog.Title || dialog.ChannelName\n      defaultAva = defaultAva.split(\" \", 2)\n\n      if (defaultAva[0]) {\n        initials = defaultAva[0][0]\n      }\n      if (defaultAva[1]) {\n        initials += defaultAva[1][0]\n      }\n    } else if (dialog.NameFirst) {\n      initials = dialog.NameFirst[0]\n      if (dialog.NameSecond) {\n        initials = initials + dialog.NameSecond[0]\n      }\n    } else {\n      const secondUid = dialog.SecondUid + ''\n      initials = secondUid.substr(0, 2)\n    }\n\n    return initials\n  }\n}\n","/* eslint-disable */\nimport React, { Component } from \"react\"\nimport { NavLink } from \"react-router-dom\"\nimport { connect } from \"react-redux\"\nimport { openDialog } from \"../actions/dialogs\"\nimport selectors from \"../selectors\"\n\nclass SidebarItem extends Component {\n  constructor() {\n    super()\n    this.state = {\n      defaultAva: \"\"\n    }\n  }\n\n  componentDidMount() {\n    // обрезаем строку с последним сообщением (не css потому что 2 строки)\n    const size = 60\n    const newsContent = this.refs.messageText\n    const newsText = newsContent.innerText\n\n    if (newsText.length > size) {\n      newsContent.innerText = newsText.slice(0, size) + \" ...\"\n    }\n\n    // добавляем инициалы в стэйт если нет аватарки\n    if (!this.props.dialog.Photo) {\n      this.setState({\n        defaultAva: selectors.getUserInitials(this.props.dialog)\n      })\n    }\n  }\n\n  openDialog() {\n    const payload = {}\n    payload.type = this.props.type\n    payload.data = this.props.dialog\n    this.props.openDialog(payload)\n  }\n\n  render() {\n    const avatarStyle = {\n      width: \"100%\",\n      height: \"100%\",\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center center\",\n      backgroundImage: `url(https://${this.props.node}:5000/api/Files/${this.props.dialog.Photo})`,\n      backgroundRepeat: \"no-repeat\"\n    }\n\n    // const defaultAvaBg = {\n    //   background: `hsl(${this.props.dialog.SecondUid}, 90%, 90%)`\n    // }\n\n    return (\n      <NavLink to={\"/\"} onClick={() => this.openDialog()}>\n        <div className=\"sidebar__item\">\n          <div className=\"sidebar__ava\">\n            {this.props.dialog.UnreadedCount > 0 ? (\n              <div className=\"sidebar__badge\">\n                {this.props.dialog.UnreadedCount}\n              </div>\n            ) : null}\n            <div className=\"sidebar__photo\">\n              {\n                this.props.dialog.Photo ?\n                  this.props.dialog.Photo.length > 0 ? \n                    <div style={avatarStyle} />\n                  : null\n                : \n                  <div className=\"sidebar__photo-default avatar-default\">\n                    {this.state.defaultAva}\n                  </div>\n              }\n            </div>\n          </div>\n          <div>\n            <div className=\"sidebar__name\">\n              <span>{this.props.dialog.Title || this.props.dialog.NameFirst + this.props.dialog.NameSecond || this.props.dialog.ChannelName || this.props.dialog.Name || 'Имя скрыто'}</span>\n            </div>\n            <div className=\"sidebar__message\" ref=\"messageText\">\n              {\n                this.props.dialog.PreviewText ? this.props.dialog.PreviewText :\n                this.props.dialog.AttachmentType ===  1 ? 'Файл' :\n                this.props.dialog.AttachmentType ===  2 ? 'Изображение' :\n                this.props.dialog.About ? this.props.dialog.About : null\n              }\n            </div>\n          </div>\n        </div>\n      </NavLink>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    node: state.node.activeNode.Domains[0]\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    openDialog: dialogId => dispatch(openDialog(dialogId))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SidebarItem)\n","/* eslint-disable */\nimport React from \"react\"\nimport { connect } from \"react-redux\"\nimport logo from \"../assets/logo.PNG\"\nimport { toggleDrawer } from \"../actions/ui\"\nimport { Icon } from 'antd';\n\nfunction HeadSidebar(props) {\n  return (\n    <div className=\"head-sidebar\">\n      <Icon type=\"menu\" className='menu-btn' onClick={() => props.toggleDrawer()} />\n      <div className=\"head-sidebar__logo\">\n        <img src={logo} alt=\"Y Messenger\" />\n      </div>\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {}\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    toggleDrawer: () => dispatch(toggleDrawer())\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HeadSidebar)","import React, { useState } from \"react\"\nimport { connect } from \"react-redux\"\nimport { Input } from \"antd\"\nimport { searchStart, searchEnd } from \"../actions/search\"\nimport socket from \"../transport/Connect\"\n\nconst { Search } = Input\n\nfunction SearchComponent(props) {\n  const [queryText, setQueryText] = useState(\"\")\n  const searchDialogs = value => {\n    // в функцию может прилетать и текст и евент\n    if (typeof value === \"object\") {\n      setQueryText(value.target.value)\n    } else if (typeof value === \"string\") {\n      setQueryText(value)\n    }\n\n    if (queryText.length) {\n      props.searchStart(queryText.toLowerCase())\n    } else if (!queryText.length) {\n      props.searchEnd()\n    }\n\n    const searchRequest = {\n      RequestType: 46,\n      SearchQuery: queryText,\n      RequestId: socket.makeId(),\n      Direction: true,\n      Type: 0\n    }\n\n    socket.send(searchRequest)\n  }\n\n  return (\n    <div className=\"search\">\n      <Search\n        placeholder=\"Поиск\"\n        value={queryText}\n        onSearch={searchDialogs}\n        onChange={searchDialogs}\n        enterButton\n      />\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    search: state.ui.search\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    searchStart: data => dispatch(searchStart(data)),\n    searchEnd: () => dispatch(searchEnd())\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchComponent)\n","export function searchResultReceived(searchResult) {\n  return {\n    type: \"SEARCH_RESULT_RECEIVED\",\n    searchResult\n  }\n}\n\nexport function searchStart(text) {\n  return {\n    type: \"SEARCH_START\",\n    text\n  }\n}\n\nexport function searchEnd() {\n  return {\n    type: \"SEARCH_END\"\n  }\n}\n","/* eslint-disable */\nimport React, { useState, useEffect } from \"react\"\nimport { connect } from \"react-redux\"\nimport SidebarItem from \"./SidebarItem\"\nimport HeadSidebar from \"./HeadSidebar\"\nimport Search from \"./Search\"\nimport { openDialog } from \"../actions/dialogs\"\nimport socket from \"../transport/Connect\"\n\nfunction Sidebar(props) {\n  const [localFoundDialogs, setLocalFoundDialogs] = useState([])\n\n  useEffect(() => {\n    if (props.search) {\n      const searchDialogs = props.dialogs.filter(dialog => {\n        if (!dialog.fake) {\n          if (dialog.Title) {\n            return dialog.Title.toLowerCase().indexOf(props.search) >= 0\n          }\n        }\n      })\n      setLocalFoundDialogs(searchDialogs)\n    } else {\n      setLocalFoundDialogs(props.dialogs)\n    }\n  }, [props.search, props.dialogs])\n\n  const showSidebarItem = () => {\n    return localFoundDialogs.map(dialog => {\n      if(dialog && !dialog.fake){\n        return <SidebarItem dialog={dialog} key={socket.makeId()} type='dialog' />\n      }\n    })\n  }\n\n  const showSearchResultChannels = () => {\n    if (props.searchResult.channels) {\n      return props.searchResult.channels.map((dialog, i) => {\n        if(dialog){\n          if (i === 0) {\n            return (\n              <div key={socket.makeId()}>\n                <div className=\"sidebar__title\">Каналы:</div>\n                <SidebarItem dialog={dialog} type=\"channel\" />\n              </div>\n            )\n          } else {\n            return (\n              <SidebarItem dialog={dialog} type=\"channel\" key={socket.makeId()} />\n            )\n          }\n        }\n      })\n    }\n  }\n\n  const showSearchResultChats = () => {\n    if (props.searchResult.chats) {\n      return props.searchResult.chats.map((dialog, i) => {\n        if(dialog){\n          if (i === 0) {\n            return (\n              <div key={socket.makeId()}>\n                <div className=\"sidebar__title\">Чаты:</div>\n                <SidebarItem dialog={dialog} type=\"chat\" />\n              </div>\n            )\n          } else {\n            return (\n              <SidebarItem dialog={dialog} type=\"chat\" key={socket.makeId()} />\n            )\n          }\n        }\n      })\n    }\n  }\n\n  const showSearchResultUsers = () => {\n    if (props.searchResult.users) {\n      return props.searchResult.users.map((dialog, i) => {\n        if(dialog){\n          if (i === 0) {\n            return (\n              <div key={socket.makeId()}>\n                <div className=\"sidebar__title\">Пользователи:</div>\n                <SidebarItem dialog={dialog} type=\"user\" />\n              </div>\n            )\n          } else {\n            return (\n              <SidebarItem dialog={dialog} type=\"user\" key={socket.makeId()} />\n            )\n          }\n        }\n      })\n    }\n  }\n\n  return (\n    <div className=\"sidebar\">\n      <HeadSidebar />\n      <Search />\n      <div className=\"sidebar-viewport\">\n        {showSidebarItem()}\n        {props.searchResult ? showSearchResultUsers() : null}\n        {props.searchResult ? showSearchResultChats() : null}\n        {props.searchResult ? showSearchResultChannels() : null}\n      </div>\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    dialogs: state.dialogs,\n    search: state.ui.search,\n    searchResult: state.searchResult\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    openDialog: dialogId => dispatch(openDialog(dialogId))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Sidebar)\n","/* eslint-disable */\nimport React, { useState, useEffect } from \"react\"\nimport { connect } from \"react-redux\"\nimport ReactTimeAgo from \"react-time-ago\"\nimport JavascriptTimeAgo from \"javascript-time-ago\"\nimport ru from \"javascript-time-ago/locale/ru\"\nimport { Icon } from \"antd\"\nimport socket from \"../transport/Connect\"\nimport { openProfile } from \"../actions/ui\"\nimport { closeDialog } from \"../actions/dialogs\"\nimport selectors from \"../selectors\"\n\nJavascriptTimeAgo.locale(ru)\n\nfunction HeadDialog(props) {\n  const [dialog, setDialog] = useState(null)\n  const [defaultAva, setDefaultAva] = useState(\"\")\n  const [user, setUser] = useState(null)\n  const [windowWidth, setWindowWidth] = useState(document.body.clientWidth)\n\n  useEffect(() => {}, [windowWidth])\n\n  window.onresize = () => {\n    setWindowWidth(document.body.clientWidth)\n  }\n\n  useEffect(() => {\n    if (props.users && dialog) {\n      const user = props.users.find(user => user.Id === dialog.SecondUid)\n      setUser(user)\n    }\n  }, [props.users, dialog])\n\n  useEffect(() => {\n    props.dialogs.forEach(dialog => {\n      if (dialog.active) {\n        setDialog(dialog)\n      }\n    })\n  }, [props.dialogs])\n\n  useEffect(() => {\n    if (dialog) {\n      // добавляем инициалы в стэйт если нет аватарки\n      if (!dialog.Photo) {\n        setDefaultAva(selectors.getUserInitials(dialog))\n      }\n    }\n  }, [dialog])\n\n  const logout = () => {\n    const logout = {\n      Full: false,\n      AccessToken: localStorage.getItem(\"AccessToken\"),\n      RequestType: 34,\n      RequestId: socket.makeId(),\n      Type: 0\n    }\n\n    socket.send(logout)\n\n    localStorage.removeItem(\"AccessToken\")\n    localStorage.removeItem(\"FileAccessToken\")\n    localStorage.removeItem(\"RefreshToken\")\n    localStorage.removeItem(\"User\")\n\n    window.location.replace(\"/\")\n  }\n\n  const handleOpenProfile = () => {\n    props.openProfile(dialog)\n  }\n\n  return (\n    <div className=\"head-dialog\">\n      {windowWidth <= 675 && selectors.getActiveDialog(props.dialogs) ? (\n        <div className=\"head-dialog__back\" onClick={props.closeDialog} >\n          <Icon type=\"left\" />\n        </div>\n      ) : null}\n      <div className=\"head-dialog__user\" onClick={handleOpenProfile}>\n        <div className=\"head-dialog__ava\">\n          {dialog ? (\n            dialog.Photo ? (\n              <div\n                style={{\n                  width: \"100%\",\n                  height: \"100%\",\n                  backgroundSize: \"cover\",\n                  backgroundPosition: \"center center\",\n                  backgroundImage: `url(https://${props.node}:5000/api/Files/${dialog.Photo})`,\n                  backgroundRepeat: \"no-repeat\"\n                }}\n              />\n            ) : (\n              <div className=\"head-dialog__photo-default avatar-default\">{defaultAva}</div>\n            )\n          ) : null}\n        </div>\n        <div>\n          <div className=\"head-dialog__name\">{dialog ? dialog.Title || dialog.ChannelName || 'Имя скрыто' : null}</div>\n          <div className=\"head-dialog__status\">\n            {user ?\n              user.Online ? \n                <ReactTimeAgo date={user.Online * 1000} locale=\"ru\" />\n              : null\n            : null}\n          </div>\n        </div>\n      </div>\n      <div onClick={logout} className=\"head-dialog__logout\">\n        Выход\n      </div>\n      {/* <div className='head__lock'>\n        <LockIcon />\n      </div> */}\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    dialogs: state.dialogs,\n    users: state.users,\n    node: state.node.activeNode.Domains[0]\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    openProfile: data => dispatch(openProfile(data)),\n    closeDialog: () => dispatch(closeDialog())\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HeadDialog)\n","/* eslint-disable */\nimport React from \"react\"\nimport { connect } from \"react-redux\"\nimport selectors from \"../selectors\"\n\nfunction Avatar(props) {\n  const avatarStyle = {\n    width: \"100%\",\n    height: \"100%\",\n    backgroundSize: \"cover\",\n    backgroundPosition: \"center center\",\n    backgroundImage: `url(https://${props.node}:5000/api/Files/${props.user.Photo})`,\n    backgroundRepeat: \"no-repeat\",\n    borderRadius: \"100%\"\n  }\n\n  return (\n    <div className=\"avatar\">\n      {\n        props.user.Photo ? \n          <div style={avatarStyle}></div>\n        :\n          <div className=\"avatar-default\">\n            {selectors.getUserInitials(props.user)}\n          </div>\n      }\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    node: state.node.activeNode.Domains[0]\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {}\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Avatar)\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", {\n  id: \"check\"\n}, React.createElement(\"polygon\", {\n  points: \"142.8,323.85 35.7,216.75 0,252.45 142.8,395.25 448.8,89.25 413.1,53.55  \"\n})));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref16 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref17 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar SvgTickIcon = function SvgTickIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"448.8px\",\n    height: \"448.8px\",\n    viewBox: \"0 0 448.8 448.8\",\n    style: {\n      enableBackground: \"new 0 0 448.8 448.8\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgTickIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/tick_icon.06277842.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", {\n  id: \"done-all\"\n}, React.createElement(\"path\", {\n  d: \"M448.8,161.925l-35.7-35.7l-160.65,160.65l35.7,35.7L448.8,161.925z M555.899,126.225l-267.75,270.3l-107.1-107.1 l-35.7,35.7l142.8,142.8l306-306L555.899,126.225z M0,325.125l142.8,142.8l35.7-35.7l-142.8-142.8L0,325.125z\"\n})));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref16 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref17 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar SvgDoubleTickIcon = function SvgDoubleTickIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"594.149px\",\n    height: \"594.149px\",\n    viewBox: \"0 0 594.149 594.149\",\n    style: {\n      enableBackground: \"new 0 0 594.149 594.149\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgDoubleTickIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/double_tick_icon.7319bcfe.svg\";\nexport { ForwardRef as ReactComponent };","/* eslint-disable */\nimport React, { useState, useEffect } from \"react\"\nimport { Modal, Icon } from \"antd\"\nimport { connect } from \"react-redux\"\nimport { NavLink, Redirect } from \"react-router-dom\"\nimport selectors from \"../selectors\"\nimport { forwardingMessage, openDialog } from \"../actions/dialogs\"\nimport Avatar from \"./Avatar\"\nimport { ReactComponent as TickIcon } from \"../assets/tick_icon.svg\"\nimport { ReactComponent as DoubleTickIcon } from \"../assets/double_tick_icon.svg\"\n\nfunction Message(props) {\n  const [visible, setVisible] = useState(false)\n  const [messageTime, setMessageTime] = useState(\"\")\n  const [isContextMenuVisible, setSsContextMenuVisible] = useState(false)\n  const [redirect, setRedirect] = useState(false)\n  const user = selectors.getUserById(props.message.SenderId, props.users) || {}\n\n  useEffect(() => {\n    if (props.message) {\n      // формируем время сообщения\n      const timestamp = new Date(props.message.SendingTime * 1000)\n      const date = new Date()\n      date.setTime(timestamp)\n\n      let hour = `${date.getHours()}`\n      let minutes = `${date.getMinutes()}`\n\n      if (hour.length === 1) {\n        hour = `0${hour}`\n      }\n      if (minutes.length === 1) {\n        minutes = `0${minutes}`\n      }\n\n      setMessageTime(`${hour}:${minutes}`)\n    }\n  }, [props.message])\n\n  const setLinks = text => {\n    let str = text\n    let reg = false\n    if (str) {\n      reg = str.match(/(http|https|ftp|ftps)\\:\\/\\/[a-zA-Z0-9\\-\\.]+\\.[a-zA-Z]{2,3}(\\/\\S*)?/g)\n    }\n    let k = 0\n    // console.log(reg);\n\t\tfor (k in reg){\n      // console.log(reg[k]);\n\t\t\tstr = str.replace(reg[k], ' <a href=\"' + reg[k] + '\" target=\"_blank\"> ' + reg[k] + ' </a> ')\n    }\n\n    return str\n    \n    // let mes_block = this.refs.textMessage;\n    // if (mes_block) {\n    //   mes_block.innerHTML = str\n    // }\n  }\n\n  function getForwardingUser(userId) {\n    const forwardingUser = props.users.find(user => user.Id === userId)\n    if (forwardingUser) {\n      return ` ${forwardingUser.NameFirst} ${forwardingUser.NameSecond}`\n    }\n  }\n\n  function showMessage(message) {\n    if (message.Attachments) {\n      if (message.Attachments.length) {\n        // СООБЩЕНИЯ С ВЛОЖЕНИЯМИ\n        // сообщения с изображением\n        if (message.Attachments[0].Type === 2) {\n          return (\n            <div className=\"message__img\" onClick={() => setVisible(true)}>\n              <img\n                src={`https://${props.node}:5000/api/Files/` + message.Attachments[0].Payload.FileId}\n                alt=\"\"\n              />\n            </div>\n          )\n        } else if (message.Attachments[0].Type === 1) {\n          // сообщение с файлом\n          if (message.Attachments[0].Payload) {\n            return (\n              <div>\n                <Icon type=\"download\" className=\"download-icon\" />\n                <a href={`https://${props.node}:5000/api/Files/` + message.Attachments[0].Payload.FileId} download>\n                  {message.Attachments[0].Payload.Filename}\n                </a>\n                <span dangerouslySetInnerHTML={{__html: setLinks(message.Text)}}></span>\n              </div>\n            )\n          }\n        } else if (message.Attachments[0].Type === 5) {\n          // Пересланное сообщение\n          if (message.Attachments[0].Payload.length > 0) {\n            return (\n              <div className=\"forwarding_message\">\n                Пересланное сообщение от\n                <NavLink to=\"/\" onClick={() => openDialog()}>\n                  {getForwardingUser(message.Attachments[0].Payload[0].SenderId)}\n                </NavLink>\n                <div dangerouslySetInnerHTML={{__html: setLinks(message.Attachments[0].Payload[0].Text)}} className=\"forward-message-text\"></div>\n                {\n                  message.Text ?\n                    <div dangerouslySetInnerHTML={{__html: setLinks(message.Text)}}></div>\n                  : null\n                }\n              </div>\n            )\n          } else {\n            return (\n              <div className=\"forwarding_message\">\n                Пересланное сообщение от:\n                <div>Пересланное сообщение удалено</div>\n              </div>\n            )\n          }\n        } else {\n          // обычное сообщение с текстом\n          return <div style={{fontStyle: \"italic\"}}>*неподдерживаемый тип сообщения*</div>\n        }\n      } else {\n        // обычное сообщение с текстом\n        return message.Text ? (\n          <div dangerouslySetInnerHTML={{__html: setLinks(message.Text)}}></div>\n        ) : null\n      }\n    } else {\n      // обычное сообщение с текстом\n      return message.Text ? (\n        <div>{message.Text}</div>\n      ) : null\n    }\n  }\n\n  function showMessageMenu() {\n    setSsContextMenuVisible(!isContextMenuVisible)\n  }\n\n  const handleReplyToMessage = () => {\n    props.forwardingMessage(props.message)\n  }\n\n  const handleForwardMessage = () => {\n    props.forwardingMessage(props.message)\n    setRedirect(true)\n  }\n\n  const openDialog = () => {\n    const conversation = props.dialogs.find(dialog => dialog.ConversationId === props.message.Attachments[0].Payload[0].ConversationId && dialog.ConversationType === props.message.Attachments[0].Payload[0].ConversationType)\n    if (conversation) {\n      const payload = {}\n      payload.type = \"dialog\"\n      payload.data = conversation\n      props.openDialog(payload)\n    }\n  }\n\n  if (redirect) {\n    return <Redirect to=\"/\" />\n  }\n  if (user && props.message) {\n    return (\n      <div\n        className={\n          user.currentUser\n            ? \"message message-out\"\n            : \"message message-in\"\n        }\n        onClick={showMessageMenu}\n        style={props.message && isContextMenuVisible ? { background: \"#ebf5ff\" } : null }\n      >\n        <div className=\"wrap-message-content\">\n          {!user.currentUser && props.message.ConversationType !== 3 ? <Avatar user={user} /> : null}\n          {\n            user.currentUser && props.message.Read ?\n              <DoubleTickIcon className='message__read' />\n            : user.currentUser && !props.message.Read ? \n              <TickIcon className='message__read' />\n            : null\n          }\n          <div className=\"message__content\">\n            {\n              !user.currentUser ?\n                <div className=\"message__name\">\n                  {user.NameFirst ? user.NameFirst + ' ' : null}\n                  {user.NameSecond ? user.NameSecond : null}\n                </div>\n              : null\n            }          \n            {showMessage(props.message)}\n          </div>\n          <div className=\"message__time\">{messageTime}</div>\n        </div>\n        {props.message.Attachments && props.message.Attachments[0] ? (\n          <Modal\n            visible={visible}\n            onCancel={() => setVisible(false)}\n            footer={null}\n            maskClosable\n          >\n            <img\n              className=\"popup__img\"\n              src={`https://${props.node}:5000/api/Files/${props.message.Attachments[0].Payload.FileId}`}\n              alt=\"\"\n            />\n          </Modal>\n        ) : null}\n        {props.message && isContextMenuVisible ? (\n          <div className=\"message-menu\">\n            <ul>\n              <li onClick={handleReplyToMessage}>Ответить</li>\n              <li onClick={handleForwardMessage}>Переслать</li>\n            </ul>\n          </div>\n        ) : null}\n      </div>\n    )\n  } else {\n    return null\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    users: state.users,\n    dialogs: state.dialogs,\n    forwardMessage: state.forwardMessage,\n    node: state.node.activeNode.Domains[0]\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    forwardingMessage: message => dispatch(forwardingMessage(message)),\n    openDialog: dialogId => dispatch(openDialog(dialogId))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Message)\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(-198)\",\n  id: \"g69\"\n}, React.createElement(\"g\", {\n  id: \"_x33__22_\"\n}, React.createElement(\"g\", {\n  id: \"g66\"\n}, React.createElement(\"path\", {\n  id: \"path64\",\n  d: \"m 544.5,99 v 495 c 0,82.021 -66.479,148.5 -148.5,148.5 -82.021,0 -148.5,-66.479 -148.5,-148.5 V 148.5 c 0,-54.673 44.327,-99 99,-99 54.673,0 99,44.327 99,99 V 594 c 0,27.349 -22.176,49.5 -49.5,49.5 -27.349,0 -49.5,-22.151 -49.5,-49.5 V 198 H 297 v 396 c 0,54.673 44.327,99 99,99 54.673,0 99,-44.327 99,-99 V 148.5 C 495,66.479 428.521,0 346.5,0 264.479,0 198,66.479 198,148.5 V 618.75 C 210.202,716.389 295.045,792 396,792 496.955,792 581.798,716.389 594,618.75 V 99 Z\"\n}))));\n\nvar SvgPaperclipIcon = function SvgPaperclipIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    xmlSpace: \"preserve\",\n    viewBox: \"0 0 396 792\",\n    height: 0,\n    width: 0,\n    y: \"0px\",\n    x: \"0px\",\n    id: \"Capa_1\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgPaperclipIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/paperclip_icon.b4a5561e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g95\"\n}, React.createElement(\"g\", {\n  id: \"send\"\n}, React.createElement(\"polygon\", {\n  id: \"polygon92\",\n  points: \"0,38.25 0,216.75 382.5,267.75 0,318.75 0,497.25 535.5,267.75 \"\n})));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g97\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g99\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g101\"\n});\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g103\"\n});\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g105\"\n});\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g107\"\n});\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g109\"\n});\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g111\"\n});\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g113\"\n});\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g115\"\n});\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g117\"\n});\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g119\"\n});\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g121\"\n});\n\nvar _ref16 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g123\"\n});\n\nvar _ref17 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g125\"\n});\n\nvar SvgSendButtonIcon = function SvgSendButtonIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    xmlSpace: \"preserve\",\n    viewBox: \"0 0 535.5 459\",\n    height: 0,\n    width: 0,\n    y: \"0px\",\n    x: \"0px\",\n    id: \"Capa_1\",\n    ref: svgRef\n  }, props), _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgSendButtonIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/send_button_icon.56dc055f.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, useEffect } from \"react\"\nimport { connect } from \"react-redux\"\nimport { ReactComponent as Paperclip } from \"../assets/paperclip_icon.svg\"\nimport { ReactComponent as SendBtn } from \"../assets/send_button_icon.svg\"\nimport { forwardingMessage } from \"../actions/dialogs\"\nimport socket from \"../transport/Connect\"\nimport { Upload, Icon } from \"antd\"\nimport axios from 'axios'\n\nfunction NewMessageField(props) {\n  const [messageText, setMessageText] = useState(\"\")\n  const [imgLoading, setImgLoading] = useState(false)\n  const [imageUrl, setImageUrl] = useState(null)\n  const [attachmentsType, setAttachmentsType] = useState(null)\n\n  useEffect(() => {\n    if (imageUrl) {\n      sendMessage()\n    }\n  }, [imageUrl])\n\n  const sendMessage = () => {\n    if (props.forwardMessage) {\n      // отправка пересылаемого сообщения или ответ на сообщение\n      const data = {\n        Messages: [\n          {\n            Id: 0,\n            SendingTime: \"\",\n            SenderId: props.user.Id,\n            ReceiverId: props.dialog.SecondUid,\n            ConversationId: props.dialog.ConversationId,\n            ConversationType: props.dialog.ConversationType,\n            Read: false,\n            NodesId: null,\n            ReplyTo: null,\n            Text: messageText,\n            Attachments: [\n              {\n                Type: 5,\n                Payload: {\n                  MessagesGlobalId: [props.forwardMessage.GlobalId],\n                  ConversationId: props.forwardMessage.ConversationId,\n                  ConversationType: props.forwardMessage.ConversationType\n                }\n              }\n            ]\n          }\n        ],\n        RequestType: 39,\n        RequestId: socket.makeId(),\n        Type: 0\n      }\n\n      socket.send(data)\n    } else if (imageUrl) {\n      const data = {\n        Messages: [\n          {\n            Id: 0,\n            SendingTime: \"\",\n            SenderId: props.user.Id,\n            ReceiverId: props.dialog.SecondUid,\n            ConversationId: props.dialog.ConversationId,\n            ConversationType: props.dialog.ConversationType,\n            Read: false,\n            NodesId: null,\n            ReplyTo: null,\n            Text: messageText,\n            Attachments: [\n              {\n                Type: attachmentsType,\n                Hash: null,\n                MessageId: 0,\n                Payload: imageUrl,\n                NodesId: null\n              }\n            ],\n            GlobalId: null\n          }\n        ],\n        RequestType: 39,\n        RequestId: socket.makeId(),\n        Type: 0\n      }\n\n      socket.send(data)\n    } else {\n      // отправка обычного сообщения без вложения\n      const data = {\n        Messages: [\n          {\n            Id: 0,\n            SendingTime: \"\",\n            SenderId: props.user.Id,\n            ReceiverId: props.dialog.SecondUid,\n            ConversationId: props.dialog.ConversationId,\n            ConversationType: props.dialog.ConversationType,\n            Read: false,\n            NodesId: null,\n            ReplyTo: null,\n            Text: messageText,\n            Attachments: null,\n            GlobalId: null\n          }\n        ],\n        RequestType: 39,\n        RequestId: socket.makeId(),\n        Type: 0\n      }\n\n      socket.send(data)\n    }\n\n    setMessageText(\"\")\n\n    if(props.forwardMessage){\n      props.forwardingMessage(false)\n    }\n  }\n\n  const handleOnKeyDown = event => {\n    if (event.keyCode === 13) {\n      sendMessage()\n    }\n  }\n\n  const handleUploadImage = data => {\n    const fileAccessToken = localStorage.getItem('FileAccessToken')\n    axios.defaults.headers['FileAccessToken'] = fileAccessToken\n\n    const formData = new FormData()\n    formData.append('file', data.file)\n\n    axios.post(`https://${props.node}:5000/api/Files`, formData)\n    .then(\n        (res) => {\n          if (res.status === 200) {\n            setImgLoading(false)\n            setImageUrl(res.data.File.FileId)\n          }\n        }\n    )\n    .catch(\n        (err) => {\n          console.log(err)\n        }\n    )\n  }\n\n  const beforeUpload = file => {\n    const isJpgOrPng = file.type === \"image/jpeg\" || file.type === \"image/png\"\n    if (isJpgOrPng) {\n      setAttachmentsType(2)\n    } else {\n      setAttachmentsType(1)\n    }\n    return isJpgOrPng\n  }\n\n  const handleChange = info => {\n    if (info.file.status === \"uploading\") {\n      setImgLoading(true)\n      return\n    }\n  }\n\n  return (\n    <div className=\"new-message\">\n      <Upload\n        showUploadList={false}\n        customRequest={file => handleUploadImage(file)}\n        beforeUpload={beforeUpload}\n        onChange={handleChange}\n      >\n        {\n          imgLoading ? \n            <Icon type=\"loading\" className=\"loading-icon\" />\n          :\n            <Paperclip className=\"new-message__attach\"/>\n        }\n      </Upload>\n      <input\n        type=\"text\"\n        className=\"new-message__inp\"\n        placeholder=\"Введите сообщение\"\n        value={messageText}\n        onChange={e => {\n          setMessageText(e.target.value)\n        }}\n        onKeyDown={handleOnKeyDown}\n      />\n      <SendBtn\n        onClick={() => {\n          sendMessage()\n        }}\n        className=\"new-message__send\"\n      />\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.users.find(user => user.currentUser === true),\n    dialogs: state.dialog,\n    forwardMessage: state.forwardMessage,\n    node: state.node.activeNode.Domains[0]\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    forwardingMessage: message => dispatch(forwardingMessage(message))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewMessageField)\n","/* eslint-disable */\nimport React, { useState, useEffect, useRef } from \"react\"\nimport { connect } from \"react-redux\"\nimport { Button } from 'antd'\nimport Message from \"./Message\"\nimport NewMessageField from \"./NewMessageField\"\nimport { openDialog } from \"../actions/dialogs\"\nimport socket from \"../transport/Connect\"\nimport axios from 'axios'\nimport { ui } from \"../reducers/ui\"\n\nfunction Dialog(props) {\n  const [messages, setMessages] = useState([])\n  const [dialog, setDialog] = useState(null)\n  const mesViewport = useRef(null);\n\n  // функция для получения отправитля в сообщениях и в пересланных сообщениях\n  const getUsers = mess => {\n    const users = []\n    mess.forEach(message => {\n      if (message.Attachments) {\n        if (message.Attachments.length) {\n          if (message.Attachments[0].Type === 5) {\n            if (message.Attachments[0].Payload.length > 0) {\n              const foundUser = props.users.find(\n                user => user.Id === message.Attachments[0].Payload[0].SenderId\n              )\n\n              if (!foundUser) {\n                if(message.Attachments[0].Payload[0].SenderId){\n                  users.push(message.Attachments[0].Payload[0].SenderId)\n                }\n              }\n            }\n          }\n        }\n      }\n      const foundUser = props.users.find(user => user.Id === message.SenderId)\n\n      if (!foundUser) {\n        if(message.SenderId){\n          users.push(message.SenderId)\n        }\n      }\n    })\n    const uniqueUsers = [...new Set(users.map(n => n))]\n\n    if (uniqueUsers.length) {\n      const requestUsers = {\n        UsersId: [...uniqueUsers],\n        RequestType: 28,\n        RequestId: socket.makeId(),\n        Type: 0\n      }\n\n      socket.send(requestUsers)\n    }\n  }\n\n  useEffect(() => {\n    if(props.dialog){\n      setDialog(props.dialog)\n\n      // отмечаем сообщения прочитанными\n      if (props.appFocus) {\n        if (props.dialog.LastMessageId) {\n          const data = {\n            MessagesId: [props.dialog.LastMessageId],\n            ConversationType: props.dialog.ConversationType,\n            ConversationId: props.dialog.ConversationId,\n            RequestId: socket.makeId(),\n            RequestType: 35,\n            Type: 0\n          }\n  \n          socket.send(data)\n        }\n      }\n\n      // подгрузка сообщений по скроллу\n      // mesViewport.current.onscroll = () => {\n      //   if (mesViewport.current.scrollTop === 0) {\n      //     const messagesRequest = {\n      //       ConversationType: props.dialog.ConversationType,\n      //       ConversationId: props.match.params.id,\n      //       NavigationMessageId: \"e4b9b6d5-ec14-ea92-6723-b29d3e32ac05\",\n      //       MessagesId: null,\n      //       RequestType: 25,\n      //       RequestId: socket.makeId(),\n      //       Direction: true,\n      //       Type: 0\n      //     }\n\n      //     socket.send(messagesRequest)\n      //   }\n      // }\n    }\n  }, [props.dialog])\n\n  useEffect(() => {\n    if (dialog) {\n      const mess = props.messages.filter(message => message.ConversationId === parseInt(dialog.ConversationId || dialog.ChannelId) && message.ConversationType === dialog.ConversationType)\n      setMessages(mess)\n\n      setTimeout(() => {\n        if (mesViewport.current) {\n          mesViewport.current.scrollTop = 450000\n        }\n      }, 10)\n\n      getUsers(mess)\n    }\n  }, [dialog, props.messages])\n\n  const joinToChannel = () => {\n    const data = {\n      ChannelsId: [dialog.ChannelId],\n      UsersId: [props.user.Id],\n      RequestType: 48,\n      RequestId: socket.makeId(),\n      Type: 0\n    }\n\n    socket.send(data)\n  }\n\n  const fileOver = e => {\n    e.preventDefault()\n    mesViewport.current.classList.add('file-over')\n  }\n\n  const fileLeave = e => {\n    e.preventDefault()\n    mesViewport.current.classList.remove('file-over')\n  }\n\n  const fileDrop = (e) => {\n    e.preventDefault()\n    mesViewport.current.classList.remove('file-over')\n\n    const isJpgOrPng = e.dataTransfer.files[0].type === \"image/jpeg\" || e.dataTransfer.files[0].type === \"image/png\"\n    let attachmentType = null\n    if (isJpgOrPng) {\n      attachmentType = 2\n    } else {\n      attachmentType = 1\n    }\n\n    const fileAccessToken = localStorage.getItem('FileAccessToken')\n    axios.defaults.headers['FileAccessToken'] = fileAccessToken\n\n    const formData = new FormData()\n    formData.append('file', e.dataTransfer.files[0])\n\n    axios.post(`https://${props.node}:5000/api/Files`, formData)\n    .then(\n        (res) => {\n          if (res.status === 200) {\n            // setImgLoading(false)\n            const data = {\n              Messages: [\n                {\n                  Id: 0,\n                  SendingTime: \"\",\n                  SenderId: props.user.Id,\n                  ReceiverId: dialog.SecondUid,\n                  ConversationId: dialog.ConversationId,\n                  ConversationType: dialog.ConversationType,\n                  Read: false,\n                  NodesId: null,\n                  ReplyTo: null,\n                  Text: \"\",\n                  Attachments: [\n                    {\n                      Type: attachmentType,\n                      Hash: null,\n                      MessageId: 0,\n                      Payload: res.data.File.FileId,\n                      NodesId: null\n                    }\n                  ],\n                  GlobalId: null\n                }\n              ],\n              RequestType: 39,\n              RequestId: socket.makeId(),\n              Type: 0\n            }\n      \n            socket.send(data)\n          }\n        }\n    )\n    .catch(\n        (err) => {\n          console.log(err)\n        }\n    )\n  }\n\n  return (\n    <div className=\"dialog\">\n      <div \n        className=\"dialog__messages-viewport\"\n        ref={mesViewport}\n        onDragOver={(e) => fileOver(e)}\n        onDragLeave={() => fileLeave(e)}\n        onDrop={(e) => fileDrop(e)}\n      >\n        <div className=\"dialog__messages\">\n          {dialog\n            ? messages.map(message => {\n                return <Message key={socket.makeId()} message={message} />\n              })\n            : null}\n        </div>\n      </div>\n      {props.forwardMessage ? (\n        <div className=\"reply-message\">\n          Ответ на:\n          {` ${props.forwardMessage.Text}`}\n        </div>\n      ) : null}\n      {\n        props.dialog ? \n          props.dialog.type === \"channel\" && props.dialog.fake ? \n            <Button type=\"primary\" size='large' onClick={joinToChannel}>Вступить</Button> \n          : props.dialog.ConversationType !== 3 ?\n            <NewMessageField {...props} dialog={dialog} />\n          : null\n        : null\n      }\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    messages: state.messages,\n    forwardMessage: state.forwardMessage,\n    users: state.users,\n    user: state.users.find(user => user.currentUser === true),\n    node: state.node.activeNode.Domains[0],\n    appFocus: state.ui.appFocus\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    openDialog: dialogId => dispatch(openDialog(dialogId))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Dialog)\n","import React, { useState, useEffect } from \"react\"\nimport { connect } from \"react-redux\"\nimport socket from \"../transport/Connect\"\nimport HeadDialog from \"./HeadDialog\"\nimport Dialog from \"./Dialog\"\nimport selectors from \"../selectors\"\nimport { openDialog } from \"../actions/dialogs\"\n\nfunction DialogContainer(props) {\n  // const [messages, setMessages] = useState([]);\n  const [dialog, setDialog] = useState(null)\n\n  useEffect(() => {\n    props.dialogs.forEach(dialog => {\n      if (dialog.active) {\n        setDialog(dialog)\n      }\n    })\n  }, [props.dialogs])\n\n  useEffect(() => {\n    // if (props.messages) {\n    //    props.messages.map(message => {\n    //       if (message.ConversationId === dialogId) {\n    //          // console.log(messages);\n    //          let mess = messages;\n    //          mess.push(message);\n    //          // console.log(mess);\n    //          setMessages(messages.push(message));\n    //       }\n    //    });\n    // }\n  }, [props.messages])\n\n  useEffect(() => {\n    if (dialog) {\n      // console.log(dialog)\n      // console.log(dialog.messagesRecieved)\n\n      // если для этого диалога сообщения еще не запрашивались, то запрашиваем\n      if (!dialog.messagesRecieved) {\n        // запрос на получение сообщений\n        const data = {\n          ConversationType: dialog.type === \"channel\" ? 3 : dialog.ConversationType,\n          ConversationId: dialog.ConversationId ? dialog.ConversationId : dialog.ChannelId,\n          NavigationMessageTime: null,\n          MessageId: null,\n          RequestType: 25,\n          RequestId: socket.makeId(),\n          Type: 0\n        }\n\n        socket.send(data)\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [dialog])\n\n  return (\n    <div className=\"dialog-container\" style={selectors.getActiveDialog(props.dialogs) ? {zIndex: 2} : null}>\n      <HeadDialog {...props} />\n      {selectors.getActiveDialog(props.dialogs) ? <Dialog dialog={dialog} {...props} /> : null}\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    dialogs: state.dialogs,\n    messages: state.messages\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    openDialog: dialogId => dispatch(openDialog(dialogId))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DialogContainer)\n","/* eslint-disable */\nimport React, { useState, useEffect } from \"react\"\nimport { connect } from \"react-redux\"\nimport { NavLink } from \"react-router-dom\"\nimport { Modal } from \"antd\"\nimport { openProfile } from \"../actions/ui\"\nimport { openDialog } from \"../actions/dialogs\"\nimport socket from \"../transport/Connect\"\nimport selectors from \"../selectors\"\n\nfunction ProfileModal(props) {\n  const [visible, setVisible] = useState(false)\n  const [profile, setProfile] = useState(null)\n  const [prevProfile, setPrevProfile] = useState(null)\n\n  useEffect(() => {\n    if(props.profile) {\n      if(props.profile.ConversationType === 1){\n        const user = selectors.getUserById(props.profile.SecondUid, props.users)\n        if (user) {\n          setProfile(user)\n          setVisible(true)\n        }\n      } else if (props.profile.NameFirst) {\n        setProfile(props.profile)\n        setVisible(true)\n      } else if (props.profile.Users) {\n        setProfile(props.profile)\n        setVisible(true)\n      } else if (props.profile.ConversationType === 2){\n        const getChatInfo = {\n          RequestType: 45,\n          ChatsId: [props.profile.ConversationId],\n          RequestId: socket.makeId(),\n          Type: 0\n        }\n    \n        socket.send(getChatInfo)\n      }\n    }\n  }, [props.profile])\n\n  useEffect(() => {\n    if (props.chats.length) {\n      setProfile(props.chats[0])\n      setVisible(true)\n\n      // запрашиваем недостающих юзеров для отображения в профиле\n      const undefinedUsers = []\n      props.chats[0].Users.map(user => {\n        const foundUser = selectors.getUserById(user.UserId, props.users)\n        if(!foundUser){\n          undefinedUsers.push(user.UserId)\n        }\n      })\n      if(undefinedUsers.length){\n        const requestUsers = {\n          UsersId: [...undefinedUsers],\n          RequestType: 28,\n          RequestId: socket.makeId(),\n          Type: 0\n        }\n\n        socket.send(requestUsers)\n      }\n    }\n  }, [props.chats])\n\n  const openProfile = data => {\n    setPrevProfile(profile)\n    props.openProfile(data)\n  }\n\n  const showUsers = () => {\n    return props.chats[0].Users.map(user => {\n      const foundUser = selectors.getUserById(user.UserId, props.users)\n      if(foundUser){\n        let name = null\n        if (foundUser.NameFirst) {\n          name = foundUser.NameFirst\n        }\n        if (foundUser.NameSecond) {\n          name = name + ' ' + foundUser.NameSecond\n        }\n        return (\n          <div key={foundUser.Id} className='profile__info_user' onClick={() => {openProfile(foundUser)}}>\n            {\n              foundUser.Photo ? \n                <div\n                  style={{\n                    width: \"50px\",\n                    height: \"50px\",\n                    backgroundSize: \"cover\",\n                    backgroundPosition: \"center center\",\n                    backgroundImage: `url(https://${props.node}:5000/api/Files/${foundUser.Photo})`,\n                    backgroundRepeat: \"no-repeat\",\n                    borderRadius: 100,\n                    margin: '0 auto',\n                    marginTop: \"10px\"\n                  }}\n                ></div>\n              : \n              <div className='profile__info_ava'>{selectors.getUserInitials(foundUser)}</div> \n            }\n            {name ? name : 'Имя скрыто'}\n          </div>\n        )\n      }\n    })\n  }\n\n  const handleCancelProfile = () => {\n    setVisible(false)\n    props.openProfile(null)\n  }\n\n  const handleOpenDialog = () => {\n    let payload = {}\n    payload.data = props.profile\n    if (props.profile.type === \"dialog\") {\n      payload.type = \"dialog\"\n    } else {\n      payload.type = \"user\"\n    }\n    props.openDialog(payload)\n    handleCancelProfile()\n  }\n\n  const handleBackProfile = () => {\n    props.openProfile(prevProfile)\n    setPrevProfile(null)\n  }\n\n  return (\n    <Modal\n      visible={visible}\n      onCancel={handleCancelProfile}\n      footer={null}\n      maskClosable\n    >\n      {\n        profile ? \n          <div className='profile'>\n            {\n              prevProfile ? <div onClick={handleBackProfile}>Назад</div> : null\n            }\n            {\n              profile.Photo ? \n                <div\n                  className='profile__ava'\n                  style={{\n                    width: \"100px\",\n                    height: \"100px\",\n                    backgroundSize: \"cover\",\n                    backgroundPosition: \"center center\",\n                    backgroundImage: `url(https://${props.node}:5000/api/Files/${profile.Photo})`,\n                    backgroundRepeat: \"no-repeat\",\n                    borderRadius: 100,\n                    margin: '0 auto'\n                  }}\n                ></div>\n              : null \n            }\n            {\n              profile.Name ?\n                <div className='profile__name'>{profile.Name}</div>\n              :\n                <div className='profile__name'>\n                  {profile.NameFirst ? profile.NameFirst  : null}\n                  {' '}\n                  {profile.NameSecond ? profile.NameSecond : null}\n                </div>\n            }\n            {\n              profile.Phones ? \n                profile.Phones.length > 0 ?\n                  <div className='profile__info'>\n                    <div className='profile__info_name'>Телефон</div>\n                    <div className='profile__info_value'>{profile.Phones[0].FullNumber}</div>\n                  </div>\n                : null\n              : null\n            }\n            {\n              profile.Emails ? \n                <div className='profile__info'>\n                  <div className='profile__info_name'>Email</div>\n                  <div className='profile__info_value'><a href={`mailto:${profile.Emails[0]}`}>{profile.Emails[0]}</a></div>\n                </div>\n              : null\n            }\n            {\n              profile.About ? \n                <div className='profile__info'>\n                  <div className='profile__info_name'>О себе</div>\n                  <div className='profile__info_value'>{profile.About}</div>\n                </div>\n              : null\n            }\n            {\n              profile.Users ? \n                <div className='profile__info'>\n                  <div className='profile__info_name'>Участники</div>\n                  <div className='profile__info_users'>{showUsers()}</div>\n                </div>\n              : null\n            }\n            {\n              props.profile ? \n                <NavLink\n                  to={\"/\"}\n                  onClick={handleOpenDialog}\n                >\n                  <div className='profile__open_chat'>Открыть чат</div>\n                </NavLink>\n              : null\n            }\n          </div>\n        : null\n      }\n      \n    </Modal>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    profile: state.ui.profile,\n    users: state.users,\n    chats: state.chats,\n    node: state.node.activeNode.Domains[0]\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    openProfile: user => dispatch(openProfile(user)),\n    openDialog: dialogId => dispatch(openDialog(dialogId))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileModal)\n","/* eslint-disable */\nimport React, {useState} from \"react\"\nimport { connect } from \"react-redux\"\nimport { Modal, Form, Input, Switch, Divider, Upload, Icon, message, Button } from \"antd\"\nimport { toggleModal } from \"../actions/ui\"\nimport socket from \"../transport/Connect\"\nimport Avatar from \"../components/Avatar\"\nimport axios from 'axios'\n\nfunction CreateChatModal(props) {\n  const [chatName, setChatName] = useState(null)\n  const [nameError, setNameError] = useState(false)\n  const [chatPrivate, setChatPrivate] = useState(false)\n  const [chatChannel, setChatChannel] = useState(false)\n  const [loading, setLoading] = useState(false)\n  const [imageUrl, setImageUrl] = useState(null)\n  const [usersIDs, setUsersIds] = useState([])\n  const [showUsers, setShowUsers] = useState(false)\n\n  const handleSetChatName = value => {\n    setChatName(value)\n    setNameError(false)\n    if (value.length < 1) {\n      setNameError(true)\n    }\n  }\n\n  const handleCreateChat = () => {\n    if (!chatName) {\n      setNameError(true)\n    } else {\n      const users = usersIDs.map(userId => {\n        return {userId}\n      })\n      const newChat = {\n        Chats: [\n          {\n            Id: 0,\n            Name: chatName,\n            Tag: 0,\n            Photo: imageUrl,\n            About: null,\n            NodesId: null,\n            Visible: null,\n            Public: null,\n            Security: null,\n            Type: 1,\n            Users: users\n          }\n        ],\n        RequestId: socket.makeId(),\n        RequestType: 36,\n        Type: 0\n       }\n      \n      socket.send(newChat)\n\n      props.toggleModal(\"createChatModal\")\n    }\n  }\n\n  const handleUploadImage = data => {\n    const fileAccessToken = localStorage.getItem('FileAccessToken')\n    axios.defaults.headers['FileAccessToken'] = fileAccessToken\n\n    const formData = new FormData()\n    formData.append('file', data.file)\n  \n    axios.post(`https://${props.node}:5000/api/Files`, formData)\n    .then(\n        (res) => {\n          if (res.status === 200) {\n            setLoading(false)\n            setImageUrl(res.data.File.FileId)\n          }\n        }\n    )\n    .catch(\n        (err) => {\n          console.log(err)\n        }\n    )\n  }\n\n  const beforeUpload = file => {\n    const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png'\n    if (!isJpgOrPng) {\n      message.error('Поддерживается только загрузка JPG/PNG файлов!')\n    }\n    return isJpgOrPng\n  }\n\n  const handleChange = info => {\n    if (info.file.status === 'uploading') {\n      setLoading(true)\n      return\n    }\n  }\n\n  const addContactToChat = userId => {\n    let users = [...usersIDs]\n    if (usersIDs.includes(userId)) {\n      let foudnUserIndex = users.indexOf(userId)\n      users.splice(foudnUserIndex, 1)\n      setUsersIds(users)\n    } else {\n      users.push(userId)\n      setUsersIds(users)\n    }\n  }\n\n  const showContacts = () => {\n    return props.contacts.map(user => {\n      if(user){\n        let name = null\n        if (user.ContactUser.NameFirst) {\n          name = user.ContactUser.NameFirst\n        }\n        if (user.ContactUser.NameSecond) {\n          name = name + ' ' + user.ContactUser.NameSecond\n        }\n        return (\n          <div key={user.ContactId} className={usersIDs.includes(user.ContactUserId) ? 'contacts contacts-active' : 'contacts'} onClick={() => {addContactToChat(user.ContactUserId)}}>\n            <Avatar user={user.ContactUser} />\n            {name ? name : 'Имя скрыто'}\n          </div>\n        )\n      }\n    })\n  }\n\n  return (\n    <Modal\n      visible={props.createChatModal}\n      // visible={true}\n      onCancel={() => props.toggleModal(\"createChatModal\")}\n      title=\"Создание группового чата\"\n      className=\"create-chat-modal\"\n      footer={null}\n      maskClosable\n    >\n      <Upload\n        listType=\"picture-card\"\n        className=\"avatar-uploader\"\n        showUploadList={false}\n        customRequest={file => handleUploadImage(file)}\n        beforeUpload={beforeUpload}\n        onChange={handleChange}\n      >\n        {\n          loading ? \n          <Icon type=\"loading\" className=\"loading-icon\" />\n        : imageUrl ?\n            <img src={`https://${props.node}:5000/api/Files/${imageUrl}`} alt=\"avatar\" style={{ width: '100%' }} />\n          :\n            <>\n              <p className=\"ant-upload-drag-icon\">\n                <Icon type=\"inbox\" style={{fontSize: \"40px\", color: \"#1890ff\", marginTop: \"15px\"}} />\n              </p>\n              <p className=\"ant-upload-text\">Загрузить <br/> аватар</p>\n            </>\n        }\n      </Upload>\n      <Divider />\n      <Form.Item\n        validateStatus={nameError ? \"error\" : ''}\n        help={nameError ? \"Это поле обязательно для заполнения\" : false}\n      >\n        <Input \n          placeholder=\"Название чата\"\n          onChange={(e) => handleSetChatName(e.target.value)}\n        />\n      </Form.Item>\n      <Divider />\n      <div className='switch-label'>\n        <div>Приватный чат</div>\n        <Switch checked={chatPrivate} onChange={(value) => setChatPrivate(value)} />\n      </div>\n      <Divider />\n      <div className='switch-label'>\n        <div>Создать канал</div>\n        <Switch checked={chatChannel} onChange={(value) => setChatChannel(value)} />\n      </div>\n      <Divider />\n      <Button type=\"normal\" block icon=\"usergroup-add\" onClick={() => setShowUsers(!showUsers)}>Добавить пользователей</Button>\n      {\n        showUsers ?\n          <div className=\"wrap_contacts\">\n            {showContacts()}\n          </div>\n        : null\n      }      \n      <Divider />\n      <Button type=\"primary\" block onClick={() => handleCreateChat()}>Создать</Button>\n    </Modal>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    createChatModal: state.ui.modals.createChatModal,\n    node: state.node.activeNode.Domains[0],\n    contacts: state.contacts.users\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    toggleModal: name => dispatch(toggleModal(name))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateChatModal)\n","import Connect from \"./Connect\"\n\n/* eslint-disable */\nclass Request {\n  constructor() {}\n\n  // запрос диалогов\n  getDialogs() {\n    const getDialogs = {\n      NavigationMessageTime: null,\n      RequestId: Connect.makeId(),\n      RequestType: 12,\n      Type: 0\n    }\n\n    Connect.send(getDialogs)\n  }\n\n  // запрос списка контактов\n  getUserContacts() {\n    const getUserContacts = {\n      RequestId: Connect.makeId(),\n      RequestType: 64,\n      Type: 0\n    }\n\n    Connect.send(getUserContacts)\n  }\n\n  // запрос юзеров\n  getUsers(usersIds) {\n    const getUsers = {\n      RequestId: Connect.makeId(),\n      RequestType: 28,\n      Type: 0,\n      UsersId: usersIds\n    }\n\n    Connect.send(getUsers)\n  }\n\n  // запрос юзеров\n  getUsers(usersIds) {\n    const getUsers = {\n      RequestId: Connect.makeId(),\n      RequestType: 28,\n      Type: 0,\n      UsersId: usersIds\n    }\n\n    Connect.send(getUsers)\n  }\n\n  // запрос группы контактов\n  getUserGroups() {\n    const data = {\n      RequestId: Connect.makeId(),\n      RequestType: 61,\n      Type: 0,\n    }\n\n    Connect.send(data)\n  }\n\n  // запрос конактов из группы\n  getGroupContacts(groupId) {\n    const data = {\n      RequestId: Connect.makeId(),\n      RequestType: 60,\n      Type: 0,\n      GroupId: groupId\n    }\n\n    Connect.send(data)\n  }\n\n  // обновить информацию о пользователе\n  editUser(data) {\n    const requestdData = {\n      User: {\n        NameFirst: data.NameFirst,\n        NameSecond: data.NameSecond,\n        About: data.About,\n        Photo: data.Photo,\n        Country: null,\n        Language: null,\n        Visible: null,\n        Security: null,\n        Phones: null,\n        Emails: null\n      },\n      RequestId: Connect.makeId(),\n      RequestType: 10,\n      Type: 0\n    }\n\n    Connect.send(requestdData)\n  }\n\n  // создать чат\n  createChat(data) {\n    const requestdData = {\n      Chats: [\n        {\n          Id: 0,\n          Name: \"NEW CHAT\",\n          Tag: 0,\n          Photo: null,\n          About: \"about chat\",\n          NodesId: null,\n          Visible: null,\n          Public: null,\n          Security: null,\n          Type: 1,\n          Users: [\n            {\n              ChatId: 0,\n              UserId: 1,\n              Deleted: false,\n              Banned: false,\n              UserRole: 0,\n              UserInfo: null\n            },\n            {\n              ChatId: 0,\n              UserId: 2,\n              Deleted: false,\n              Banned: false,\n              UserRole: 0,\n              UserInfo: null\n            }\n          ]\n        }\n      ],\n      RequestId: 3387209483927527400,\n      RequestType: 36,\n      Type: 0\n    }\n\n    Connect.send(requestdData)\n  }\n}\n\nconst request = new Request()\n\nexport default request\n","import React, {useState, useEffect} from \"react\"\nimport { connect } from \"react-redux\"\nimport { Modal, Tabs } from \"antd\"\nimport { toggleModal } from \"../actions/ui\"\nimport Request from \"../transport/Request\"\nimport Avatar from \"./Avatar\"\nimport { openDialog } from \"../actions/dialogs\"\n\nfunction ContactsModal(props) {\n  // const [contacts, setContacts] = useState([])\n\n  const { TabPane } = Tabs\n\n  useEffect(() => {\n    Request.getUserContacts()\n    Request.getUserGroups()\n  }, [])\n\n  // useEffect(() => {\n  //   const contactsTmp = []\n  //   props.users.forEach(user => {\n  //     if (props.contactsIDs.find(id => user.Id === id)) {\n  //       contactsTmp.push(user)\n  //     }\n  //   })\n  //   setContacts(contactsTmp)\n  // }, [props.users, props.contactsIDs])\n\n  const handleOpenChat = user => {\n    let payload = {}\n    payload.data = user\n    payload.type = \"user\"\n    props.openDialog(payload)\n    props.toggleModal(\"close\")\n  }\n\n  const changeGroup = groupId => {\n    if (groupId === \"all\") {\n      Request.getUserContacts()\n    } else {\n      Request.getGroupContacts(groupId)\n    }\n  }\n\n  const showContacts = () => {\n    return props.contacts.map(contact => {\n      return (\n        <div className=\"contact\" key={contact.ContactId} onClick={() => handleOpenChat(contact.ContactUser)}>\n          <Avatar user={contact.ContactUser} />\n          <div className=\"name\">\n            {`${contact.ContactUser.NameFirst} ${contact.ContactUser.NameSecond}`}\n          </div>\n        </div>\n      )\n    })\n  }\n\n  const showGroups = () => {\n    return props.groups.map(group => {\n      return (\n        <TabPane tab={group.Title} key={group.GroupId}>\n          {showContacts()}\n        </TabPane>\n      )\n    })\n  }\n\n  return (\n    <Modal\n      visible={props.contactsModal}\n      // visible={true}\n      onCancel={() => props.toggleModal(\"contactsModal\")}\n      title=\"Контакты\"\n      footer={null}\n      maskClosable\n      className=\"contacts\"\n    >\n      <Tabs defaultActiveKey=\"1\" onChange={changeGroup}>\n        <TabPane tab=\"Все\" key=\"all\">\n          {showContacts()}\n        </TabPane>\n        {showGroups()}\n      </Tabs>\n    </Modal>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    contactsModal: state.ui.modals.contactsModal,\n    users: state.users,\n    contacts: state.contacts.users,\n    contactsIDs: state.contacts.usersIDs,\n    groups: state.contacts.groups\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    toggleModal: name => dispatch(toggleModal(name)),\n    openDialog: data => dispatch(openDialog(data))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ContactsModal)\n","/* eslint-disable */\nimport React, {useState} from \"react\"\nimport { connect } from \"react-redux\"\nimport { Modal, Button, Input, Divider, Form, Typography, Icon } from \"antd\"\nimport { toggleModal } from \"../actions/ui\"\nimport { removeContactFromGroup, removeGroup } from \"../actions/contacts\"\nimport Avatar from \"../components/Avatar\"\nimport socket from \"../transport/Connect\"\n\nconst { Text } = Typography\n\nfunction ContactsGroupsModal(props) {\n  const [chatName, setChatName] = useState(null)\n  const [nameError, setNameError] = useState(false)\n  const [groupOpen, setGroupOpen] = useState(false)\n  const [creatingGroup, setCreatingGroup] = useState(false)\n  const [usersIDs, setUsersIds] = useState([])\n  const [showUsers, setShowUsers] = useState(false)\n\n  const handleSetChatName = value => {\n    setChatName(value)\n    setNameError(false)\n    if (value.length < 1) {\n      setNameError(true)\n    }\n  }\n\n  const removeContactGroup = (groupId) => {\n    const removeGroup = {\n      GroupsId: [groupId],\n      RequestId: socket.makeId(),\n      RequestType: 57,\n      Type: 0\n    }\n\n    socket.send(removeGroup)\n    props.removeGroup(groupId)\n  }\n\n  const showGroups = () => {\n    return props.groups.map(group => {\n      return (\n        <div className=\"contact\" key={group.GroupId}>\n          <div className=\"name\" onClick={() => openGroup(group.GroupId)}>{group.Title}</div>\n          <Button className=\"remove-user\" type=\"danger\" shape=\"circle\" icon=\"close\" onClick={() => removeContactGroup(group.GroupId)} />\n        </div>\n      )\n    })\n  }\n\n  const openGroup = groupId => {\n    const openedGroup = props.groups.find(group => group.GroupId === groupId)\n    if (openedGroup) {\n      setGroupOpen(openedGroup)\n    }\n  }\n\n  const handleSetCreatingGroup = () => {\n    if (!chatName) {\n      setNameError(true)\n    } else {\n      setCreatingGroup(\"step2\")\n    }\n  }\n\n  const updateGroup = () => {\n    const addUsersToGroup = {\n      UsersId: usersIDs,\n      GroupId: groupOpen.GroupId,\n      RequestId: socket.makeId(),\n      RequestType: 58,\n      Type: 0\n    }\n    \n    socket.send(addUsersToGroup)\n\n    props.toggleModal(\"contactsGroupsModal\")\n  }\n\n  const createGroup = () => {\n    const newGroup = {\n      Group: {\n        GroupId: groupOpen ? groupOpen.GroupId : null,\n        Title: chatName ? chatName : groupOpen.Title,\n        UsersId: usersIDs,\n      },\n      RequestId: socket.makeId(),\n      RequestType: 56,\n      Type: 0\n    }\n    \n    socket.send(newGroup)\n\n    props.toggleModal(\"contactsGroupsModal\")\n  }\n\n  const removeUserFromGroup = user => {\n    const removeUser = {\n      UsersId: [user.Id],\n      GroupId: groupOpen.GroupId,\n      RequestId: socket.makeId(),\n      RequestType: 59,\n      Type: 0\n    }\n    \n    socket.send(removeUser)\n\n    props.removeContactFromGroup({userId: user.Id, groupId: groupOpen.GroupId})\n  }\n\n  const showUsersInGroup = () => {\n    return props.contacts.users.map(user => {\n      if(user.GroupsId.includes(groupOpen.GroupId)){\n        let name = null\n        if (user.ContactUser.NameFirst) {\n          name = user.ContactUser.NameFirst\n        }\n        if (user.ContactUser.NameSecond) {\n          name = name + ' ' + user.ContactUser.NameSecond\n        }\n        return (\n          <div key={user.ContactId} className='contacts'>\n            <>\n            <Avatar user={user.ContactUser} />\n            {name ? name : 'Имя скрыто'}\n            </>\n            <Button className=\"remove-user\" type=\"danger\" shape=\"circle\" icon=\"user-delete\" onClick={() => removeUserFromGroup(user.ContactUser)} />\n          </div>\n        )\n      }\n    })\n  }\n\n  const addContactToChat = userId => {\n    let users = [...usersIDs]\n    if (usersIDs.includes(userId)) {\n      let foudnUserIndex = users.indexOf(userId)\n      users.splice(foudnUserIndex, 1)\n      setUsersIds(users)\n    } else {\n      users.push(userId)\n      setUsersIds(users)\n    }\n  }\n\n  const showContacts = () => {\n    let contacts = []\n    if (groupOpen) {\n      contacts = props.contacts.users.map(contact => {\n        if (!contact.GroupsId.includes(groupOpen.GroupId)) {\n          return contact\n        }\n      })\n    } else {\n      contacts = props.contacts.users\n    }\n    return contacts.map(user => {\n      if(user){\n        let name = null\n        if (user.ContactUser.NameFirst) {\n          name = user.ContactUser.NameFirst\n        }\n        if (user.ContactUser.NameSecond) {\n          name = name + ' ' + user.ContactUser.NameSecond\n        }\n        return (\n          <div key={user.ContactId} className={usersIDs.includes(user.ContactUserId) ? 'contacts contacts-active' : 'contacts'} onClick={() => {addContactToChat(user.ContactUserId)}}>\n            <Avatar user={user.ContactUser} />\n            {name ? name : 'Имя скрыто'}\n          </div>\n        )\n      }\n    })\n  }\n\n  const handleCloseModal = () => {\n    setChatName(null)\n    setNameError(false)\n    setGroupOpen(false)\n    setCreatingGroup(false)\n    setUsersIds([])\n    setShowUsers(false)\n    props.toggleModal(\"contactsGroupsModal\")\n  }\n\n  return (\n    <Modal\n      visible={props.contactsGroupsModal}\n      // visible={true}\n      onCancel={() => handleCloseModal()}\n      title=\"Группы контактов\"\n      footer={null}\n      maskClosable\n      className=\"contacts create-chat-modal\"\n    >\n      {\n        creatingGroup === \"step1\" ?\n          <div className=\"content\">\n            <div className=\"modal_back\" onClick={() => setCreatingGroup(false)}><Icon type=\"arrow-left\" /></div>\n            <Form.Item\n              validateStatus={nameError ? \"error\" : ''}\n              help={nameError ? \"Это поле обязательно для заполнения\" : false}\n            >\n              <Input\n                placeholder=\"Название группы\"\n                onChange={(e) => handleSetChatName(e.target.value)}\n              />\n            </Form.Item>\n            <Divider />\n            <Button type=\"primary\" block onClick={() => handleSetCreatingGroup()}>Далее</Button>\n          </div>\n        : creatingGroup === \"step2\" ?\n          <div className=\"content\">\n            <div className=\"modal_back\" onClick={() => setCreatingGroup(\"step1\")}><Icon type=\"arrow-left\" /></div>\n            <Text strong>Добавьте участников</Text>\n            <div className=\"wrap_contacts\">\n              {showContacts()}\n            </div>\n            <Divider />\n            <Button type=\"primary\" block onClick={() => createGroup()}>Создать группу</Button>\n          </div>\n        : groupOpen ?\n          <div className=\"content\">\n            {\n              showUsers ?\n                <>\n                  <div className=\"modal_back\" onClick={() => setShowUsers(false)}><Icon type=\"arrow-left\" /></div>\n                  <Text strong>Добавьте участников</Text>\n                  <div className=\"wrap_contacts\">\n                    {showContacts()}\n                  </div>\n                  <Divider />\n                </>\n              :\n                <>\n                  <div className=\"modal_back\" onClick={() => setGroupOpen(false)}><Icon type=\"arrow-left\" /></div>\n                  <Text strong>Название:</Text>\n                  <Input defaultValue={chatName ? chatName : groupOpen.Title} onChange={(e) => handleSetChatName(e.target.value)} />\n                  <Divider />\n                  <Text strong>Участники:</Text>\n                  <div className=\"wrap_contacts\">\n                    {showUsersInGroup()}\n                  </div>\n                  <Divider />\n                  <Button type=\"normal\" block icon=\"usergroup-add\" onClick={() => setShowUsers(!showUsers)}>Добавить пользователей</Button>\n                  <Divider />\n                </>\n            }\n            <Button type=\"primary\" block onClick={() => updateGroup()}>Сохранить</Button>\n          </div>\n        :\n          <>\n            {showGroups()}\n            <div className=\"content\">\n              <Button type=\"primary\" block onClick={() => setCreatingGroup(\"step1\")}>Добавить группу</Button>\n            </div>\n          </>\n      }\n    </Modal>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    contactsGroupsModal: state.ui.modals.contactsGroupsModal,\n    users: state.users,\n    contacts: state.contacts,\n    contactsIDs: state.contacts.usersIDs,\n    groups: state.contacts.groups\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    toggleModal: name => dispatch(toggleModal(name)),\n    removeContactFromGroup: data => dispatch(removeContactFromGroup(data)),\n    removeGroup: data => dispatch(removeGroup(data))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ContactsGroupsModal)","export function setContactUsersIDs(usersIDs) {\n  return {\n    type: \"SET_CONTACT_USERS_IDS\",\n    usersIDs\n  }\n}\n\nexport function setContacts(contacts) {\n  return {\n    type: \"SET_CONTACTS\",\n    contacts\n  }\n}\n\nexport function userGroupsReceived(groups) {\n  return {\n    type: \"USER_GROUPS_RECEIVED\",\n    groups\n  }\n}\n\nexport function removeContactFromGroup(payload) {\n  return {\n    type: \"REMOVE_CONTACT_FROM_GROUP\",\n    payload\n  }\n}\n\nexport function removeGroup(groupId) {\n  return {\n    type: \"REMOVE_GROUP\",\n    groupId\n  }\n}\n","/* eslint-disable */\nimport React, {useState, useEffect} from \"react\"\nimport { connect } from \"react-redux\"\nimport { Modal, Button, Input, Divider, Upload, Icon, message } from \"antd\"\nimport { toggleModal } from \"../actions/ui\"\nimport Request from \"../transport/Request\"\nimport Avatar from \"./Avatar\"\nimport axios from 'axios'\n\nfunction SettingsModal(props) {\n  const [loading, setLoading] = useState(false)\n  const [imageUrl, setImageUrl] = useState(false)\n  const [name, setName] = useState('')\n  const [lastName, setLastName] = useState('')\n  const [about, setAbout] = useState('')\n\n  useEffect(() => {\n    if (props.user) {\n      setName(props.user.NameFirst)\n      setLastName(props.user.NameSecond)\n      setAbout(props.user.About)\n      setImageUrl(props.user.Photo)\n    }\n  }, [props.user])\n\n  // const getBase64 = (img, callback) => {\n  //   const reader = new FileReader()\n  //   reader.addEventListener('load', () => callback(reader.result))\n  //   reader.readAsDataURL(img)\n  // }\n  \n  const beforeUpload = file => {\n    const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png'\n    if (!isJpgOrPng) {\n      message.error('Поддерживается только загрузка JPG/PNG файлов!')\n    }\n    return isJpgOrPng\n  }\n\n  const handleChange = info => {\n    if (info.file.status === 'uploading') {\n      setLoading(true)\n      return\n    }\n  }\n\n  const uploadButton = (\n    <div>\n      <Icon type={loading ? 'loading' : 'plus'} />\n      <div className=\"ant-upload-text\">Upload</div>\n    </div>\n  )\n\n  const handleUploadImage = data => {\n    const fileAccessToken = localStorage.getItem('FileAccessToken')\n    axios.defaults.headers['FileAccessToken'] = fileAccessToken\n\n    const formData = new FormData()\n    formData.append('file', data.file)\n  \n    axios.post(`https://${props.node}:5000/api/Files`, formData)\n    .then(\n        (res) => {\n          if (res.status === 200) {\n            setLoading(false)\n            setImageUrl(res.data.File.FileId)\n          }\n        }\n    )\n    .catch(\n        (err) => {\n          console.log(err)\n        }\n    )\n  }\n\n  const handleUpdateUser = () => {\n    const userData = {\n      NameFirst: name,\n      NameSecond: lastName,\n      About: about,\n      Photo: imageUrl\n    }\n\n    Request.editUser(userData)\n  }\n\n  return (\n    <Modal\n      visible={props.settingsModal}\n      // visible={true}\n      onCancel={() => props.toggleModal(\"settingsModal\")}\n      title=\"Редактировать профиль\"\n      footer={null}\n      maskClosable\n      className=\"contacts\"\n    >\n      {\n        props.user ?\n          <div className=\"content settings\">\n            <Upload\n              listType=\"picture-card\"\n              className=\"avatar-uploader\"\n              showUploadList={false}\n              customRequest={file => handleUploadImage(file)}\n              beforeUpload={beforeUpload}\n              onChange={handleChange}\n            >\n              {\n                loading ? \n                  <Icon type=\"loading\" className=\"loading-icon\" />\n                : null\n              }\n              {\n                imageUrl ?\n                  <img src={`https://${props.node}:5000/api/Files/${imageUrl}`} alt=\"avatar\" style={{ width: '100%' }} />\n                : props.user.Photo ?\n                  <Avatar user={props.user} />\n                : uploadButton\n              }\n            </Upload>\n            <Divider />\n            <Input value={lastName} onChange={e => setLastName(e.target.value)} placeholder=\"Фамилия\" />\n            <Divider />\n            <Input value={name} onChange={e => setName(e.target.value)} placeholder=\"Имя\" />\n            <Divider />\n            <Input value={about} onChange={e => setAbout(e.target.value)} placeholder=\"О себе\" />\n            <Divider />\n            <Input addonBefore=\"+7\" defaultValue={props.user.Phones[0] ? props.user.Phones[0].SubscriberNumber : ''} placeholder=\"Телефон\" disabled />\n            <Divider />\n            <Input defaultValue={props.user.Emails[0]} placeholder=\"Email\" disabled />\n            <Divider />\n            <Button type=\"primary\" block onClick={() => handleUpdateUser()}>Обновить</Button>\n          </div>\n        : null\n      }        \n    </Modal>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    settingsModal: state.ui.modals.settingsModal,\n    user: state.users.find(user => user.currentUser === true),\n    node: state.node.activeNode.Domains[0]\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    toggleModal: name => dispatch(toggleModal(name))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SettingsModal)","/* eslint-disable */\nimport React, { useState } from \"react\"\nimport { connect } from \"react-redux\"\nimport { BrowserRouter as Router, Route } from \"react-router-dom\"\nimport Sidebar from \"./Sidebar\"\nimport DialogContainer from \"./DialogContainer\"\nimport ProfileModal from \"./ProfileModal\"\nimport CreateChatModal from \"./CreateChatModal\"\nimport ContactsModal from \"./ContactsModal\"\nimport ContactsGroupsModal from \"./ContactsGroupsModal\"\nimport { toggleDrawer, toggleModal } from \"../actions/ui\"\nimport { Drawer } from 'antd';\nimport SettingsModal from \"./SettingsModal\"\n\nfunction MainContainer(props) {\n  const [windowWidth, setWindowWidth] = useState(document.body.clientWidth)\n  \n  window.addEventListener(\"resize\", () => {\n    setWindowWidth(document.body.clientWidth)\n  }, false)\n\n  return (\n    <Router>\n      <div className=\"page\">\n        <div className=\"page__content\">\n          <Drawer\n            visible={props.ui.showDrawer}\n            // visible={true}\n            placement='left'\n            closable={true}\n            onClose={() => props.toggleDrawer()}\n            width='366'\n          >\n            {\n              props.user ? (\n                <div className=\"drawer-user\">\n                  <div className=\"drawer-user__ava\">\n                    { props.user.Photo ? (\n                      <div\n                        style={{\n                          width: \"100%\",\n                          height: \"100%\",\n                          backgroundSize: \"cover\",\n                          backgroundPosition: \"center center\",\n                          backgroundImage: `url(https://${props.node}:5000/api/Files/${props.user.Photo})`,\n                          backgroundRepeat: \"no-repeat\"\n                        }}\n                      />\n                    ) : (\n                      <div className=\"drawer-user__photo-default avatar-default\">defaultAva</div>\n                    )}\n                  </div>\n                  <div className=\"drawer-user__name\">\n                    {props.user.NameFirst + ' ' + props.user.NameSecond}\n                  </div>\n                </div>\n              ) : null\n            }\n            <ul className=\"menu\">\n              <li onClick={() => props.toggleModal(\"createChatModal\")}>Создать групповой чат</li>\n              <li onClick={() => props.toggleModal(\"contactsModal\")}>Контакты</li>\n              <li onClick={() => props.toggleModal(\"contactsGroupsModal\")}>Группы контактов</li>\n              <li onClick={() => props.toggleModal(\"settingsModal\")}>Настройки</li>\n            </ul>\n            <div className=\"app-version\">v0.1.6</div>\n          </Drawer>\n          <>\n            <Sidebar {...props} />\n            <DialogContainer />\n          </>\n          {/* {windowWidth > 675 ? (\n            <>\n              <Sidebar {...props} />\n              <DialogContainer />\n            </>\n          ) : (\n            !selectors.getActiveDialog(props.dialogs) ? <Sidebar {...props} /> : <DialogContainer />\n          )} */}\n        </div>\n      </div>\n      <ProfileModal />\n      <CreateChatModal />\n      <ContactsModal />\n      <ContactsGroupsModal />\n      <SettingsModal />\n    </Router>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    dialogs: state.dialogs,\n    ui: state.ui,\n    user: state.users.find(user => user.currentUser === true),\n    node: state.node.activeNode.Domains[0]\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    toggleDrawer: () => dispatch(toggleDrawer()),\n    toggleModal: name => dispatch(toggleModal(name))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MainContainer)\n","/* eslint-disable */\nimport {useEffect} from \"react\"\nimport { connect } from \"react-redux\"\nimport Connect from \"./Connect\"\nimport Request from \"./Request\"\nimport {\n  dialogsReceived,\n  chatsReceived,\n  messagesReceived,\n  openDialog,\n  readMessages,\n} from \"../actions/dialogs\"\nimport { toggleModal, toggleDrawer } from \"../actions/ui\"\nimport { searchResultReceived } from \"../actions/search\"\nimport {\n  setContactUsersIDs,\n  userGroupsReceived,\n  setContacts\n} from \"../actions/contacts\"\nimport selectors from \"../selectors\"\nimport { userReceived, chatsUsersReceived } from \"../actions/user\"\nimport { setAuth } from \"../actions/auth\"\n\nfunction Socket(props) {\n  useEffect(() => {\n    Connect.onMessage = data => {\n      // Ответ на запрос авторизации либо на запрос обновления токенов\n      if (data.ResponseType === 6) {\n        // запрашиваем информацию об авторизировашемся пользователе\n        const getSelf = {\n          RequestId: Connect.makeId(),\n          RequestType: 27,\n          Type: 0\n        }\n\n        Connect.send(getSelf)\n\n        localStorage.setItem(\"FileAccessToken\", data.FileAccessToken)\n        localStorage.setItem(\"AccessToken\", data.Token.AccessToken)\n        localStorage.setItem(\"RefreshToken\", data.Token.RefreshToken)\n\n        props.setAuth(\"AUTH_SUCCESS\")\n      }\n      // Ответ на запрос получения текущего пользователя\n      else if (data.ResponseType === 12) {\n        const user = selectors.getFormatedUser([data.User])\n        user[0].currentUser = true\n        props.userReceived(user)\n        props.toggleModal(\"close\")\n        props.toggleDrawer(\"close\")\n      }\n      // Ответ на запрос получения дилогов\n      else if (data.ResponseType === 15) {\n        props.dialogsReceived(selectors.getFormatedDialogs(data.Conversations))\n      }\n      // Ответ на запрос получения сообщений\n      else if (data.ResponseType === 9) {\n        props.messagesReceived(selectors.getFormatedMessages(data.Messages))\n        // Request.getDialogs()\n      }\n      // Новое сообщение\n      else if (data.Message) {\n        props.messagesReceived(selectors.getFormatedMessages([data.Message]))\n        Request.getDialogs()\n      }\n      // Прочтение исходящих сообщений\n      else if (data.Type === 2 && data.Code === 5) {\n        props.readMessages({conversationId: data.ConversationId, conversationType: data.ConversationType})\n      }\n      // Ответ на запрос юзеров\n      else if (data.ResponseType === 0) {\n        props.userReceived(selectors.getFormatedUser(data.Users))\n      }\n      // Ответ на запрос чатов\n      else if (data.ResponseType === 2) {\n        const chats = selectors.getFormatedChats(data.Chats)\n\n        // запрашиваем список пользователей для чатов\n        chats.forEach(chat => {\n          const getChatsUsers = {\n            ChatId: chat.Id,\n            NavigationUserId: null,\n            RequestId: Connect.makeId(),\n            RequestType: 17,\n            Type: 0\n          }\n\n          Connect.send(getChatsUsers)\n        })\n\n        props.chatsReceived(selectors.getFormatedChats(data.Chats))\n      }\n      // Ответ на запрос юзеров в чате\n      // У них структура отличается от обычных юзеров, здесь приходит информация относящаяся именно к этому чату\n      else if (data.ResponseType === 16) {\n        props.chatsUsersReceived(selectors.getFormatedChatsUsers(data.ChatUsers))\n      }\n      // Ответ на вступление в канал\n      else if (data.ResponseType === 21) {\n        Request.getDialogs()\n      }\n      // Ответ на событие поиска\n      else if (data.ResponseType === 23) {\n        const searchResult = {}\n        if (data.Users.length > 0) {\n          searchResult.users = data.Users\n        }\n        if (data.Chats.length > 0) {\n          searchResult.chats = data.Chats\n        }\n        if (data.Channels.length > 0) {\n          searchResult.channels = data.Channels\n        }\n        props.searchResultReceived(searchResult)\n      }\n      // Ответ на запрос списка контактов\n      else if (data.ResponseType === 27) {\n        let userIDs = data.Contacts.map(user => {\n          return user.ContactUserId\n        })\n\n        props.setContactUsersIDs(userIDs)\n        props.setContacts(data.Contacts)\n\n        if (userIDs.length > 0) {\n          Request.getUsers(userIDs)\n        }\n      }\n      // Ответ на запрос групп контактов\n      else if (data.ResponseType === 26) {\n        props.userGroupsReceived(data.Groups)\n      }\n      // Уведомление о прочтении сообщений\n      else if (data.Code === 5) {\n        props.messagesRead(data.ConversationId)\n      }\n    }\n  }, [])\n\n  return null\n}\n\nfunction mapStateToProps(state) {\n  return {\n    users: state.users\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    dialogsReceived: dialogs => dispatch(dialogsReceived(dialogs)),\n    chatsReceived: chats => dispatch(chatsReceived(chats)),\n    chatsUsersReceived: chatsUsers => dispatch(chatsUsersReceived(chatsUsers)),\n    openDialog: dialogId => dispatch(openDialog(dialogId)),\n    userReceived: user => dispatch(userReceived(user)),\n    messagesReceived: messages => dispatch(messagesReceived(messages)),\n    readMessages: data => dispatch(readMessages(data)),\n    setAuth: auth => dispatch(setAuth(auth)),\n    searchResultReceived: data => dispatch(searchResultReceived(data)),\n    setContactUsersIDs: usersIDs => dispatch(setContactUsersIDs(usersIDs)),\n    userGroupsReceived: groups => dispatch(userGroupsReceived(groups)),\n    setContacts: contacts => dispatch(setContacts(contacts)),\n    toggleModal: name => dispatch(toggleModal(name)),\n    toggleDrawer: name => dispatch(toggleDrawer(name))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Socket)\n","/* eslint-disable */\nimport React, { useEffect } from \"react\"\nimport { connect } from \"react-redux\"\nimport { BrowserRouter as Router, Route, Redirect } from \"react-router-dom\"\nimport { Spin } from \"antd\"\nimport {\n  dialogsReceived,\n  messagesReceived,\n  openDialog\n} from \"./actions/dialogs\"\nimport { userReceived } from \"./actions/user\"\nimport { setAppFocus } from \"./actions/ui\"\nimport Auth from \"./components/Auth\"\nimport Registration from \"./components/Registration\"\nimport Verify from \"./components/Verify\"\nimport MainContainer from \"./components/MainContainer\"\nimport socket from \"./transport/Connect\"\nimport Connect from \"./transport/Socket\"\nimport { setAuth } from \"./actions/auth\"\nimport { setPath } from \"./actions/path\"\nimport { setNodes, setActiveNode } from \"./actions/node\"\n\nconst licens = new WebSocket(\"wss://testlic-1.ymess.org:5005\")\n\nfunction App(props) {\n    // Устанавливаем флаг для отмечания сообщения прочитанными если вкладка не активна\n  window.onfocus = () => {\n    props.setAppFocus(true)\n  }\n  window.onblur = () => {\n    props.setAppFocus(false)\n  }\n\n  useEffect(() => {\n    if (props.auth === \"AUTH_SUCCESS\") {\n      // запрос диалогов\n      const getDialogs = {\n        NavigationMessageTime: null,\n        RequestId: socket.makeId(),\n        RequestType: 12,\n        Type: 0\n      }\n\n      socket.send(getDialogs)\n    }\n  }, [props.auth])\n\n  useEffect(() => {\n    licens.onopen = () => {\n      // console.log(\"Соединение с лицензиаром установлено\")\n      const getNodesObj = {\n        RequestId: socket.makeId(),\n        RequestType: 1,\n        Type: 6\n      }\n\n      licens.send(JSON.stringify(getNodesObj))\n    }\n\n    licens.onmessage = event => {\n      const response = socket.blobToJson(event.data)\n      if (response.ResponseType === 2) {\n        props.setNodes(response.Nodes)\n        // устанавливаем первую ноду по умолчанию если выбран режим \"автоматически\"\n        if (!localStorage.getItem(\"node\")) {\n          // localStorage.setItem(\"node\", JSON.stringify(response.Nodes[0]))\n          // props.setActiveNode(response.Nodes[0])\n        } else {\n          props.setActiveNode(JSON.parse(localStorage.getItem(\"node\")))\n        }\n      }\n    }\n\n    const node = JSON.parse(localStorage.getItem(\"node\"))\n    if (node) {\n      props.setActiveNode(node)\n    }\n\n    if (localStorage.getItem(\"AccessToken\")) {\n      let login\n      if (localStorage.getItem(\"User\")) {\n        login = {\n          Token: {\n            UserId: JSON.parse(localStorage.getItem(\"User\")).Id,\n            AccessToken: localStorage.getItem(\"AccessToken\"),\n            RefreshToken: localStorage.getItem(\"RefreshToken\")\n          },\n          LoginType: 0,\n          UidType: 1,\n          RequestId: socket.makeId(),\n          RequestType: 33,\n          Type: 0\n        }\n      } else if (localStorage.getItem(\"Phone\")) {\n        login = {\n          Uid: localStorage.getItem(\"Phone\"),\n          Token: {\n            AccessToken: localStorage.getItem(\"AccessToken\"),\n            RefreshToken: localStorage.getItem(\"RefreshToken\")\n          },\n          LoginType: 0,\n          UidType: 0,\n          RequestId: socket.makeId(),\n          RequestType: 33,\n          Type: 0\n        }\n      } else if (localStorage.getItem(\"Email\")) {\n        console.log(\"По почте\")\n      }\n\n      socket.start(node.Domains[0])\n      socket.wsOnConnect = () => {\n        socket.send(login)\n        // if(socket.send){\n        // }\n      }\n    } else {\n      props.setAuth(\"NO_AUTH\")\n    }\n  }, [])\n\n  return (\n    <>\n      <Connect />\n      {\n        props.auth === \"CHECK_AUTH\" ? \n          <div className=\"preloader\">\n            <Spin size=\"large\" />\n          </div>\n        : props.auth === \"AUTH_SUCCESS\" ? \n            <MainContainer/>\n        : props.path === \"by-phone\" || props.path === \"by-email\" ? \n          <Verify/>\n        : props.path === \"registration\" ? \n          <Registration/> \n        : <Auth/>\n      }\n\n\n      {/* <Router>\n        <Route\n          path=\"/\"\n          render={\n            // eslint-disable-next-line no-nested-ternary\n            props.auth === \"CHECK_AUTH\"\n              ? () => (\n                  <div className=\"preloader\">\n                    <Spin size=\"large\" />\n                  </div>\n                )\n              : props.auth === \"AUTH_SUCCESS\"\n              ? () => (\n                  <>\n                    <Route path=\"/\" component={MainContainer} />\n                  </>\n                )\n              : () => <Redirect to=\"/auth\" />\n          }\n        />\n        <Route path=\"/auth/by-phone\" component={Verify} />\n        <Route path=\"/auth/by-email\" component={Verify} />\n        <Route exact path=\"/auth\" component={Auth} />\n        <Route exact path=\"/registration\" component={Registration} />\n      </Router> */}\n    </>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    dialogs: state.dialogs,\n    users: state.users,\n    auth: state.auth,\n    path: state.path.currentPath\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    dialogsReceived: dialogs => dispatch(dialogsReceived(dialogs)),\n    openDialog: dialogId => dispatch(openDialog(dialogId)),\n    userReceived: user => dispatch(userReceived(user)),\n    messagesReceived: messages => dispatch(messagesReceived(messages)),\n    setAuth: auth => dispatch(setAuth(auth)),\n    setNodes: nodes => dispatch(setNodes(nodes)),\n    setActiveNode: node => dispatch(setActiveNode(node)),\n    setPath: path => dispatch(setPath(path)),\n    setAppFocus: data => dispatch(setAppFocus(data))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import './css/style.css';\nimport './assets/fonts/fonts.css'\nimport 'antd/dist/antd.css';\nimport './css/style.scss';\nimport {Provider} from 'react-redux';\nimport configureStore from './store/configureStore';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport {BrowserRouter as Router} from \"react-router-dom\";\n\nconst store = configureStore()\n\nReactDOM.render(\n  <Provider store={store}>\n    <Router>\n      <App />\n    </Router>\n  </Provider>,\n  document.getElementById(\"root\")\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","import {createStore, applyMiddleware} from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from '../reducers';\n\nexport default function configureStore(initialState) {\n    return createStore(\n        rootReducer,\n        initialState,\n        applyMiddleware(thunk)\n    );\n}\n"],"sourceRoot":""}