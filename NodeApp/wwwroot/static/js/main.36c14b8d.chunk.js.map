{"version":3,"sources":["assets/logo.PNG","reducers/node.js","reducers/path.js","reducers/ui.js","reducers/contacts.js","reducers/index.js","reducers/dialogs.js","reducers/chats.js","reducers/messages.js","reducers/users.js","reducers/forwardMessage.js","reducers/auth.js","reducers/callbacks.js","reducers/publicKeys.js","reducers/search.js","reducers/keys.js","reducers/keysForDecrypt.js","actions/dialogs.js","actions/user.js","actions/ui.js","transport/Connect.js","actions/node.js","actions/path.js","components/Auth.js","helpers/DevicesKeysExchange.js","helpers/index.js","helpers/Helpers.js","helpers/SetKeysPair.js","components/Registration.js","actions/auth.js","components/Verify.js","selectors/index.js","selectors/Message.js","selectors/Dialog.js","selectors/User.js","components/SidebarItem.js","components/HeadSidebar.js","components/Search.js","actions/search.js","components/Sidebar.js","components/Avatar.js","components/HeadDialog.js","actions/callbacks.js","actions/keys.js","assets/tick_icon.svg","assets/double_tick_icon.svg","components/Message.js","assets/paperclip_icon.svg","assets/send_button_icon.svg","components/NewMessageField.js","components/Dialog.js","components/DialogContainer.js","components/ProfileModal.js","components/CreateChatModal.js","transport/Request.js","components/ContactsModal.js","components/ContactsGroupsModal.js","actions/contacts.js","components/SettingsModal.js","components/MainContainer.js","transport/Socket.js","App.js","serviceWorker.js","index.js","store/configureStore.js"],"names":["module","exports","__webpack_require__","p","defaulState","activeNode","allNodes","defaultState","prevPath","currentPath","profile","search","showDrawer","appFocus","modals","createChatModal","contactsModal","contactsGroupsModal","settingsModal","callbacks","socketReconnect","users","usersIDs","groups","combineReducers","dialogs","state","arguments","length","undefined","action","type","newState","Object","toConsumableArray","activeDialog","find","dialog","active","forEach","ConversationId","ConversationType","messagesRecieved","payload","isCrypto","data","UnreadedCount","SecondUid","Id","fakeDialog","Title","NameFirst","NameSecond","Photo","fake","push","messages","conversationId","conversationType","isResponse","PreviewText","Text","dialogIndex","indexOf","splice","unshift","chats","chatsUsers","ChatId","Users","message","mess","GlobalId","sort","a","b","a_date","Date","SendingTime","b_date","Read","user","concat","contacts","objectSpread2","ContactUserId","userId","groupIndex","GroupsId","groupId","group","GroupId","forwardMessage","auth","node","nodes","path","ui","text","name","callbackData","id","callback","response","RequestId","publicKeys","publicKey","key","JSONbig","stringify","KeyId","searchResult","symmetricKey","symmetricKeysForDecrypt","symmetricKeyForDecrypt","dialogsReceived","messagesReceived","forwardingMessage","openDialog","toggleCryptoMode","userReceived","openProfile","toggleDrawer","toggleModal","wSocket","Connect","classCallCheck","this","reconnectInterval","needReconnect","domain","_this","webSocket","ReconnectingWebSocket","onopen","clearInterval","wsOnConnect","setInterval","send","Length","RequestType","Type","onclose","event","onmessage","blobToJson","ErrorCode","onMessage","onMessageAuth","onMessageReg","onerror","error","close","readyState","u","x","URL","createObjectURL","XMLHttpRequest","open","revokeObjectURL","parse","responseText","result","charactersLength","i","charAt","Math","floor","random","parseInt","JSON","setActiveNode","setPath","Option","Select","Auth","possibleConstructorReturn","getPrototypeOf","call","auto","props","localStorage","setItem","selectedNode","nod","socket","start","Domains","connectNode","react_default","createElement","row","align","justify","style","height","col","className","es_select","defaultValue","getItem","width","overflow","onChange","selectNode","bind","Auth_Option","value","map","nodePhoto","backgroundSize","backgroundPosition","backgroundImage","backgroundRepeat","borderRadius","flexShrink","Name","Tag","Country","es_button","onClick","Component","connect","dispatch","allEnctyptKeys","allSignKeys","formatedAllKeys","UserId","PublicKey","public","PrivateKey","private","Lifetime","GenerationTime","IsSign","formatedSignKey","helpers","bufferToBase64","buf","binstr","Array","prototype","ch","String","fromCharCode","join","btoa","base64ToBuffer","base64","atob","Uint8Array","charCodeAt","devicesKeysExchange","interlocutorPublicKey","requestId","encoder","TextEncoder","masterPassword","encode","masterPasswordId","BigInt","crypto","Crypto","mySignPrivateKey","symmetricKyeId","makeId","setPublicEncryptKeyToSend","setPrivateSignKeyToSend","getSymmetricKey","then","setSymmetricKey","encryptSecretMsg","encryptedData","encryptKeyMsg","encryptedSymmetricKey","clientResponse","ResponseType","EncryptedSymmetricKey","EncryptedData","catch","err","setKeysFromAnotherDevice","decoder","TextDecoder","myEncryptKey","setPublicSignKeyToRecive","setPrivateEncryptKeyToRecive","decryptKeyMsg","decryptSymmetricKey","decryptSecretMsg","EncryptedKeys","msg","keysFromAnotherDevice","decode","idAllMykeys","includes","allSignKeyPairs","newKey","allEncryptKeyPairs","console","log","setKeysPair","BigNumber","setKeyPair","keys","keysId","allKeyPairs","keysInBase64","setSignKeyPair","cryptoKeysId","getKeyPairShort","getKeyPairMidle","getKeyPairLong","signKeysId","getOS","navigator","appVersion","getDevice","userAgent","_useState","useState","_useState2","slicedToArray","setName","_useState3","_useState4","surname","setSurname","_useState5","_useState6","phone","setPhone","_useState7","_useState8","email","setEmail","_useState9","_useState10","verifyCode","setVerifyCode","_useState11","_useState12","nameErr","setNameErr","_useState13","_useState14","emailErr","setEmailErr","_useState15","_useState16","phoneErr","setPhoneErr","_useState17","_useState18","contactsErr","setContactsErr","_useState19","_useState20","verifyCodeErr","setVerifyCodeErr","_useState21","_useState22","btnLoader","setbtnLoader","_useState23","_useState24","_useState25","_useState26","showRegButton","setShowRegButton","useEffect","errMessage","Message","Phone","Email","warning","FileAccessToken","Token","AccessToken","RefreshToken","User","window","location","replace","handleSetPhone","e","target","isNaN","test","handleSetEmail","es_form","Fragment","Item","validateStatus","help","input","placeholder","textAlign","privacy","regData","Phones","FullNumber","About","City","Birthday","Language","NodeId","Online","Emails","Blacklist","Visible","Security","RegistrationDate","Privacy","VCode","loading","RegistrationMethod","addonBefore","inputMode","disabled","verifyData","VerificationType","Uid","IsRegistration","getVerifyCode","htmlType","setAuth","Verify","verifyUid","verifyErr","verifyRequestSended","btnPreloader","redirect","_this2","setState","verifyType","preventDefault","LoginType","UidType","DeviceName","OSName","AppName","_this3","sendVerifyRequest","_this4","react_router","to","setPrevPath","icon","onSubmit","sendverifyCode","autoFocus","onChangeVerifCode","onChangePhone","sendVerificationQuery","selectors","getFormatedMessages","tempMess","Attachments","SenderId","getFormatedDialogs","tempDialogs","AttachmentType","IsMuted","LastMessageId","LastMessageSenderId","LastMessageSenderName","LastMessageTime","getFormatedChats","chat","tempChat","Key","NodesId","Public","getFormatedChatsUsers","tempUser","Banned","Deleted","InviterId","Joined","UserInfo","UserRole","getFormatedUser","BlackList","Confirmed","Contact","ContactsPrivacy","Encryption","Groups","Keys","getUserById","getUserInitials","item","initials","ChannelName","defaultAva","trim","split","uid","substr","getActiveDialog","getUserName","contact","SidebarItem","newsContent","refs","messageText","newsText","innerText","slice","avatarStyle","react_router_dom","ref","dialogId","src","logo","alt","Search","Input","searchStart","searchEnd","searchDialogs","toLowerCase","searchRequest","SearchQuery","Direction","onSearch","enterButton","localFoundDialogs","setLocalFoundDialogs","filter","components_HeadSidebar","components_Search","components_SidebarItem","showSearchResultUsers","showSearchResultChats","channels","showSearchResultChannels","spin","size","JavascriptTimeAgo","locale","ru","closeDialog","setDialog","setDefaultAva","setUser","document","body","clientWidth","windowWidth","setWindowWidth","onresize","components_Avatar","ReactTimeAgo","date","es_switch","checked","setCallbackId","setSymmetricKeyForDecrypt","setPublicKeys","_extends","assign","source","hasOwnProperty","apply","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","points","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","tick_icon_SvgTickIcon","_ref","svgRef","y","viewBox","enableBackground","xmlSpace","ForwardRef","forwardRef","double_tick_icon_extends","double_tick_icon_objectWithoutProperties","double_tick_icon_objectWithoutPropertiesLoose","double_tick_icon_ref2","d","double_tick_icon_ref3","double_tick_icon_ref4","double_tick_icon_ref5","double_tick_icon_ref6","double_tick_icon_ref7","double_tick_icon_ref8","double_tick_icon_ref9","double_tick_icon_ref10","double_tick_icon_ref11","double_tick_icon_ref12","double_tick_icon_ref13","double_tick_icon_ref14","double_tick_icon_ref15","double_tick_icon_ref16","double_tick_icon_ref17","double_tick_icon_SvgDoubleTickIcon","double_tick_icon_ForwardRef","currentUser","visible","setVisible","messageTime","setMessageTime","isContextMenuVisible","setSsContextMenuVisible","decryptedMessage","setDecryptedMessage","fileMsg","setFileMsg","toString","timestamp","setTime","hour","getHours","minutes","getMinutes","setLinks","str","reg","match","k","conversation","Payload","background","dangerouslySetInnerHTML","__html","FileId","imgSize","ImageMetadata","Height","Width","forwardingUser","getForwardingUser","foundPublicSignKey","SignKeyId","privateKey","Data","idKey","failedDecryptMsg","signKeyForDecrypt","getMetaDataMsg","attach","fontStyle","href","download","Filename","showMessage","modal","onCancel","footer","maskClosable","paperclip_icon_extends","paperclip_icon_objectWithoutProperties","paperclip_icon_objectWithoutPropertiesLoose","paperclip_icon_ref2","transform","paperclip_icon_SvgPaperclipIcon","paperclip_icon_ForwardRef","send_button_icon_extends","send_button_icon_objectWithoutProperties","send_button_icon_objectWithoutPropertiesLoose","send_button_icon_ref2","send_button_icon_ref3","send_button_icon_ref4","send_button_icon_ref5","send_button_icon_ref6","send_button_icon_ref7","send_button_icon_ref8","send_button_icon_ref9","send_button_icon_ref10","send_button_icon_ref11","send_button_icon_ref12","send_button_icon_ref13","send_button_icon_ref14","send_button_icon_ref15","send_button_icon_ref16","send_button_icon_ref17","send_button_icon_SvgSendButtonIcon","send_button_icon_ForwardRef","upDialog","setMessageText","imgLoading","setImgLoading","imageUrl","setImageUrl","attachmentsType","setAttachmentsType","sendMessage","Messages","ReceiverId","ReplyTo","MessagesGlobalId","Hash","MessageId","encryptMsg","encryptedMessage","SaveFlag","upload","showUploadList","customRequest","file","fileAccessToken","axios","defaults","headers","formData","FormData","append","post","res","status","File","handleUploadImage","beforeUpload","isJpgOrPng","info","onKeyDown","keyCode","requestsId","setIsCrypto","messagesLoading","setMessagesLoading","lastMessage","setLastMessage","callbackFunctions","setCallbackFunctions","interlocutorEncryptPublicKey","setInterlocutorEncryptPublicKey","mesViewport","useRef","requestUser","UsersId","callbackIds","getUserKeys","KeysId","NavigationTime","getTime","confirm","Modal","title","ExclamationCircleOutlined","content","okText","cancelText","keyTimelife","interEncryptPublicKey","keyId","symmKey","symmKeyEncrypted","keysPairs","signKeysPairs","addNewKeys","Version","MessagesId","current","onscroll","scrollTop","querySelectorAll","getAttribute","messagesRequest","NavigationMessageId","setTimeout","lastMessageOffset","getElementById","offsetTop","keyExchangeMessage","onDragOver","classList","add","fileOver","onDragLeave","remove","fileLeave","onDrop","dataTransfer","files","upladedFile","encryptImgMsg","attachmentType","fileDrop","ChannelId","components_Message","CloseOutlined","color","paddingRight","cursor","ChannelsId","components_NewMessageField","NavigationMessageTime","zIndex","components_HeadDialog","components_Dialog","setProfile","prevProfile","setPrevProfile","getChatInfo","ChatsId","undefinedUsers","requestUsers","handleCancelProfile","foundUser","margin","marginTop","chatName","setChatName","nameError","setNameError","chatPrivate","setChatPrivate","chatChannel","setChatChannel","setLoading","setUsersIds","showUsers","setShowUsers","ContactUser","ContactId","foudnUserIndex","addContactToChat","listType","fontSize","divider","block","newChat","Chats","handleCreateChat","request","Request","getDialogs","getUserContacts","usersIds","getUsers","requestdData","contactsIDs","TabPane","Tabs","getUserGroups","showContacts","handleOpenChat","tabs","defaultActiveKey","getGroupContacts","tab","Typography","removeContactFromGroup","removeGroup","groupOpen","setGroupOpen","creatingGroup","setCreatingGroup","handleSetChatName","openGroup","openedGroup","strong","newGroup","Group","createGroup","shape","removeUser","removeUserFromGroup","addUsersToGroup","updateGroup","removeContactGroup","lastName","setLastName","about","setAbout","privacySettings","setPrivacySettings","namePrivacy","setNamePrivacy","photoPrivacy","setPhotoPrivacy","onlinePrivacy","setOnlinePrivacy","phonePrivacy","setPhonePrivacy","emailPrivacy","setEmailPrivacy","uploadButton","userData","editUser","handleUpdateUser","drawer","placement","closable","onClose","logout","Full","removeItem","components_Sidebar","components_DialogContainer","components_ProfileModal","components_CreateChatModal","components_ContactsModal","components_ContactsGroupsModal","components_SettingsModal","chatsReceived","chatsUsersReceived","readMessages","searchResultReceived","setContactUsersIDs","userGroupsReceived","setContacts","setCallbackData","pongInterval","reload","reconnect","getSelf","Conversations","userKeyRequest","Code","getChatsUsers","NavigationUserId","ChatUsers","Channels","userIDs","Contacts","messagesRead","licens","WebSocket","setNodes","setAppFocus","position","addEventListener","scrollTo","getKeysFromAnotherDevice","getNodesObj","Nodes","login","transport_Socket","components_MainContainer","components_Verify","components_Registration","components_Auth","Boolean","hostname","initialState","store","createStore","rootReducer","applyMiddleware","thunk","ReactDOM","render","es","src_App","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.36c14b8d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.024bbe57.PNG\";","/* eslint-disable */\nconst defaulState = {\n  activeNode: null,\n  allNodes: null\n}\n\nexport function node(state = defaulState, action) {\n  if(action.type === 'SET_NODE') {\n    let newState = {...state}\n    newState.activeNode = action.node\n    return newState\n  } else if(action.type === 'SET_NODES') {\n    let newState = {...state}\n    newState.allNodes = action.nodes\n    return newState\n  }\n  return state\n}\n","/* eslint-disable */\nconst defaultState = {\n  prevPath: '',\n  currentPath: ''\n}\n\nexport function path(state = defaultState, action) {\n  if(action.type === 'SET_PATH') {\n    let newState = {...state}\n    newState.prevPath = newState.path\n    newState.currentPath = action.path\n    return newState\n  } else if(action.type === 'PREV_PATH') {\n    let newState = {...state}\n    newState.currentPath = newState.prevPath\n    return newState\n  }\n  return state\n}\n","/* eslint-disable */\nconst defaultState = {\n  profile: null,\n  search: false,\n  showDrawer: false,\n  appFocus: true,\n  modals: {\n    createChatModal: false,\n    contactsModal: false,\n    contactsGroupsModal: false,\n    settingsModal: false\n  },\n  callbacks: [],\n  socketReconnect: false\n}\n\nexport function ui(state = defaultState, action) {\n  if(action.type === 'OPEN_PROFILE') {\n    let newState = {...state}\n    newState.profile = action.dialog\n    return newState\n  }\n  else if (action.type === 'SEARCH_START') {\n    let newState = {...state}\n    newState.search = action.text\n    return newState\n  }\n  else if (action.type === 'SEARCH_END') {\n    let newState = {...state}\n    newState.search = false\n    return newState\n  }\n  else if (action.type === 'TOGGLE_DRAWER') {\n    let newState = {...state}\n    if (action.name === \"close\") {\n      newState.showDrawer = false\n    } else {\n      newState.showDrawer = !newState.showDrawer\n    }\n    return newState\n  }\n  else if (action.type === 'TOGGLE_MODAL') {\n    let newState = {...state}\n    if (action.name === \"close\") {\n      for (var name in newState.modals) {\n        newState.modals[name] = false\n      }\n    } else {\n      newState.modals[action.name] = !newState.modals[action.name]\n    }\n    return newState\n  }\n  else if (action.type === 'SET_APP_FOCUS') {\n    let newState = {...state}\n    newState.appFocus = action.data\n    return newState\n  }\n  else if (action.type === 'SOCKET_RECONNECT') {\n    let newState = {...state}\n    if (action.data) {\n      newState.socketReconnect = 'Соединение разорвано. Переподключение...'\n    } else {\n      newState.socketReconnect = false\n    }\n    return newState\n  }\n  else {\n    return state\n  }\n}\n","/* eslint-disable */\nconst defaultState = {\n  users: [],\n  usersIDs: [],\n  groups: []\n}\n\nexport function contacts(state = defaultState, action) {\n  if(action.type === 'SET_CONTACT_USERS_IDS') {\n    let newState = {...state}\n    newState.usersIDs = action.usersIDs\n    return newState\n  }\n  if(action.type === 'SET_CONTACTS') {\n    let newState = {...state}\n    newState.users = action.contacts\n    return newState\n  }\n  else if (action.type === \"USER_GROUPS_RECEIVED\") {\n    let newState = {...state}\n    newState.groups = action.groups\n    return newState\n  }\n  else if (action.type === \"REMOVE_CONTACT_FROM_GROUP\") {\n    let newState = {...state}\n    newState.users.forEach(user => {\n      if (user.ContactUserId === action.payload.userId) {\n        let groupIndex = user.GroupsId.indexOf(action.payload.groupId)\n        user.GroupsId.splice(groupIndex, 1)\n      }\n    })\n    return newState\n  }\n  else if (action.type === \"REMOVE_GROUP\") {\n    let newState = {...state}\n    newState.groups.forEach(group => {\n      if (group.GroupId === action.groupId) {\n        let groupIndex = newState.groups.indexOf(group)\n        newState.groups.splice(groupIndex, 1)\n      }\n    })\n    return newState\n  }\n  else {\n    return state\n  }\n}\n","import { combineReducers } from \"redux\"\nimport { dialogs } from \"./dialogs\"\nimport { chats } from \"./chats\"\nimport { messages } from \"./messages\"\nimport { users } from \"./users\"\nimport { forwardMessage } from \"./forwardMessage\"\nimport { auth } from \"./auth\"\nimport { node } from \"./node\"\nimport { path } from \"./path\"\nimport { ui } from \"./ui\"\nimport { callbacks } from \"./callbacks\"\nimport { searchResult } from \"./search\"\nimport { contacts } from \"./contacts\"\nimport { symmetricKey } from \"./keys\"\nimport { symmetricKeysForDecrypt } from \"./keysForDecrypt\"\nimport { publicKeys } from \"./publicKeys\"\n\nexport default combineReducers({\n  dialogs,\n  chats,\n  messages,\n  users,\n  contacts,\n  forwardMessage,\n  auth,\n  node,\n  path,\n  ui,\n  callbacks,\n  publicKeys,\n  searchResult,\n  symmetricKey,\n  symmetricKeysForDecrypt\n})\n","/* eslint-disable */\nexport function dialogs(state = [], action) {\n   if (action.type === 'DIALOGS_RECEIVED') {\n      let newState = [...state]\n      let activeDialog = newState.find(dialog => dialog.active)\n      newState = action.dialogs\n      if (activeDialog) {\n         newState.forEach(dialog => {\n            if (dialog.ConversationId === activeDialog.ConversationId && dialog.ConversationType === activeDialog.ConversationType) {\n               dialog.active = true\n               dialog.messagesRecieved = activeDialog.messagesRecieved || false\n            }\n         })\n      }\n      return newState\n   }\n   else if(action.type === 'OPEN_DIALOG') {\n      let newState = [...state]\n      // The action.payload.data may contain both the dialog itself and the user object of the dialog with which there is no\n      // If there is no dialogue with the user, then create a fake dialogue\n      // And after sending the message a dialog will be created and just request it on the server\n      if (action.payload.type === 'dialog') {\n         newState.forEach(function(dialog){\n            dialog.active = false\n            dialog.isCrypto = false\n   \n            if (dialog.ConversationId === action.payload.data.ConversationId && dialog.ConversationType === action.payload.data.ConversationType) {\n               dialog.active = true\n               dialog.UnreadedCount = 0\n               dialog.type = action.payload.type\n            }\n         })\n      } else if (action.payload.type === 'user') {\n         let dialogWithUser = newState.find(dialog => dialog.SecondUid === action.payload.data.Id)\n         if (dialogWithUser) {\n            newState.forEach(dialog => {\n               dialog.active = false\n\n               if (dialog.SecondUid === action.payload.data.Id) {\n                  dialog.active = true\n                  dialog.UnreadedCount = 0\n                  dialog.type = 'dialog'\n               }\n            })\n         } else {\n            let fakeDialog = {}\n         \n            fakeDialog.ConversationId = action.payload.data.Id,\n            fakeDialog.Title = action.payload.data.NameFirst + ' ' + action.payload.data.NameSecond,\n            fakeDialog.Photo = action.payload.data.Photo,\n            fakeDialog.ConversationType = 1,\n            fakeDialog.SecondUid = action.payload.data.Id,\n            fakeDialog.fake = true\n   \n            newState.push(fakeDialog)\n   \n            newState.forEach(function(dialog){\n               dialog.active = false\n      \n               if (dialog.ConversationId === action.payload.data.Id) {\n                  dialog.active = true\n                  dialog.UnreadedCount = 0\n                  dialog.type = action.payload.type\n               }\n            })\n         }\n      } else if (action.payload.type === 'channel') {\n         newState.push(action.payload.data)\n\n         newState.forEach(function(dialog){\n            dialog.active = false\n   \n            if (dialog.ConversationId === action.payload.data.Id) {\n               dialog.active = true\n               dialog.UnreadedCount = 0\n               dialog.type = action.payload.type,\n               dialog.fake = true\n            }\n         })\n      } else if (action.payload.type === 'chat') {\n         let chat = newState.find(dialog => dialog.ConversationId === action.payload.data.Id)\n         if (chat) {\n            newState.forEach(dialog => {\n               dialog.active = false\n\n               if (dialog.ConversationId === action.payload.data.Id) {\n                  dialog.active = true\n                  dialog.UnreadedCount = 0\n                  dialog.type = 'chat'\n               }\n            })\n         } else {\n            let fakeDialog = {}\n         \n            fakeDialog.ConversationId = action.payload.data.Id,\n            fakeDialog.Title = action.payload.data.NameFirst + ' ' + action.payload.data.NameSecond,\n            fakeDialog.Photo = action.payload.data.Photo,\n            fakeDialog.ConversationType = 1,\n            fakeDialog.SecondUid = action.payload.data.Id,\n            fakeDialog.fake = true\n   \n            newState.push(fakeDialog)\n   \n            newState.forEach(function(dialog){\n               dialog.active = false\n      \n               if (dialog.ConversationId === action.payload.data.Id) {\n                  dialog.active = true\n                  dialog.UnreadedCount = 0\n                  dialog.type = action.payload.type\n               }\n            })\n         }\n      }\n\n      return newState\n   }\n   else if(action.type === 'CLOSE_DIALOG') {\n      let newState = [...state]\n\n      newState.forEach(dialog => {\n         if (dialog.active) {\n            dialog.active = false\n         }\n      })\n\n      return newState\n   }\n   else if(action.type === 'MESSAGES_RECEIVED'){\n      let newState = [...state]\n      if (action.payload.messages.length) {\n         let conversationId = action.payload.messages[0].ConversationId\n         let conversationType = action.payload.messages[0].ConversationType\n         newState.forEach(dialog => {\n            if (dialog.ConversationId === conversationId && dialog.ConversationType === conversationType) {\n               // set a flag by which when opening a dialog we check whether messages were requested for it\n               if (action.payload.isResponse) {\n                  dialog.messagesRecieved = true\n               }\n               // dialogue preview is displayed in the sidebar\n               dialog.PreviewText = action.payload.messages[0].Text\n               // if the dialogue is not open, then wrap the unread counter\n               if(!dialog.active) {\n                  dialog.UnreadedCount += 1\n               }\n               // raise the dialogue to the first place in the sidebar\n               if (!action.payload.isResponse) {\n                  let dialogIndex = newState.indexOf(dialog)\n                  newState.splice(dialogIndex, 1)\n                  newState.unshift(dialog)\n               }\n            }\n         })\n      }\n\n      return newState\n   }\n   else if(action.type === 'UP_DIALOG'){\n      let newState = [...state]\n      if (action.dialog) {\n         let conversationId = action.dialog.ConversationId\n         let conversationType = action.dialog.ConversationType\n         newState.forEach(dialog => {\n            if (dialog.ConversationId === conversationId && dialog.ConversationType === conversationType) {\n               // raise the dialogue to the first place in the sidebar\n               let dialogIndex = newState.indexOf(dialog)\n               newState.splice(dialogIndex, 1)\n               newState.unshift(dialog)\n            }\n         })\n      }\n\n      return newState\n   }\n   else if (action.type === 'TOGGLE_CRYPTO_MODE') {\n      // localStorage.removeItem(\"keysUpload\")\n      let newState = [...state]\n      if (action.payload.isCrypto) {\n         newState.forEach(function(dialog){\n            if (dialog.ConversationId === action.payload.dialog.ConversationId && dialog.ConversationType === action.payload.dialog.ConversationType) {\n               dialog.isCrypto = action.payload.isCrypto\n            }\n         })\n      } else {\n         newState.forEach(function(dialog){\n            dialog.isCrypto = false\n         })\n      }\n\n      return newState\n    }\n   else {\n      return state\n   }\n}\n","/* eslint-disable */\n// Only one chat object is stored in chats, information about which is currently being viewed\nexport function chats(state = [], action) {\nif (action.type === 'CHATS_RECEIVED') {\n    let newState = [...state];\n    newState = action.chats;\n    return newState;\n  }\n  else if (action.type === 'CHATS_USERS_RECEIVED') {\n    let newState = [...state];\n    if (newState[0].Id === action.chatsUsers[0].ChatId) {\n      newState[0].Users = action.chatsUsers;\n    }\n    return newState;\n  }\n  else {\n    return state;\n  }\n}\n","/* eslint-disable  */\n\nfunction sortMessages(messages) {\n  return messages.sort(function(a, b) {\n    let a_date = new Date(a.SendingTime)\n    let b_date = new Date(b.SendingTime)\n    if (a_date < b_date) {\n      return -1\n    } if (a_date > b_date) {\n      return 1\n    } else {\n      return 0\n    }\n  })\n}\n\nexport function messages(state = [], action) {\n  if (action.type === \"MESSAGES_RECEIVED\") {\n    let newState = [...state]\n    action.payload.messages.forEach(message => {\n      let existence = newState.find(mess => mess.GlobalId === message.GlobalId)\n      if (!existence) {\n        newState.push(message)\n      }\n    })\n\n    return sortMessages(newState)\n  }\n  else if(action.type === \"READ_MESSAGES\") {\n    let newState = [...state]\n    \n    newState.forEach(message => {\n      if (message.ConversationId === action.data.ConversationId && message.ConversationType === action.data.ConversationType) {\n        message.Read = true\n      }\n    })\n\n    return newState\n  }\n  else {\n    return state\n  }\n}\n","/* eslint-disable */\nexport function users(state = [], action) {\n  if(action.type === 'USER_RECEIVED') {\n    let newState = state;\n    \n    if(action.users.length > 0) {\n      let foundUser = newState.find(user => user.Id === action.users[0].Id);\n\n      if (!foundUser) {\n        newState = [...newState, ...action.users];\n      }\n    }\n    \n    return newState;\n  } else {\n    return state;\n  }\n}\n","/* eslint-disable */\nexport function forwardMessage(state = false, action) {\n  if (action.type === \"FORWARD_MESSAGE\") {\n    let newState = state\n\n    newState = action.message\n\n    return newState\n  } else {\n    return state\n  }\n}\n","/* eslint-disable */\nexport function auth(state = \"CHECK_AUTH\", action) {\n  if(action.type === 'SET_AUTH') {\n    let newState = state\n    newState = action.auth\n    return newState\n  }\n  return state\n}\n","/* eslint-disable */\nexport function callbacks(state = [], action) {\n  if (action.type === 'SET_CALLBACK_ID') {\n    let newState = [...state]\n    let callbackData = {\n      id: action.id,\n      data: null\n    }\n    newState.push(callbackData)\n    return newState\n  }\n  else if (action.type === 'SET_CALLBACK_DATA') {\n    let newState = [...state]\n    newState.forEach(callback => {\n      if (callback.id === action.response.RequestId) {\n        callback.data = action.response\n      }\n    })\n    return newState\n  }\n  else {\n    return state\n  }\n}\n","/* eslint-disable */\nimport JSONbig from \"json-bigint\"\n// const defaultState = {\n//   symmetricKey: null,\n//   keysPair: null\n// }\n\nexport function publicKeys(state = [], action) {\n  if(action.type === 'SET_PUBLIC_KEYS') {\n    let newState = [...state]\n\n    action.publicKeys.forEach(publicKey => {\n      let foundPublicKey = newState.find(key => JSONbig.stringify(key.KeyId) === JSONbig.stringify(publicKey.KeyId))\n      if (!foundPublicKey) {\n        newState.push(publicKey)\n      }\n    })\n\n    return newState\n  } else {\n    return state\n  }\n}\n","/* eslint-disable */\nexport function searchResult(state = null, action) {\n  if(action.type === 'SEARCH_RESULT_RECEIVED') {\n    let newState = {...state}\n    newState = action.searchResult\n    return newState\n  }\n  else if(action.type === 'SEARCH_END') {\n    let newState = {...state}\n    newState = null\n    return newState\n  }\n  else {\n    return state\n  }\n}\n","/* eslint-disable */\n// const defaultState = {\n//   symmetricKey: null,\n//   keysPair: null\n// }\n\nexport function symmetricKey(state = null, action) {\n  if(action.type === 'SET_SYMMETRIC_KEY') {\n    let newState = state\n    newState = action.symmetricKey\n    return newState\n  } else {\n    return state\n  }\n}\n","/* eslint-disable */\n// const defaultState = {\n//   symmetricKey: null,\n//   keysPair: null\n// }\n\nexport function symmetricKeysForDecrypt(state = [], action) {\n  if(action.type === 'SET_SYMMETRIC_KEY_FOR_DECRYPT') {\n    let newState = [...state]\n    let keyAdded = newState.find(key => key.KeyId === action.symmetricKeyForDecrypt.KeyId)\n    if (!keyAdded) {\n      newState.push(action.symmetricKeyForDecrypt)\n    }\n\n    return newState\n  } else {\n    return state\n  }\n}\n","export function dialogsReceived(dialogs) {\n  return {\n    type: \"DIALOGS_RECEIVED\",\n    dialogs\n  }\n}\n\nexport function chatsReceived(chats) {\n  return {\n    type: \"CHATS_RECEIVED\",\n    chats\n  }\n}\n\nexport function messagesReceived(payload) {\n  return {\n    type: \"MESSAGES_RECEIVED\",\n    payload\n  }\n}\n\nexport function readMessages(data) {\n  return {\n    type: \"READ_MESSAGES\",\n    data\n  }\n}\n\nexport function forwardingMessage(message) {\n  return {\n    type: \"FORWARD_MESSAGE\",\n    message\n  }\n}\n\nexport function openDialog(payload) {\n  return {\n    type: \"OPEN_DIALOG\",\n    payload\n  }\n}\n\nexport function closeDialog() {\n  return {\n    type: \"CLOSE_DIALOG\"\n  }\n}\n\nexport function toggleCryptoMode(payload) {\n  return {\n    type: \"TOGGLE_CRYPTO_MODE\",\n    payload\n  }\n}\n\nexport function upDialog(dialog) {\n  return {\n    type: \"UP_DIALOG\",\n    dialog\n  }\n}\n","export function userReceived(users) {\n  return {\n    type: \"USER_RECEIVED\",\n    users\n  }\n}\n\nexport function chatsUsersReceived(chatsUsers) {\n  return {\n    type: \"CHATS_USERS_RECEIVED\",\n    chatsUsers\n  }\n}\n","/* eslint-disable */\nexport function openProfile(dialog) {\n  return {\n    type: \"OPEN_PROFILE\",\n    dialog\n  }\n}\n\nexport function toggleDrawer(name) {\n  return {\n    type: \"TOGGLE_DRAWER\",\n    name\n  }\n}\n\nexport function toggleModal(name) {\n  return {\n    type: \"TOGGLE_MODAL\",\n    name: name\n  }\n}\n\nexport function setAppFocus(data) {\n  return {\n    type: \"SET_APP_FOCUS\",\n    data\n  }\n}\n\nexport function socketReconnect(data) {\n  return {\n    type: \"SOCKET_RECONNECT\",\n    data\n  }\n}\n","/* eslint-disable */\nimport JSONbig from \"json-bigint\"\nimport ReconnectingWebSocket from 'reconnecting-websocket'\n\nclass Connect {\n  constructor() {\n    this.reconnectInterval\n    this.needReconnect = true\n  }\n\n  start(domain){\n    this.webSocket = new ReconnectingWebSocket(`wss://${domain}:5000`)\n    // this.webSocket = new WebSocket(`wss://testnode1-1.ymess.org:5000`)\n\n    this.webSocket.onopen = () => {\n      // console.log(\"Соединение установлено\")\n\n      this.needReconnect = true\n      clearInterval(this.reconnectInterval)\n      this.wsOnConnect()\n      \n      // ping request for detect connect problem\n      setInterval(() => {\n        const pingRequest = {\n          Length: 1,\n          RequestType: 102,\n          RequestId: 999,\n          Type: 0\n        }\n\n        this.send(pingRequest)\n      }, 3000)\n    }\n\n    this.webSocket.onclose = event => {\n      // if (event.wasClean) {\n      //   console.log(\"Соединение закрыто\")\n      // } else {\n      //   // reconnect\n      //   console.log(\"Обрыв соединения\")\n      //   if(this.webSocket.readyState === 3 && this.needReconnect) {\n      //     this.reconnectInterval = setInterval(() => {\n      //       console.log(this.webSocket)\n      //       // this.webSocket.close(1000, 'changeNode')\n      //       // this.webSocket.start(JSON.parse(localStorage.getItem('node')).Domains[0])\n      //     }, 3000)\n      //   }\n      // }\n      // console.log(\"Код: \", event)\n    }\n\n    this.webSocket.onmessage = event => {\n      const message = this.blobToJson(event.data)\n\n      if (message.ErrorCode && message.ErrorCode !== 0) {\n        // console.log('%c REQUEST ERR ',  'background: #ff4545; color: #bada55; padding: 3px', message)\n        this.onMessage(message)\n        this.onMessageAuth(message)\n        this.onMessageReg(message)\n      } else {\n        this.onMessage(message)\n        this.onMessageAuth(message)\n        this.onMessageReg(message)\n        if (this.blobToJson(event.data).RequestId != 999) {\n          // console.log(\n          //   \"%c RESPONSE \",\n          //   \"background: #00ff00; color: #000; padding: 3px\",\n          //   this.blobToJson(event.data)\n          // )\n        }\n      }\n    }\n\n    this.webSocket.onerror = error => {\n      // console.log('%c ERROR CONNECT ',  'background: red; color: #bada55; padding: 3px', error);\n    }\n  }\n\n  close(){\n    this.needReconnect = false\n    this.webSocket.close(1000, 'changeNode')\n  }\n\n  getStatus(){\n    return this.webSocket.readyState\n  }\n\n  blobToJson(data) {\n    var u, x\n    u = URL.createObjectURL(data)\n    x = new XMLHttpRequest()\n    x.open(\"GET\", u, false)\n    x.send()\n    URL.revokeObjectURL(u)\n\n    return JSONbig.parse(x.responseText)\n  }\n\n  makeId() {\n    var result = \"\"\n    var characters = \"0123456789\"\n    var charactersLength = characters.length\n    for (var i = 0; i < 14; i++) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength))\n    }\n\n    return parseInt(result)\n  }\n\n  send(data) {\n    if (data.RequestId != 999) {\n      // console.log(\n      //   \"%c REQUEST \",\n      //   \"background: #222; color: #bada55; padding: 3px\",\n      //   data\n      // )\n    }\n    this.webSocket.send(JSON.stringify(data))\n  }\n\n  onMessage() {}\n\n  onMessageAuth() {}\n\n  onMessageReg(){}\n\n  wsOnConnect() {}\n\n  reconnect() {\n    // console.log('reconnect')\n  }\n}\n\nconst wSocket = new Connect()\n\nexport default wSocket\n","/* eslint-disable */\nexport function setActiveNode(node) {\n  return {\n    type: \"SET_NODE\",\n    node\n  }\n}\n\nexport function setNodes(nodes) {\n  return {\n    type: \"SET_NODES\",\n    nodes\n  }\n}","export function setPath(path) {\n  return {\n    type: \"SET_PATH\",\n    path: path\n  }\n}\n\nexport function setPrevPath() {\n  return {\n    type: \"PREV_PATH\"\n  }\n}","/* eslint-disable */\nimport React, { Component } from \"react\"\nimport { Row, Col, Button, Menu, Dropdown, Icon, Select } from \"antd\"\n// import { Link } from \"react-router-dom\"\nimport { connect } from \"react-redux\"\nimport socket from \"../transport/Connect\"\nimport { setActiveNode } from \"../actions/node\"\nimport { setPath } from \"../actions/path\"\n// import bigInteger from \"big-integer\"\n// import BigNumber from \"bignumber.js\"\n\nconst { Option } = Select\n\nclass Auth extends Component {\n  constructor() {\n    super()\n    // this.state = {\n    //   nodes: [],\n    //   activeNode: null\n    // }\n  }\n\n  componentDidMount() {\n    // let test = new BigNumber(762147864817264817648172346128746129487162948716249871624986129384761928374691283746)\n    // console.log(test)\n\n    // console.log(bigInteger)\n    // console.log(bignumber)\n    // console.log(jsonBigint)\n    // this.setState({\n    //   nodes: JSON.parse(localStorage.getItem(\"nodes\")),\n    //   activeNode: JSON.parse(localStorage.getItem(\"node\"))\n    // })\n  }\n\n  selectNode(node) {\n    if(node) {\n      if(JSON.parse(node).auto) {\n        this.props.setActiveNode(this.props.node.allNodes[0])\n        localStorage.setItem(\"node\", JSON.stringify(this.props.node.allNodes[0]))\n      }\n      else {\n        let selectedNode = this.props.node.allNodes.find(nod => nod.Id === node)\n        if (selectedNode) {\n          this.props.setActiveNode(selectedNode)\n          localStorage.setItem(\"node\", JSON.stringify(selectedNode))\n        }\n      }\n    }\n  }\n\n  connectNode(path) {\n    if (this.props.node.activeNode) {\n      socket.start(this.props.node.activeNode.Domains[0])\n    } else {\n      if(this.props.node.allNodes) {\n        socket.start(this.props.node.allNodes[0].Domains[0])\n        this.props.setActiveNode(this.props.node.allNodes[0])\n        localStorage.setItem(\"node\", JSON.stringify(this.props.node.allNodes[0]))\n      }\n    }\n    this.props.setPath(path)\n  }\n\n  handleChangeNode(node) {\n    if (JSON.parse(node)) {\n      connectNode(JSON.parse(node))\n      setActiveNode(JSON.parse(node))\n      localStorage.setItem(\"node\", node)\n    }\n  }\n\n  render() {\n    return (\n      <Row\n        type=\"flex\"\n        align=\"middle\"\n        justify=\"center\"\n        style={{ height: \"100vh\" }}\n      >\n        <Col>\n          <div className=\"auth__type\">\n            <h1>Вход</h1>\n            <h2>Выберите способ входа</h2>\n            <div className=\"auth__type_server\">\n              <span>Сервер: </span>\n              {\n                this.props.node.allNodes ? \n                  <Select defaultValue={localStorage.getItem(\"node\") ? JSON.parse(localStorage.getItem(\"node\")).Id : '{\"auto\": \"true\"}'} style={{ width: \"100%\", overflow: \"hidden\" }} onChange={this.selectNode.bind(this)}>\n                    <Option key={999} value='{\"auto\": \"true\"}'>Автоматически</Option>\n                    {this.props.node.allNodes.map((node, i) => {\n                      // console.log('node - ', node)\n                      const nodePhoto = {\n                        width: \"50px\",\n                        height: \"50px\",\n                        backgroundSize: \"cover\",\n                        backgroundPosition: \"center center\",\n                        backgroundImage: `url(https://${node.Domains[0]}:5000/api/Files/${node.Photo})`,\n                        backgroundRepeat: \"no-repeat\",\n                        borderRadius: \"100%\",\n                        flexShrink: 0\n                      }\n                      return (\n                        <Option key={i} value={node.Id}>\n                          <div className='node_photo' style={nodePhoto}></div>\n                          <div className='node_fields'>\n                            <div><span className='node_field'>Имя: </span><span>{node.Name}</span></div>\n                            <div><span className='node_field'>Тэг: </span><span>{node.Tag}</span></div>\n                            <div><span className='node_field'>Страна: </span><span>{node.Country}</span></div>\n                          </div>\n                        </Option>\n                      )\n                    })}\n                  </Select>\n                : null\n              }\n            </div>\n            <Button type=\"secondary\" onClick={this.connectNode.bind(this, 'by-phone')}>По номеру телефона</Button>\n            <br />\n            <Button type=\"secondary\" onClick={this.connectNode.bind(this, 'by-email')}>По электронной почте</Button>\n            {/* <br />\n            <Button type=\"secondary\">Через приложение</Button> */}\n            <br />\n            <br />\n            <Button type=\"link\" onClick={this.connectNode.bind(this, 'registration')}>Регистрация</Button>\n          </div>\n        </Col>\n      </Row>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    node: state.node\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setActiveNode: node => dispatch(setActiveNode(node)),\n    setPath: path => dispatch(setPath(path))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Auth)\n","/* eslint-disable */\n// import React from \"react\"\n// import { connect } from \"react-redux\"\n// import selectors from \"../selectors\"\nimport Crypto from \"y_crypto\"\nimport socket from \"../transport/Connect\"\nimport helpers from \"../helpers\"\n\n// we form an array with all the keys (and encryption and signatures)\nlet allEnctyptKeys = JSON.parse(localStorage.getItem(\"keysPair\"))\nlet allSignKeys = JSON.parse(localStorage.getItem(\"signKeysPair\"))\nlet formatedAllKeys = null\nif(allEnctyptKeys && localStorage.getItem(\"User\")) {\n  formatedAllKeys = allEnctyptKeys.map(key => {\n    let formatedEnctyptKey = {\n      KeyId: key.id,\n      UserId: JSON.parse(localStorage.getItem(\"User\")).Id,\n      PublicKey: key.public,\n      PrivateKey: key.private,\n      Lifetime: 99999,\n      GenerationTime: 0,\n      IsSign: false\n    }\n    return formatedEnctyptKey\n  })\n}\n\nif(allSignKeys && localStorage.getItem(\"User\")) {\n  allSignKeys.forEach(key => {\n    let formatedSignKey = {\n      KeyId: key.id,\n      UserId: JSON.parse(localStorage.getItem(\"User\")).Id,\n      PublicKey: key.public,\n      PrivateKey: key.private,\n      Lifetime: 99999,\n      GenerationTime: 0,\n      IsSign: true\n    }\n  \n    formatedAllKeys.push(formatedSignKey)\n  })\n}\n\nexport function devicesKeysExchange(interlocutorPublicKey, requestId) {\n  // encrypt and send keys\n  const encoder = new TextEncoder()\n  const masterPassword = encoder.encode('qwerty')\n  let masterPasswordId = BigInt(1)\n  const crypto = new Crypto(masterPassword, masterPasswordId)\n\n  let mySignPrivateKey = JSON.parse(localStorage.getItem(\"signKeysPair\"))[JSON.parse(localStorage.getItem(\"signKeysPair\")).length-1]\n  let symmetricKyeId = socket.makeId()\n  crypto.setPublicEncryptKeyToSend(helpers.base64ToBuffer(interlocutorPublicKey))\n  crypto.setPrivateSignKeyToSend(helpers.base64ToBuffer(mySignPrivateKey.private))\n  crypto.getSymmetricKey(1, symmetricKyeId, 99999, ).then(symmetricKey => {\n    crypto.setSymmetricKey(symmetricKey)\n\n    // encrypt an array of all keys\n    crypto.encryptSecretMsg(1, 1, 99999, encoder.encode(JSON.stringify(formatedAllKeys))).then(encryptedData => {\n      // console.log(encryptedData)\n\n      // we encrypt the symmetric key itself on which the array of all keys is encrypted\n      crypto.encryptKeyMsg(1, 99999, symmetricKey).then(encryptedSymmetricKey => {\n        // console.log(encryptedSymmetricKey)\n\n        let clientResponse = {\n          ResponseType: 1,\n          Type: 9,\n          EncryptedSymmetricKey: helpers.bufferToBase64(encryptedSymmetricKey),\n          EncryptedData: helpers.bufferToBase64(encryptedData),\n          PublicKey: mySignPrivateKey.public,\n          RequestId: requestId\n        }\n\n        socket.send(clientResponse)\n      }).catch(err => {\n        // console.log(err)\n      })\n    }).catch(err => {\n      // console.log(err)\n    })\n  }).catch(err => {\n    // console.log(err)\n  })\n}\n\nexport function setKeysFromAnotherDevice(data){\n  const encoder = new TextEncoder()\n  const decoder = new TextDecoder()\n  const masterPassword = encoder.encode('qwerty')\n  let masterPasswordId = BigInt(1)\n  const crypto = new Crypto(masterPassword, masterPasswordId)\n\n  let myEncryptKey = JSON.parse(localStorage.getItem(\"keysPair\"))[JSON.parse(localStorage.getItem(\"keysPair\")).length-1]\n\n  crypto.setPublicSignKeyToRecive(helpers.base64ToBuffer(data.PublicKey))\n  crypto.setPrivateEncryptKeyToRecive(helpers.base64ToBuffer(myEncryptKey.private))\n\n  crypto.decryptKeyMsg(helpers.base64ToBuffer(data.EncryptedSymmetricKey)).then(decryptSymmetricKey => {\n    // console.log('симметричный расшифрован - ', decryptSymmetricKey)\n    if(decryptSymmetricKey) {\n      crypto.setSymmetricKey(decryptSymmetricKey.key)\n      // console.log(helpers.base64ToBuffer(data.EncryptedKeys))\n      crypto.decryptSecretMsg(helpers.base64ToBuffer(data.EncryptedKeys)).then(result => {\n        // console.log('Ключи с другого устройства расшифрованы', decoder.decode(result.msg))\n        if(result.msg) {\n          let keysFromAnotherDevice = JSON.parse(decoder.decode(result.msg))\n          // console.log('allMyKeys', formatedAllKeys)\n          // console.log('keysFromAnotherDevice', keysFromAnotherDevice)\n\n          let idAllMykeys = []\n          if(formatedAllKeys){\n            idAllMykeys = formatedAllKeys.map(key => {\n              return key.KeyId\n            })\n          }\n\n          keysFromAnotherDevice.forEach(key => {\n            if(!idAllMykeys.includes(key.KeyId)){\n              if(key.IsSign) {\n                let allSignKeyPairs = JSON.parse(localStorage.getItem(\"signKeysPair\")) || []\n                let newKey = {}\n                newKey.id = key.KeyId\n                newKey.public = key.PublicKey\n                newKey.private = key.PrivateKey\n                allSignKeyPairs.push(newKey)\n            \n                localStorage.setItem(\"signKeysPair\", JSON.stringify(allSignKeyPairs))\n              } \n              else {\n                let allEncryptKeyPairs = JSON.parse(localStorage.getItem(\"keysPair\")) || []\n                let newKey = {}\n                newKey.id = key.KeyId\n                newKey.public = key.PublicKey\n                newKey.private = key.PrivateKey\n                allEncryptKeyPairs.push(newKey)\n            \n                localStorage.setItem(\"keysPair\", JSON.stringify(allEncryptKeyPairs))\n              }\n            }\n          })\n        }\n      }).catch(err => {\n        console.log()\n      })\n    }\n  }).catch(err => {\n    console.log()\n  })\n}","import {bufferToBase64, base64ToBuffer, getOS, getDevice} from \"./Helpers\"\nimport {devicesKeysExchange, setKeysFromAnotherDevice} from \"./DevicesKeysExchange\"\nimport {setKeysPair} from \"./SetKeysPair\"\n\nexport default {\n  bufferToBase64,\n  base64ToBuffer,\n  devicesKeysExchange,\n  setKeysFromAnotherDevice,\n  setKeysPair,\n  getOS,\n  getDevice\n}\n","export function bufferToBase64(buf) {\n  const binstr = Array.prototype.map.call(buf, function (ch) {\n      return String.fromCharCode(ch)\n  }).join('')\n  return btoa(binstr)\n}\n\nexport function base64ToBuffer(base64) {\n  let binstr = atob(base64)\n  let buf = new Uint8Array(binstr.length)\n  Array.prototype.forEach.call(binstr, function (ch, i) {\n    buf[i] = ch.charCodeAt(0)\n  })\n  return buf\n}\n\nexport function getOS() {\n  if (navigator.appVersion.indexOf('Windows') >= 0) return 'Windows'\n  else if (navigator.appVersion.indexOf('Android') >= 0) return 'Android'\n  else if (navigator.appVersion.indexOf('Mac') >= 0) return 'MacOS'\n  else return \"unknown\"\n}\n\nexport function getDevice() {\n  if (navigator.userAgent.indexOf(\"Android\") >= 0) return \"Phone\"\n  else if (navigator.userAgent.indexOf(\"webOS\") >= 0) return \"webOS\"\n  else if (navigator.userAgent.indexOf(\"iPhone\") >= 0) return \"iPhone\"\n  else if (navigator.userAgent.indexOf(\"iPad\") >= 0) return \"iPad\"\n  else if (navigator.userAgent.indexOf(\"iPod\") >= 0) return \"iPod\"\n  else return \"PC\"\n}","/* eslint-disable */\nimport Crypto from \"y_crypto\"\nimport BigNumber from \"bignumber.js\"\nimport socket from \"../transport/Connect\"\nimport helpers from \"../helpers\"\n\nexport function setKeysPair() {\n  // encryption\n  const encoder = new TextEncoder()\n  const masterPassword = encoder.encode('qwerty')\n  let masterPasswordId = BigNumber(1)\n  const crypto = new Crypto(masterPassword, masterPasswordId)\n\n  const setKeyPair = (keys, keysId) => {\n    let allKeyPairs = JSON.parse(localStorage.getItem(\"keysPair\")) || []\n    let keysInBase64 = keys\n    keysInBase64.id = keysId\n    keysInBase64.public = helpers.bufferToBase64(keys.public)\n    keysInBase64.private = helpers.bufferToBase64(keys.private)\n    allKeyPairs.push(keysInBase64)\n\n    localStorage.setItem(\"keysPair\", JSON.stringify(allKeyPairs))\n  }\n\n  const setSignKeyPair = (keys, keysId) => {\n    let allKeyPairs = JSON.parse(localStorage.getItem(\"signKeysPair\")) || []\n    let keysInBase64 = keys\n    keysInBase64.id = keysId\n    keysInBase64.public = helpers.bufferToBase64(keys.public)\n    keysInBase64.private = helpers.bufferToBase64(keys.private)\n    allKeyPairs.push(keysInBase64)\n\n    localStorage.setItem(\"signKeysPair\", JSON.stringify(allKeyPairs))\n  }\n\n  let cryptoKeysId = socket.makeId()\n\n  // create encryption keys\n  crypto.getKeyPairShort(1, cryptoKeysId, 99999, true).then(data => {\n    setKeyPair(data, cryptoKeysId)\n    cryptoKeysId = socket.makeId()\n    crypto.getKeyPairMidle(1, cryptoKeysId, 99999, true).then(data => {\n      setKeyPair(data, cryptoKeysId)\n      cryptoKeysId = socket.makeId()\n      crypto.getKeyPairLong(1, cryptoKeysId, 99999, true).then(data => {\n        setKeyPair(data, cryptoKeysId)\n      }).catch(err => {console.log(err)})\n    }).catch(err => {console.log(err)})\n  }).catch(err => {console.log(err)})\n\n  let signKeysId = socket.makeId()\n\n  // create signature keys\n  crypto.getKeyPairShort(1, signKeysId, 99999, false).then(data => {\n    setSignKeyPair(data, signKeysId)\n    signKeysId = socket.makeId()\n    crypto.getKeyPairMidle(1, signKeysId, 99999, false).then(data => {\n      setSignKeyPair(data, signKeysId)\n      signKeysId = socket.makeId()\n      crypto.getKeyPairLong(1, signKeysId, 99999, false).then(data => {\n        setSignKeyPair(data, signKeysId)\n      }).catch(err => {console.log(err)})\n    }).catch(err => {console.log(err)})\n  }).catch(err => {console.log(err)})\n}","/* eslint-disable */\nimport React, { useState, useEffect } from \"react\"\nimport { Row, Col, Button, Form, Input, Dropdown, Menu, Icon, message, Select } from \"antd\"\nimport { connect } from \"react-redux\"\nimport socket from \"../transport/Connect\"\nimport helpers from \"../helpers\"\n\nfunction Registration(props) {\n  const [name, setName] = useState(\"\")\n  const [surname, setSurname] = useState(\"\")\n  const [phone, setPhone] = useState(\"\")\n  const [email, setEmail] = useState(\"\")\n  const [verifyCode, setVerifyCode] = useState(\"\")\n  const [nameErr, setNameErr] = useState(false)\n  const [emailErr, setEmailErr] = useState(false)\n  const [phoneErr, setPhoneErr] = useState(false)\n  const [contactsErr, setContactsErr] = useState(false)\n  const [verifyCodeErr, setVerifyCodeErr] = useState(false)\n  const [btnLoader, setbtnLoader] = useState(false)\n  const [activeNode, setActiveNode] = useState(null)\n  const [showRegButton, setShowRegButton] = useState(false)\n\n  const { Option } = Select\n\n  useEffect(() => {\n    socket.onMessageReg = data => {\n      if (data.ErrorCode !== 0) {\n        if(data.ErrorCode === 18){\n          let errMessage = JSON.parse(data.Message)\n          if(errMessage.Phone) {\n            setPhoneErr(errMessage.Phone)\n          } else if(errMessage.Email) {\n            setEmailErr(errMessage.Email)\n          }\n        }\n        // else {\n        //   message.warning(data.Message)\n        // }\n        message.warning(data.Message)\n      } else if (data.ResponseType === 6) {\n        localStorage.setItem(\"FileAccessToken\", data.FileAccessToken)\n        localStorage.setItem(\"AccessToken\", data.Token.AccessToken)\n        localStorage.setItem(\"RefreshToken\", data.Token.RefreshToken)\n        localStorage.setItem(\"User\", JSON.stringify(data.User))\n\n        window.location.replace(\"/\")\n      } else if (data.ResponseType === 10) {\n          setShowRegButton(true)\n      }\n    }\n\n    setActiveNode(JSON.parse(localStorage.getItem(\"node\")))\n\n    // generate encrypt and sign geys and set the keys in localstorage\n    helpers.setKeysPair()\n  }, [])\n\n  const handleRegistration = () => {\n    if (!verifyCode) {\n      setVerifyCodeErr(\"Это поле обязательно для заполнения\")\n    } else {\n      setbtnLoader(true)\n\n      let privacy = []\n      for(let i = 0; privacy.length <= 31; i++){\n        privacy.push(false)\n      }\n      privacy[1] = true //name\n      privacy[2] = false // photo\n      privacy[14] = false // online status\n      privacy[15] = true // phone\n      privacy[17] = true // email\n\n      const regData = {\n        User: {\n          Id: 0,\n          Phones: phone ? [{FullNumber: `+${phone}`}] : null,\n          NameFirst: name,\n          NameSecond: surname,\n          About: \"\",\n          Photo: \"\",\n          Country: \"\",\n          City: \"\",\n          Birthday: \"\",\n          Language: null,\n          NodeId: activeNode.Id,\n          Online: null,\n          Emails: email ? [email] : null,\n          Blacklist: null,\n          Visible: null,\n          Security: null,\n          Tag: 0,\n          RegistrationDate: null,\n          Privacy: privacy\n        },\n        VCode: parseInt(verifyCode),\n        RequestId: socket.makeId(),\n        RequestType: 37,\n        Type: 0\n      }\n\n      socket.send(regData)\n    }\n  }\n\n  const handleSetName = e => {\n    setName(e.target.value)\n    setNameErr(false)\n  }\n\n  const handleSetSurname = e => {\n    setSurname(e.target.value)\n  }\n\n  const handleSetPhone = e => {\n    const { value } = e.target\n    const reg = /^-?\\d*(\\.\\d*)?$/\n    if ((!isNaN(value) && reg.test(value)) || value === '' || value === '-') {\n      setPhone(e.target.value)\n      setPhoneErr(false)\n    } else {\n      setPhoneErr('Это поле может содержать только цифры')\n    }\n\n    setContactsErr(false)\n  }\n\n  const handleSetEmail = e => {\n    const validateEmail = email => {\n      var re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      return re.test(email);\n    }\n\n    setEmail(e.target.value)\n    setContactsErr(false)\n\n    if (!validateEmail(e.target.value)) {\n      setEmailErr(\"Некорректный email адрес\")\n    } else {\n      setEmailErr(false)\n    }\n\n    if (e.target.value.length === 0) {\n      setEmailErr(false)\n    }\n  }\n\n  const handleSetVerifyCode = e => {\n    setVerifyCode(e.target.value)\n    setVerifyCodeErr(false)\n  }\n\n  const connectNode = (node) => {\n    if (node) {\n      socket.close()\n      socket.start(node.Domains[0])\n    }\n  }\n\n  const handleChangeNode = node => {\n    if (node) {\n      if(JSON.parse(node).auto) {\n        connectNode(props.nodes[0])\n        setActiveNode(props.nodes[0])\n        localStorage.setItem(\"node\", JSON.stringify(props.nodes[0]))\n      }\n      else {\n        let selectedNode = props.nodes.find(nod => nod.Id === node)\n        if (selectedNode) {\n          setActiveNode(selectedNode)\n          connectNode(selectedNode)\n          localStorage.setItem(\"node\", JSON.stringify(selectedNode))\n        }\n      }\n    }\n  }\n\n  const getVerifyCode = () => {\n    if (name.length === 0) {\n      setNameErr(\"Это поле обязательно для заполнения\")\n    } else if (phone.length === 0 && email.length === 0) {\n      setContactsErr(\"Одно из этих полей обязательно для заполнения\")\n    } else if (phone.length > 0 && phone.length != 11) {\n      setPhoneErr('Номер должен состоять из 11 цифр')\n    } else {\n      const requestId = socket.makeId()\n      const verifyData = {\n        VerificationType: email ? 1 : phone ? 0 : 0,\n        Uid: phone ? `+${phone}` : email,\n        IsRegistration: true,\n        RequestId: requestId,\n        RequestType: 42,\n        Type: 0\n      }\n      \n      setPhoneErr(false)\n      socket.send(verifyData)\n    }\n  }\n\n  return (\n    <Row\n      type=\"flex\"\n      align=\"middle\"\n      justify=\"center\"\n      style={{ height: \"100vh\" }}\n    >\n      <Col>\n        <div className=\"auth__type reg__form\">\n          <h1>Регистрация</h1>\n          <div>\n            <div className=\"auth__type_server\">\n              <span>Сервер: </span>\n              <Select defaultValue={localStorage.getItem(\"node\") ? JSON.parse(localStorage.getItem(\"node\")).Id : '{\"auto\": \"true\"}'} style={{ width: \"100%\", overflow: \"hidden\" }} onChange={handleChangeNode}>\n                <Option key={999} value='{\"auto\": \"true\"}'>Автоматически</Option>\n                {props.nodes.map((node, i) => {\n                  const nodePhoto = {\n                    width: \"50px\",\n                    height: \"50px\",\n                    backgroundSize: \"cover\",\n                    backgroundPosition: \"center center\",\n                    backgroundImage: `url(https://${node.Domains[0]}:5000/api/Files/${node.Photo})`,\n                    backgroundRepeat: \"no-repeat\",\n                    borderRadius: \"100%\",\n                    flexShrink: 0\n                  }\n                  return (\n                    <Option key={i} value={node.Id}>\n                      <div className='node_photo' style={nodePhoto}></div>\n                      <div className='node_fields'>\n                        <div><span className='node_field'>Имя: </span><span>{node.Name}</span></div>\n                        <div><span className='node_field'>Тэг: </span><span>{node.Tag}</span></div>\n                        <div><span className='node_field'>Страна: </span><span>{node.Country}</span></div>\n                      </div>\n                    </Option>\n                  )\n                })}\n              </Select>\n            </div>\n            <Form className=\"login-form\">\n              {\n                showRegButton ? \n                  <>\n                    <div className=\"verify-text\">{`Мы отправили вам код подтверждения на ваш ${phone ? 'телефон' : 'email'}, пожалуйста введите его в поле ниже и завершите регистрацию`}</div>\n                    <Form.Item\n                      validateStatus={verifyCodeErr ? \"error\" : \"\"}\n                      help={verifyCodeErr || \"\"}\n                    >\n                      <Input placeholder=\"Код\" value={verifyCode} onChange={handleSetVerifyCode} />\n                    </Form.Item>\n                    <Form.Item>\n                      <Row>\n                        <Col style={{ textAlign: \"center\" }}>\n                          <Button\n                            type=\"primary\"\n                            onClick={handleRegistration}\n                            loading={btnLoader}\n                          >\n                            Зарегистрироваться\n                          </Button>\n                        </Col>\n                      </Row>\n                    </Form.Item>\n                  </>\n                :\n                  <>\n                    <Form.Item\n                      validateStatus={nameErr ? \"error\" : \"\"}\n                      help={nameErr || \"\"}\n                    >\n                      <Input placeholder=\"Имя\" onChange={handleSetName} />\n                    </Form.Item>\n                    <Form.Item validateStatus=\"\">\n                      <Input placeholder=\"Фамилия\" onChange={handleSetSurname} />\n                    </Form.Item>\n                    {\n                      activeNode ? \n                        activeNode.RegistrationMethod === 1 ?\n                          <Form.Item\n                            validateStatus={contactsErr || phoneErr ? \"error\" : \"\"}\n                            help={contactsErr || phoneErr || \"\"}\n                          >\n                            <Input addonBefore=\"+\" inputMode=\"tel\" type=\"phone\" placeholder=\"Номер телефона\" value={phone} disabled={email.length ? true : false} onChange={handleSetPhone} />\n                          </Form.Item>\n                        : activeNode.RegistrationMethod === 2 ? \n                            <Form.Item\n                              validateStatus={contactsErr || emailErr ? \"error\" : \"\"}\n                              help={contactsErr || emailErr || \"\"}\n                            >\n                              <Input inputMode=\"email\" type=\"email\" placeholder=\"Email\" disabled={phone.length ? true : false} onChange={handleSetEmail} />\n                            </Form.Item>\n                        :\n                          <>\n                            <Form.Item\n                              validateStatus={contactsErr || phoneErr ? \"error\" : \"\"}\n                              help={contactsErr || phoneErr || \"\"}\n                            >\n                              <Input addonBefore=\"+\" inputMode=\"tel\" type=\"phone\" placeholder=\"Номер телефона\" value={phone} disabled={email.length ? true : false} onChange={handleSetPhone} />\n                            </Form.Item>\n                            <div className=\"verify-text\"><span>или</span></div>\n                            <Form.Item\n                              validateStatus={contactsErr || emailErr ? \"error\" : \"\"}\n                              help={contactsErr || emailErr || \"\"}\n                            >\n                              <Input inputMode=\"email\" type=\"email\" placeholder=\"Email\" disabled={phone.length ? true : false} onChange={handleSetEmail} />\n                            </Form.Item>\n                          </>\n                      : null\n                    }\n                    <Form.Item>\n                      <Row>\n                        <Col style={{ textAlign: \"center\" }}>\n                          <Button\n                            type=\"primary\"\n                            onClick={() => getVerifyCode()}\n                            disabled={name && phone || email ? false : true}\n                            htmlType=\"submit\"\n                          >\n                            Получить код\n                          </Button>\n                        </Col>\n                      </Row>\n                    </Form.Item>\n                  </>\n              }\n            </Form>\n          </div>\n        </div>\n      </Col>\n    </Row>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    nodes: state.node.allNodes\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {}\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Registration)","export function setAuth(auth) {\n  return {\n    type: \"SET_AUTH\",\n    auth\n  }\n}\n","/* eslint-disable */\nimport React, { Component } from \"react\"\nimport { Row, Col, Button, Form, Input, Icon, message } from \"antd\"\nimport { Redirect } from \"react-router-dom\"\nimport { connect } from \"react-redux\"\nimport { setAuth } from \"../actions/auth\"\nimport { setPrevPath } from \"../actions/path\"\nimport socket from \"../transport/Connect\"\nimport helpers from \"../helpers\"\n\nclass Verify extends Component {\n  constructor() {\n    super()\n    this.state = {\n      verifyUid: null,\n      verifyErr: null,\n      verifyRequestSended: false,\n      verifyCode: null,\n      verifyCodeErr: null,\n      btnPreloader: false,\n      redirect: false\n    }\n  }\n\n  componentDidMount() {\n    socket.onMessageAuth = data => {\n      this.setState({\n        btnPreloader: false\n      })\n\n      if (data.ErrorCode != 0 && data.ErrorCode != 1) {\n        if(data.ErrorCode === 18){\n          let errMessage = JSON.parse(data.Message)\n          if(errMessage.Phone) {\n            // setPhoneErr(errMessage.Phone)\n          } else if(errMessage.Email) {\n            this.setState({\n              verifyErr: errMessage.Email\n            })\n          }\n        } else {\n          // message.warning(data.Message)\n        }\n\n        // this.setState({\n        //   verifyErr: data.Message\n        // })\n      } else if (data.ResponseType === 10) {\n        this.setState({\n          verifyRequestSended: true\n        })\n      } else if (data.ResponseType === 6) {\n        localStorage.setItem(\"FileAccessToken\", data.FileAccessToken)\n        localStorage.setItem(\"AccessToken\", data.Token.AccessToken)\n        localStorage.setItem(\"RefreshToken\", data.Token.RefreshToken)\n        localStorage.setItem(\"User\", JSON.stringify(data.User))\n\n        this.props.setAuth(\"AUTH_SUCCESS\")\n\n        this.setState({\n          redirect: true\n        })\n      }\n    }\n\n    // generate encrypt and sign geys and set the keys in localstorage\n    helpers.setKeysPair()\n  }\n\n  onChangePhone(e) {\n    if(this.props.verifyType === 'by-email') {\n      this.setState({\n        verifyUid: e.target.value,\n        verifyErr: null\n      })\n    } else if (this.props.verifyType === 'by-phone') {\n      const reg = /^-?\\d*(\\.\\d*)?$/\n      if ((!isNaN(e.target.value) && reg.test(e.target.value)) || e.target.value === '' || e.target.value === '-') {\n        this.setState({\n          verifyUid: e.target.value,\n          verifyErr: null\n        })\n      }\n    } \n  }\n\n  onChangeVerifCode(e) {\n    this.setState({\n      verifyCode: e.target.value,\n      verifyCodeErr: null\n    })\n  }\n\n  getOS() {\n    if (navigator.appVersion.indexOf('Windows') >= 0) return 'Windows'\n    else if (navigator.appVersion.indexOf('Android') >= 0) return 'Android'\n    else if (navigator.appVersion.indexOf('Mac') >= 0) return 'MacOS'\n    else return \"unknown\"\n  }\n\n  getDevice() {\n    if (navigator.userAgent.indexOf(\"Android\") >= 0) return \"Phone\"\n    else if (navigator.userAgent.indexOf(\"webOS\") >= 0) return \"webOS\"\n    else if (navigator.userAgent.indexOf(\"iPhone\") >= 0) return \"iPhone\"\n    else if (navigator.userAgent.indexOf(\"iPad\") >= 0) return \"iPad\"\n    else if (navigator.userAgent.indexOf(\"iPod\") >= 0) return \"iPod\"\n    else return \"PC\"\n  }\n\n  sendverifyCode(e) {\n    e.preventDefault()\n\n    this.setState({\n      btnPreloader: true\n    })\n\n    const data = {\n      Uid: this.props.verifyType === 'by-email' ? this.state.verifyUid : `+${this.state.verifyUid}`,\n      VCode: this.state.verifyCode,\n      LoginType: 1,\n      UidType: this.props.verifyType === 'by-email' ? 2 : this.props.verifyType === 'by-phone' ? 0 : 0,\n      DeviceName: helpers.getDevice(),\n      OSName: helpers.getOS(),\n      AppName: \"Y messenger - WEB\",\n      RequestId: socket.makeId(),\n      RequestType: 33,\n      Type: 0\n    }\n\n    socket.send(data)\n  }\n\n  sendVerificationQuery(e) {\n    e.preventDefault()\n\n    const sendVerifyRequest = () => {\n      this.setState({\n        btnPreloader: true\n      })\n  \n      const data = {\n        VerificationType: this.props.verifyType === 'by-email' ? 1 : this.props.verifyType === 'by-phone' ? 0 : 0,\n        Uid: this.props.verifyType === 'by-email' ? this.state.verifyUid : `+${this.state.verifyUid}`,\n        RequestId: socket.makeId(),\n        RequestType: 42,\n        Type: 0\n      }\n\n      socket.send(data)\n    }\n\n    if(this.props.verifyType === 'by-email') {\n      const validateEmail = email => {\n        var re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return re.test(email);\n      }\n  \n      if (!validateEmail(this.state.verifyUid)) {\n        this.setState({\n          verifyErr: 'Некорректный email адрес'\n        })\n      } else {\n        sendVerifyRequest()\n        this.setState({\n          verifyErr: null\n        })\n      }\n    } else if (this.props.verifyType === 'by-phone') {\n      if (this.state.verifyUid.length > 0 && this.state.verifyUid.length != 11) {\n        this.setState({\n          verifyErr: 'Номер должен состоять из 11 цифр'\n        })\n      } else {\n        sendVerifyRequest()\n      }\n    }\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return <Redirect to=\"/\" />\n    } else {\n      return (\n        <Row\n          type=\"flex\"\n          align=\"middle\"\n          justify=\"center\"\n          style={{ height: \"100vh\" }}\n        >\n          <Col>\n            <div className=\"auth__type\">\n              <div className=\"modal_back\" onClick={() => this.props.setPrevPath()}><Icon type=\"arrow-left\" /></div>\n              <h1>Вход</h1>\n              {!this.state.verifyRequestSended ? (\n                <div>\n                  <h2>\n                    {this.props.verifyType === 'by-email' ? 'Введите ваш email' : this.props.verifyType === 'by-phone' ? 'Введите номер телефона' : ''}\n                  </h2>\n                  <Form className=\"login-form\">\n                    <Form.Item\n                      validateStatus={this.state.verifyErr ? \"error\" : \"\"}\n                      help={this.state.verifyErr ? this.state.verifyErr : \"\"}\n                    >\n                      <Input\n                        autoFocus\n                        addonBefore={this.props.verifyType === 'by-phone' ? '+' : false}\n                        inputMode={this.props.verifyType === 'by-email' ? 'email' : this.props.verifyType === 'by-phone' ? 'tel' : ''}\n                        placeholder={this.props.verifyType === 'by-email' ? 'Ваш email' : this.props.verifyType === 'by-phone' ? 'Ваш номер телефона' : ''}\n                        onChange={this.onChangePhone.bind(this)}\n                        value={this.state.verifyUid}\n                        type={this.props.verifyType === 'by-email' ? 'email' : this.props.verifyType === 'by-phone' ? 'phone' : ''}\n                      />\n                    </Form.Item>\n                    <Form.Item>\n                      <Row>\n                        <Col style={{ textAlign: \"center\" }}>\n                          <Button\n                            type=\"primary\"\n                            onClick={this.sendVerificationQuery.bind(this)}\n                            disabled={!this.state.verifyUid}\n                            loading={!!this.state.btnPreloader}\n                            htmlType=\"submit\"\n                          >\n                            Получить {this.props.verifyType === 'by-email' ? 'письмо' : this.props.verifyType === 'by-phone' ? 'SMS' : ''} с кодом\n                          </Button>\n                        </Col>\n                      </Row>\n                    </Form.Item>\n                  </Form>\n                </div>\n              ) : (\n                <div>\n                  <h2>Код подтверждения из {this.props.verifyType === 'by-email' ? 'письма' : this.props.verifyType === 'by-phone' ? 'SMS' : ''}</h2>\n                  <p>\n                    Мы отправили {this.props.verifyType === 'by-email' ? 'письмо ' : this.props.verifyType === 'by-phone' ? ' SMS ' : ''} \n                    на {this.props.verifyType === 'by-email' ? `email ${this.state.verifyUid}` : this.props.verifyType === 'by-phone' ? `номер +${this.state.verifyUid}` : ''}. Введите\n                    полученый код в поле ниже\n                  </p>\n                  <Form\n                    onSubmit={this.sendverifyCode.bind(this)}\n                    className=\"login-form\"\n                  >\n                    <Form.Item\n                      validateStatus={this.state.verifyCodeErr ? \"error\" : \"\"}\n                      help={this.state.verifyCodeErr ? this.state.verifyCodeErr : \"\"}\n                    >\n                      <Input\n                        autoFocus\n                        inputMode='tel'\n                        placeholder={`Код из ${this.props.verifyType === 'by-email' ? 'письма' : this.props.verifyType === 'by-phone' ? 'SMS' : ''}, 4 цифры`}\n                        onChange={this.onChangeVerifCode.bind(this)}\n                      />\n                    </Form.Item>\n                    <Form.Item>\n                      <Row>\n                        <Col style={{ textAlign: \"center\" }}>\n                          <Button\n                            type=\"primary\"\n                            htmlType=\"submit\"\n                            disabled={!this.state.verifyCode}\n                            loading={!!this.state.btnPreloader}\n                          >\n                            Войти\n                          </Button>\n                        </Col>\n                      </Row>\n                    </Form.Item>\n                  </Form>\n                </div>\n              )}\n            </div>\n          </Col>\n        </Row>\n      )\n    }\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    verifyType: state.path.currentPath\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setAuth: auth => dispatch(setAuth(auth)),\n    setPrevPath: () => dispatch(setPrevPath())\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Verify)\n","import { getFormatedMessages } from \"./Message\"\nimport {\n  getFormatedDialogs,\n  getFormatedChats,\n  getActiveDialog\n} from \"./Dialog\"\nimport {\n  getFormatedUser,\n  getFormatedChatsUsers,\n  getUserById,\n  getUserInitials,\n  getUserName\n} from \"./User\"\n\nexport default {\n  getFormatedMessages,\n  getFormatedDialogs,\n  getFormatedChats,\n  getFormatedChatsUsers,\n  getFormatedUser,\n  getUserById,\n  getUserInitials,\n  getActiveDialog,\n  getUserName\n}\n","// eslint-disable-next-line\nexport function getFormatedMessages(messages) {\n  const mess = []\n  messages.forEach(message => {\n    const tempMess = {\n      Attachments: message.Attachments,\n      ConversationId: message.ConversationId,\n      ConversationType: message.ConversationType,\n      GlobalId: message.GlobalId,\n      Read: message.Read,\n      SenderId: message.SenderId,\n      SendingTime: message.SendingTime,\n      Text: message.Text\n    }\n    mess.push(tempMess)\n  })\n\n  return mess\n}\n","// eslint-disable-next-line\nexport function getFormatedDialogs(data) {\n  const dialogs = []\n  data.forEach(dialog => {\n    const tempDialogs = {\n      AttachmentType: dialog.AttachmentType,\n      ConversationId: dialog.ConversationId,\n      ConversationType: dialog.ConversationType,\n      IsMuted: dialog.IsMuted,\n      LastMessageId: dialog.LastMessageId,\n      LastMessageSenderId: dialog.LastMessageSenderId,\n      LastMessageSenderName: dialog.LastMessageSenderName,\n      LastMessageTime: dialog.LastMessageTime,\n      Photo: dialog.Photo,\n      PreviewText: dialog.PreviewText,\n      Read: dialog.Read,\n      SecondUid: dialog.SecondUid,\n      Title: dialog.Title,\n      UnreadedCount: dialog.UnreadedCount\n    }\n    dialogs.push(tempDialogs)\n  })\n\n  return dialogs\n}\n\nexport function getFormatedChats(data) {\n  const chats = []\n  data.forEach(chat => {\n    const tempChat = {\n      About: chat.About,\n      Id: chat.Id,\n      Key: chat.Key,\n      Name: chat.Name,\n      NodesId: chat.NodesId,\n      Photo: chat.Photo,\n      Public: chat.Public,\n      Security: chat.Security,\n      Tag: chat.Tag,\n      Type: chat.Type,\n      Users: chat.Users,\n      Visible: chat.Visible\n    }\n    chats.push(tempChat)\n  })\n\n  return chats\n}\n\nexport function getActiveDialog(dialogs) {\n  const dialog = dialogs.find(dialog => dialog.active)\n\n  return dialog\n}\n","// eslint-disable-next-line\nexport function getFormatedUser(data) {\n  const users = []\n  data.forEach(user => {\n    const tempUser = {\n      About: user.About,\n      Birthday: user.Birthday,\n      BlackList: user.BlackList,\n      City: user.City,\n      Confirmed: user.Confirmed,\n      Contact: user.Contact,\n      ContactsPrivacy: user.ContactsPrivacy,\n      Country: user.Country,\n      Emails: user.Emails,\n      Encryption: user.Encryption,\n      Groups: user.Groups,\n      Id: user.Id,\n      Keys: user.Keys,\n      Language: user.Language,\n      NameFirst: user.NameFirst,\n      NameSecond: user.NameSecond,\n      NodeId: user.NodeId,\n      Online: user.Online,\n      Phones: user.Phones,\n      Photo: user.Photo,\n      RegistrationDate: user.RegistrationDate,\n      Security: user.Security,\n      Tag: user.Tag,\n      Visible: user.Visible\n    }\n    users.push(tempUser)\n  })\n\n  return users\n}\n\nexport function getFormatedChatsUsers(data) {\n  const users = []\n  data.forEach(user => {\n    const tempUser = {\n      Banned: user.Banned,\n      ChatId: user.ChatId,\n      Deleted: user.Deleted,\n      InviterId: user.InviterId,\n      IsMuted: user.IsMuted,\n      Joined: user.Joined,\n      UserId: user.UserId,\n      UserInfo: user.UserInfo,\n      UserRole: user.UserRole\n    }\n    users.push(tempUser)\n  })\n\n  return users\n}\n\nexport function getUserById(id, users) {\n  const foundUser = users.find(user => user.Id + '' === id + '')\n  return foundUser\n}\n\nexport function getUserInitials(item) {\n  // console.log(dialog)\n  if (!item.Photo) {\n    let initials = \"\"\n\n    if (item.Title || item.ChannelName || item.Name) {\n      let defaultAva = item.Title || item.ChannelName || item.Name\n      defaultAva = defaultAva.replace(/ +/g, \" \").trim()\n      defaultAva = defaultAva.split(\" \", 2)\n\n      if (defaultAva[0]) {\n        initials = defaultAva[0][0]\n      }\n      if (defaultAva[1]) {\n        initials += defaultAva[1][0]\n      }\n    } else if (item.NameFirst) {\n      initials = item.NameFirst[0]\n      if (item.NameSecond) {\n        initials = initials + item.NameSecond[0]\n      }\n    } else {\n      let uid = item.SecondUid || item.Id\n      uid = uid + \"\"\n      initials = uid.substr(0, 2)\n    }\n\n    return initials\n  }\n}\n\nexport function getUserName(item, contacts) {\n  if (item && contacts) {\n    let name = \"\"\n    const userId = item.SecondUid || item.Id\n    const contact = contacts.find(user => user.ContactUserId === userId)\n    if (contact) {\n      if (contact.Name) {\n        name = contact.Name\n      }\n    } else if (item.Title || item.ChannelName || item.Name) {\n      name = item.Title || item.ChannelName || item.Name\n    } else if (item.NameFirst || item.NameSecond) {\n      name = `${item.NameFirst} ${item.NameSecond}`\n    } else {\n      name = \"Имя скрыто\"\n    }\n\n    return name\n  }\n}\n","/* eslint-disable */\nimport React, { Component } from \"react\"\nimport { NavLink } from \"react-router-dom\"\nimport { connect } from \"react-redux\"\nimport { openDialog } from \"../actions/dialogs\"\nimport selectors from \"../selectors\"\n\nclass SidebarItem extends Component {\n  constructor() {\n    super()\n    this.state = {\n      defaultAva: \"\"\n    }\n  }\n\n  componentDidMount() {\n    // cut the line with the last message (not css because 2 lines)\n    const size = 60\n    const newsContent = this.refs.messageText\n    const newsText = newsContent.innerText\n\n    if (newsText.length > size) {\n      newsContent.innerText = newsText.slice(0, size) + \" ...\"\n    }\n\n    // set initials to the state if there is no avatar\n    if (!this.props.dialog.Photo) {\n      this.setState({\n        defaultAva: selectors.getUserInitials(this.props.dialog)\n      })\n    }\n  }\n\n  openDialog() {\n    const payload = {}\n    payload.type = this.props.type\n    payload.data = this.props.dialog\n    this.props.openDialog(payload)\n  }\n\n  render() {\n    // console.log(selectors.getUserName(this.props.dialog, this.props.contacts.users))\n    const avatarStyle = {\n      width: \"100%\",\n      height: \"100%\",\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center center\",\n      backgroundImage: `url(https://${this.props.node}:5000/api/Files/${this.props.dialog.Photo})`,\n      backgroundRepeat: \"no-repeat\"\n    }\n\n    // const defaultAvaBg = {\n    //   background: `hsl(${this.props.dialog.SecondUid}, 90%, 90%)`\n    // }\n\n    return (\n      <NavLink to={\"/\"} onClick={() => this.openDialog()}>\n        <div className=\"sidebar__item\">\n          <div className=\"sidebar__ava\">\n            {this.props.dialog.UnreadedCount > 0 ? (\n              <div className=\"sidebar__badge\">\n                {this.props.dialog.UnreadedCount}\n              </div>\n            ) : null}\n            <div className=\"sidebar__photo\">\n              {\n                this.props.dialog.Photo ?\n                  this.props.dialog.Photo.length > 0 ? \n                    <div style={avatarStyle} />\n                  : null\n                : \n                  <div className=\"sidebar__photo-default avatar-default\">\n                    {this.state.defaultAva}\n                  </div>\n              }\n            </div>\n          </div>\n          <div>\n            <div className=\"sidebar__name\">\n              {\n                this.props.type === 'user' ? \n                  <span>{this.props.dialog.Title || this.props.dialog.NameFirst + \" \" + this.props.dialog.NameSecond || this.props.dialog.ChannelName || this.props.dialog.Name || 'Имя скрыто'}</span>\n                : \n                  <span>{selectors.getUserName(this.props.dialog, this.props.contacts.users)}</span>\n              }\n            </div>\n            <div className=\"sidebar__message\" ref=\"messageText\">\n              {\n                this.props.dialog.PreviewText ? this.props.dialog.PreviewText :\n                this.props.dialog.AttachmentType ===  1 ? 'Файл' :\n                this.props.dialog.AttachmentType ===  2 ? 'Изображение' :\n                this.props.dialog.AttachmentType ===  4 ? 'Зашифрованное сообщение' :\n                this.props.dialog.AttachmentType ===  5 ? 'Пересланное сообщение' :\n                this.props.dialog.AttachmentType ===  6 ? 'Симметричный ключ шифрования' :\n                this.props.dialog.About ? this.props.dialog.About : null\n              }\n            </div>\n          </div>\n        </div>\n      </NavLink>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    node: state.node.activeNode.Domains[0],\n    contacts: state.contacts\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    openDialog: dialogId => dispatch(openDialog(dialogId))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SidebarItem)\n","/* eslint-disable */\nimport React from \"react\"\nimport { connect } from \"react-redux\"\nimport logo from \"../assets/logo.PNG\"\nimport { toggleDrawer } from \"../actions/ui\"\nimport { Icon } from 'antd';\n\nfunction HeadSidebar(props) {\n  return (\n    <div className=\"head-sidebar\">\n      <Icon type=\"menu\" className='menu-btn' onClick={() => props.toggleDrawer()} />\n      <div className=\"head-sidebar__logo\">\n        <img src={logo} alt=\"Y Messenger\" />\n      </div>\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {}\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    toggleDrawer: () => dispatch(toggleDrawer())\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HeadSidebar)","import React from \"react\"\nimport { connect } from \"react-redux\"\nimport { Input } from \"antd\"\nimport { searchStart, searchEnd } from \"../actions/search\"\nimport socket from \"../transport/Connect\"\n\nconst { Search } = Input\n\nfunction SearchComponent(props) {\n  const searchDialogs = value => {\n    const text = value.target.value || value\n    // both text and event can come into function\n    if (typeof text === \"string\") {\n      if (text.length) {\n        props.searchStart(text.toLowerCase())\n\n        const searchRequest = {\n          RequestType: 46,\n          SearchQuery: text,\n          RequestId: socket.makeId(),\n          Direction: true,\n          Type: 0\n        }\n\n        socket.send(searchRequest)\n      } else {\n        props.searchEnd()\n      }\n    } else {\n      props.searchEnd()\n    }\n  }\n\n  return (\n    <div className=\"search\">\n      <Search\n        placeholder=\"Поиск\"\n        onSearch={searchDialogs}\n        onChange={searchDialogs}\n        enterButton\n      />\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    search: state.ui.search\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    searchStart: data => dispatch(searchStart(data)),\n    searchEnd: () => dispatch(searchEnd())\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchComponent)\n","export function searchResultReceived(searchResult) {\n  return {\n    type: \"SEARCH_RESULT_RECEIVED\",\n    searchResult\n  }\n}\n\nexport function searchStart(text) {\n  return {\n    type: \"SEARCH_START\",\n    text\n  }\n}\n\nexport function searchEnd() {\n  return {\n    type: \"SEARCH_END\"\n  }\n}\n","/* eslint-disable */\nimport React, { useState, useEffect } from \"react\"\nimport { connect } from \"react-redux\"\nimport SidebarItem from \"./SidebarItem\"\nimport HeadSidebar from \"./HeadSidebar\"\nimport Search from \"./Search\"\nimport { Spin } from 'antd'\nimport { openDialog } from \"../actions/dialogs\"\nimport socket from \"../transport/Connect\"\n\nfunction Sidebar(props) {\n  const [localFoundDialogs, setLocalFoundDialogs] = useState([])\n\n  useEffect(() => {\n    if (props.search) {\n      const searchDialogs = props.dialogs.filter(dialog => {\n        if (!dialog.fake) {\n          if (dialog.Title) {\n            return dialog.Title.toLowerCase().indexOf(props.search) >= 0\n          }\n        }\n      })\n      setLocalFoundDialogs(searchDialogs)\n    } else {\n      setLocalFoundDialogs(props.dialogs)\n    }\n  }, [props.search, props.dialogs])\n\n  const showSidebarItem = () => {\n    return localFoundDialogs.map(dialog => {\n      if(dialog && !dialog.fake){\n        return <SidebarItem dialog={dialog} key={socket.makeId()} type='dialog' />\n      }\n    })\n  }\n\n  const showSearchResultChannels = () => {\n    if (props.searchResult.channels) {\n      return props.searchResult.channels.map((dialog, i) => {\n        if(dialog){\n          if (i === 0) {\n            return (\n              <div key={socket.makeId()}>\n                <div className=\"sidebar__title\">Каналы:</div>\n                <SidebarItem dialog={dialog} type=\"channel\" />\n              </div>\n            )\n          } else {\n            return (\n              <SidebarItem dialog={dialog} type=\"channel\" key={socket.makeId()} />\n            )\n          }\n        }\n      })\n    }\n  }\n\n  const showSearchResultChats = () => {\n    if (props.searchResult.chats) {\n      return props.searchResult.chats.map((dialog, i) => {\n        if(dialog){\n          if (i === 0) {\n            return (\n              <div key={socket.makeId()}>\n                <div className=\"sidebar__title\">Чаты:</div>\n                <SidebarItem dialog={dialog} type=\"chat\" />\n              </div>\n            )\n          } else {\n            return (\n              <SidebarItem dialog={dialog} type=\"chat\" key={socket.makeId()} />\n            )\n          }\n        }\n      })\n    }\n  }\n\n  const showSearchResultUsers = () => {\n    if (props.searchResult.users) {\n      return props.searchResult.users.map((dialog, i) => {\n        if(dialog){\n          if (i === 0) {\n            return (\n              <div key={socket.makeId()}>\n                <div className=\"sidebar__title\">Пользователи:</div>\n                <SidebarItem dialog={dialog} type=\"user\" />\n              </div>\n            )\n          } else {\n            return (\n              <SidebarItem dialog={dialog} type=\"user\" key={socket.makeId()} />\n            )\n          }\n        }\n      })\n    }\n  }\n\n  return (\n    <div className=\"sidebar\">\n      <HeadSidebar />\n      <Search />\n      <div className=\"sidebar-viewport\">\n        {showSidebarItem()}\n        {props.searchResult ? showSearchResultUsers() : null}\n        {props.searchResult ? showSearchResultChats() : null}\n        {props.searchResult ? showSearchResultChannels() : null}\n      </div>\n        {\n          props.socketReconnect ? \n            <div className='socket_reconnect'>\n              <Spin size=\"small\" />\n              {props.socketReconnect}\n            </div>\n          : null\n        }\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    dialogs: state.dialogs,\n    search: state.ui.search,\n    searchResult: state.searchResult,\n    socketReconnect: state.ui.socketReconnect\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    openDialog: dialogId => dispatch(openDialog(dialogId))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Sidebar)\n","/* eslint-disable */\nimport React from \"react\"\nimport { connect } from \"react-redux\"\nimport selectors from \"../selectors\"\n\nfunction Avatar(props) {\n  const avatarStyle = {\n    width: \"100%\",\n    height: \"100%\",\n    backgroundSize: \"cover\",\n    backgroundPosition: \"center center\",\n    backgroundImage: `url(https://${props.node}:5000/api/Files/${props.user.Photo})`,\n    backgroundRepeat: \"no-repeat\",\n    borderRadius: \"100%\"\n  }\n\n  return (\n    <div className=\"avatar\">\n      {\n        props.user.Photo ? \n          <div style={avatarStyle}></div>\n        :\n          <div className=\"avatar-default\">\n            {selectors.getUserInitials(props.user)}\n          </div>\n      }\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    node: state.node.activeNode.Domains[0]\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {}\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Avatar)\n","/* eslint-disable */\nimport React, { useState, useEffect } from \"react\"\nimport { connect } from \"react-redux\"\nimport ReactTimeAgo from \"react-time-ago\"\nimport JavascriptTimeAgo from \"javascript-time-ago\"\nimport ru from \"javascript-time-ago/locale/ru\"\nimport { Icon, Switch } from \"antd\"\nimport socket from \"../transport/Connect\"\nimport { openProfile } from \"../actions/ui\"\nimport { closeDialog, toggleCryptoMode } from \"../actions/dialogs\"\nimport selectors from \"../selectors\"\nimport Avatar from \"./Avatar\"\n\nJavascriptTimeAgo.locale(ru)\n\nfunction HeadDialog(props) {\n  const [dialog, setDialog] = useState(null)\n  const [defaultAva, setDefaultAva] = useState(\"\")\n  const [user, setUser] = useState(null)\n  const [windowWidth, setWindowWidth] = useState(document.body.clientWidth)\n\n  useEffect(() => {}, [windowWidth])\n\n  window.onresize = () => {\n    setWindowWidth(document.body.clientWidth)\n  }\n\n  useEffect(() => {\n    if (props.users && dialog) {\n      const user = props.users.find(user => user.Id === dialog.SecondUid)\n      setUser(user)\n    }\n  }, [props.users, dialog])\n\n  useEffect(() => {\n    props.dialogs.forEach(dialog => {\n      if (dialog.active) {\n        setDialog(dialog)\n      }\n    })\n  }, [props.dialogs])\n\n  useEffect(() => {\n    if (dialog) {\n      // console.log(dialog)\n      // set initials to the state if there is no avatar\n      if (!dialog.Photo) {\n        setDefaultAva(selectors.getUserInitials(dialog))\n      }\n    }\n  }, [dialog])\n\n  const logout = () => {\n    const logout = {\n      Full: false,\n      AccessToken: localStorage.getItem(\"AccessToken\"),\n      RequestType: 34,\n      RequestId: socket.makeId(),\n      Type: 0\n    }\n\n    socket.send(logout)\n\n    localStorage.removeItem(\"AccessToken\")\n    localStorage.removeItem(\"FileAccessToken\")\n    localStorage.removeItem(\"RefreshToken\")\n    localStorage.removeItem(\"User\")\n\n    window.location.replace(\"/\")\n  }\n\n  const handleOpenProfile = () => {\n    props.openProfile(dialog)\n  }\n\n  return (\n    <div className=\"head-dialog\">\n      {windowWidth <= 675 && selectors.getActiveDialog(props.dialogs) ? (\n        <div className=\"head-dialog__back\" onClick={props.closeDialog} >\n          <Icon type=\"left\" />\n        </div>\n      ) : null}\n      <div className=\"head-dialog__user\" onClick={handleOpenProfile}>\n        <div className=\"head-dialog__ava\">\n          {/* {dialog ? (\n            dialog.Photo ? (\n              <div\n                style={{\n                  width: \"100%\",\n                  height: \"100%\",\n                  backgroundSize: \"cover\",\n                  backgroundPosition: \"center center\",\n                  backgroundImage: `url(https://${props.node}:5000/api/Files/${dialog.Photo})`,\n                  backgroundRepeat: \"no-repeat\"\n                }}\n              />\n            ) : (\n              <div className=\"head-dialog__photo-default avatar-default\">{defaultAva}</div>\n            )\n          ) : null} */}\n          {\n            dialog ? \n              <Avatar user={dialog} />\n            : null\n          }\n        </div>\n        <div>\n          {dialog ? <div className=\"head-dialog__name\">{selectors.getUserName(dialog, props.contacts.users)}</div> : null}\n          <div className=\"head-dialog__status\">\n            {user ?\n              user.Online ? \n                <ReactTimeAgo date={user.Online * 1000} locale=\"ru\" />\n              : null\n            : null}\n          </div>\n        </div>\n      </div>\n      {\n        dialog ? \n          dialog.ConversationType === 1 ?\n            <div className='switch-label'>\n              <div>Секретный чат</div>\n              <Switch checked={dialog.isCrypto} onChange={value => props.toggleCryptoMode({dialog: dialog, isCrypto: value})} />\n            </div>\n          : null\n        : null\n      }\n      {/* <div className='head__lock'>\n        <LockIcon />\n      </div> */}\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    dialogs: state.dialogs,\n    users: state.users,\n    node: state.node.activeNode.Domains[0],\n    contacts: state.contacts\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    openProfile: data => dispatch(openProfile(data)),\n    closeDialog: () => dispatch(closeDialog()),\n    toggleCryptoMode: (data) => dispatch(toggleCryptoMode(data))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HeadDialog)\n","export function setCallbackId(id) {\n  return {\n    type: \"SET_CALLBACK_ID\",\n    id\n  }\n}\n\nexport function setCallbackData(response) {\n  return {\n    type: \"SET_CALLBACK_DATA\",\n    response\n  }\n}\n","export function setSymmetricKey(symmetricKey) {\n  return {\n    type: \"SET_SYMMETRIC_KEY\",\n    symmetricKey\n  }\n}\n\nexport function setSymmetricKeyForDecrypt(symmetricKeyForDecrypt) {\n  return {\n    type: \"SET_SYMMETRIC_KEY_FOR_DECRYPT\",\n    symmetricKeyForDecrypt\n  }\n}\n\nexport function setPublicKeys(publicKeys) {\n  return {\n    type: \"SET_PUBLIC_KEYS\",\n    publicKeys\n  }\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", {\n  id: \"check\"\n}, React.createElement(\"polygon\", {\n  points: \"142.8,323.85 35.7,216.75 0,252.45 142.8,395.25 448.8,89.25 413.1,53.55  \"\n})));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref16 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref17 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar SvgTickIcon = function SvgTickIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"448.8px\",\n    height: \"448.8px\",\n    viewBox: \"0 0 448.8 448.8\",\n    style: {\n      enableBackground: \"new 0 0 448.8 448.8\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgTickIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/tick_icon.06277842.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", {\n  id: \"done-all\"\n}, React.createElement(\"path\", {\n  d: \"M448.8,161.925l-35.7-35.7l-160.65,160.65l35.7,35.7L448.8,161.925z M555.899,126.225l-267.75,270.3l-107.1-107.1 l-35.7,35.7l142.8,142.8l306-306L555.899,126.225z M0,325.125l142.8,142.8l35.7-35.7l-142.8-142.8L0,325.125z\"\n})));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref16 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref17 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar SvgDoubleTickIcon = function SvgDoubleTickIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"594.149px\",\n    height: \"594.149px\",\n    viewBox: \"0 0 594.149 594.149\",\n    style: {\n      enableBackground: \"new 0 0 594.149 594.149\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgDoubleTickIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/double_tick_icon.7319bcfe.svg\";\nexport { ForwardRef as ReactComponent };","/* eslint-disable */\nimport React, { useState, useEffect } from \"react\"\nimport { Modal, Icon } from \"antd\"\nimport { connect } from \"react-redux\"\nimport { NavLink, Redirect } from \"react-router-dom\"\nimport selectors from \"../selectors\"\nimport { forwardingMessage, openDialog, closeDialog } from \"../actions/dialogs\"\nimport { setCallbackId } from \"../actions/callbacks\"\nimport Avatar from \"./Avatar\"\nimport Crypto from \"y_crypto\"\nimport { setSymmetricKey, setSymmetricKeyForDecrypt } from \"../actions/keys\"\nimport helpers from \"../helpers\"\nimport socket from \"../transport/Connect\"\nimport JSONbig from \"json-bigint\"\nimport BigNumber from \"bignumber.js\"\nimport { ReactComponent as TickIcon } from \"../assets/tick_icon.svg\"\nimport { ReactComponent as DoubleTickIcon } from \"../assets/double_tick_icon.svg\"\n\nfunction Message(props) {\n  const [visible, setVisible] = useState(false)\n  const [messageTime, setMessageTime] = useState(\"\")\n  const [isContextMenuVisible, setSsContextMenuVisible] = useState(false)\n  // const [redirect, setRedirect] = useState(false)\n  const [decryptedMessage, setDecryptedMessage] = useState(null)\n  const [fileMsg, setFileMsg] = useState(false)\n  // const [encryptPublicKeyRequest, setEncryptPublicKeyRequest] = useState(null)\n  // const [signPublicKeyRequest, setSignPublicKeyRequest] = useState(null)\n  const user = selectors.getUserById(BigNumber(props.message.SenderId).toString(), props.users) || {}\n\n  const encoder = new TextEncoder()\n  const decoder = new TextDecoder()\n  const masterPassword = encoder.encode('qwerty')\n  let masterPasswordId = BigNumber(1)\n  const crypto = new Crypto(masterPassword, masterPasswordId)\n\n  useEffect(() => {\n    if (props.message) {\n      // we form message time\n      const timestamp = new Date(props.message.SendingTime * 1000)\n      const date = new Date()\n      date.setTime(timestamp)\n\n      let hour = `${date.getHours()}`\n      let minutes = `${date.getMinutes()}`\n\n      if (hour.length === 1) {\n        hour = `0${hour}`\n      }\n      if (minutes.length === 1) {\n        minutes = `0${minutes}`\n      }\n\n      setMessageTime(`${hour}:${minutes}`)\n    }\n  }, [props.message])\n\n  // useEffect(() => {\n  // console.log(props.publicKeys)\n  // }, [props.publicKeys])\n\n  const setLinks = text => {\n    let str = text\n    let reg = false\n    if (str) {\n      reg = str.match(/(http|https|ftp|ftps)\\:\\/\\/[a-zA-Z0-9\\-\\.]+\\.[a-zA-Z]{2,3}(\\/\\S*)?/g)\n    }\n    let k = 0\n    // console.log(reg);\n\t\tfor (k in reg){\n      // console.log(reg[k]);\n\t\t\tstr = str.replace(reg[k], ' <a href=\"' + reg[k] + '\" target=\"_blank\"> ' + reg[k] + ' </a> ')\n    }\n\n    return str\n    \n    // let mes_block = this.refs.textMessage;\n    // if (mes_block) {\n    //   mes_block.innerHTML = str\n    // }\n  }\n\n  function getForwardingUser(userId) {\n    const forwardingUser = props.users.find(user => user.Id === userId)\n    if (forwardingUser) {\n      if (forwardingUser.NameFirst || forwardingUser.NameSecond) {\n        return `${forwardingUser.NameFirst} ${forwardingUser.NameSecond}`\n      } else {\n        return 'Имя скрыто'\n      }\n    }\n  }\n\n  function showMessage(message) {\n    if (message.Attachments) {\n      if (message.Attachments.length) {\n        // MESSAGES WITH ATTACMENTS\n        // message with image\n        if (message.Attachments[0].Type === 2 && message.Attachments[0].Payload.FileId) {\n          // calculate image size to fix scroll position when loading new messages\n          let imgSize = {}\n          if (message.Attachments[0].Payload.ImageMetadata) {\n            imgSize = {\n              height: (message.Attachments[0].Payload.ImageMetadata.Height*150)/message.Attachments[0].Payload.ImageMetadata.Width\n            }\n          }\n          return (\n            <div className=\"message__img\" onClick={() => setVisible(true)} style={imgSize}>\n              <img\n                src={`https://${props.node}:5000/api/Files/` + message.Attachments[0].Payload.FileId}\n                alt=\"\"\n              />\n            </div>\n          )\n        } else if (message.Attachments[0].Type === 1) {\n          // message with file\n          if (message.Attachments[0].Payload) {\n            return (\n              <div className=\"message__content\">\n                <Icon type=\"download\" className=\"download-icon\" />\n                <a href={`https://${props.node}:5000/api/Files/` + message.Attachments[0].Payload.FileId} download>\n                  {message.Attachments[0].Payload.Filename}\n                </a>\n                <span dangerouslySetInnerHTML={{__html: setLinks(message.Text)}}></span>\n              </div>\n            )\n          }\n        } else if (message.Attachments[0].Type === 5) {\n          // Forwarded message\n          if (message.Attachments[0].Payload.length > 0) {\n            return (\n              <div className=\"forwarding_message message__content\">\n                {`Пересланное сообщение от `}\n                <NavLink to=\"/\" onClick={() => openDialog()}>\n                  {getForwardingUser(message.Attachments[0].Payload[0].SenderId)}\n                </NavLink>\n                <div dangerouslySetInnerHTML={{__html: setLinks(message.Attachments[0].Payload[0].Text)}} className=\"forward-message-text\"></div>\n                {\n                  message.Text ?\n                    <div dangerouslySetInnerHTML={{__html: setLinks(message.Text)}}></div>\n                  : null\n                }\n              </div>\n            )\n          } else {\n            return (\n              <div className=\"forwarding_message message__content\">\n                Пересланное сообщение от:\n                <div>Пересланное сообщение удалено</div>\n              </div>\n            )\n          }\n        } else if (message.Attachments[0].Type === 6) {\n          // message with symmetric key\n          // console.log(message)\n          // let foundPublicKey = null\n          let foundPublicSignKey = null\n          if (message.SenderId === props.user.Id) {\n            // console.log('out - ', JSONbig.stringify(message.Attachments[0].Payload.SignKeyId))\n            // console.log('out - ', message)\n            // console.log(props.symmetricKeysForDecrypt)\n          }\n          else {\n            // console.log('into - ', message)\n            // foundPublicKey = props.publicKeys.find(publicKey => JSONbig.stringify(publicKey.KeyId) === JSONbig.stringify(message.Attachments[0].Payload.KeyId))\n            foundPublicSignKey = props.publicKeys.find(publicKey => JSONbig.stringify(publicKey.KeyId) === JSONbig.stringify(message.Attachments[0].Payload.SignKeyId))\n\n            if (!foundPublicSignKey) {\n              // console.log(\"запршиваем ключ подписи\")\n              let requestId2 = socket.makeId()\n              // localStorage.setItem(\"encryptPublicKey\", requestId2)\n              // const getUserKeys2 = {\n              //   UserId: message.SenderId,\n              //   Direction: true,\n              //   KeysId: [JSONbig.stringify(message.Attachments[0].Payload.SignKeyId)],\n              //   RequestType: 105,\n              //   RequestId: requestId2,\n              //   Type: 0\n              // }\n              // socket.send(getUserKeys2)\n            }\n            else{\n              // console.log('rataa')\n              let keysPair = JSON.parse(localStorage.getItem(\"keysPair\"))\n              let privateKey = keysPair.find(key => JSONbig.stringify(key.id) === JSONbig.stringify(message.Attachments[0].Payload.KeyId))\n              if (privateKey) {\n                // console.log(privateKey)\n                crypto.setPublicSignKeyToRecive(helpers.base64ToBuffer(foundPublicSignKey.Data))\n                crypto.setPrivateEncryptKeyToRecive(helpers.base64ToBuffer(privateKey.private))\n  \n                crypto.decryptKeyMsg(helpers.base64ToBuffer(message.Attachments[0].Payload.EncryptedData)).then(data => {\n                  const symmetricKeyForDecrypt = props.symmetricKeysForDecrypt.find(key => key.idKey == data.idKey)\n                  // console.log('симметричный расшифрован - ', data)\n                  if (!symmetricKeyForDecrypt) {\n                    props.setSymmetricKeyForDecrypt(data)\n                  }\n                }).catch(err => {\n                  // console.log(err)\n                })\n              } else {\n                // console.log(\"Не найден приватный ключ\")\n              }\n            }\n          }\n        \n          \n\n          // if (message.Attachments[0].Payload.KeyId.toString().length < 15) {\n          // props.setSymmetricKeyForDecrypt(payload)\n          // }\n          // if (!props.symmetricKey) {\n            // props.setSymmetricKey(message.Attachments[0].Payload.EncryptedData)\n            // localStorage.setItem('keyID', message.Attachments[0].Payload.KeyId)\n          // }\n          return <div>Симметричный ключ шифрования</div>\n        } \n        else if (message.Attachments[0].Type === 4) {\n          // console.log(message)\n          // console.log(props.symmetricKeysForDecrypt)\n          // if (message.SenderId === props.user.Id) {\n          //   console.log('out - ', message)\n          //   console.log(props.symmetricKeysForDecrypt)\n          // }\n          // else {\n            // encrypted message\n            // console.log(message)\n            const symmetricKeyForDecrypt = props.symmetricKeysForDecrypt.find(key => key.idKey.toString() == JSONbig.stringify(message.Attachments[0].Payload.KeyId))\n            let failedDecryptMsg = false\n            // console.log(message.GlobalId, symmetricKeyForDecrypt)\n            if (symmetricKeyForDecrypt) {\n              // console.log(symmetricKeyForDecrypt)\n              const signKeyForDecrypt = props.publicKeys.find(key => JSONbig.stringify(key.KeyId) == JSONbig.stringify(message.Attachments[0].Payload.SignKeyId))\n              if (signKeyForDecrypt) {\n                // console.log(message)\n                // console.log(symmetricKeyForDecrypt)\n                // console.log(signKeyForDecrypt)\n                crypto.setSymmetricKey(typeof symmetricKeyForDecrypt.key === \"string\" ? helpers.base64ToBuffer(symmetricKeyForDecrypt.key) : symmetricKeyForDecrypt.key)\n                crypto.setPublicSignKeyToRecive(helpers.base64ToBuffer(signKeyForDecrypt.Data))\n                crypto.decryptSecretMsg(helpers.base64ToBuffer(message.Attachments[0].Payload.EncryptedData)).then(result => {\n                  if (Crypto.getMetaDataMsg(helpers.base64ToBuffer(message.Attachments[0].Payload.EncryptedData)).attach.type === 0) {\n                    setDecryptedMessage(decoder.decode(result.msg))\n                  } else {\n                    setFileMsg(true)\n                    setDecryptedMessage(\"Просмотр файлов доступен только в мобильной версии приложения\")\n                  }\n                  // console.log(message)\n                }).catch(err => {\n                  console.log(err)\n                  setDecryptedMessage(\"Зашифрованное сообщение\")\n                })\n              }\n              // console.log(symmetricKeyForDecrypt)\n              // const encoder2 = new TextEncoder()\n              // const decoder2 = new TextDecoder()\n              // const masterPassword2 = encoder.encode('qwerty')\n              // let masterPasswordId2 = BigInt(1)\n              // const crypto2 = new Crypto(masterPassword2, masterPasswordId2)\n            } else {\n              // console.log(\"Не удалось расшифровать сообщение\")\n              failedDecryptMsg = \"Зашифрованное сообщение\"\n              // setDecryptedMessage(\"Не удалось расшифровать сообщение\")\n            }\n            \n            return (\n              <div style={!decryptedMessage || fileMsg ? {fontStyle: \"italic\"} : null}>\n                {failedDecryptMsg ? failedDecryptMsg : decryptedMessage ? decryptedMessage : \"Сообщение расшифровывается...\"}\n              </div>\n            )\n          // }\n        } else {\n          // other types of messages\n          return <div style={{fontStyle: \"italic\"}}>*неподдерживаемый тип сообщения*</div>\n        }\n      } else {\n        // regular message with text\n        return message.Text ? (\n          <div dangerouslySetInnerHTML={{__html: setLinks(message.Text)}}></div>\n        ) : null\n      }\n    } else {\n      // regular message with text\n      return message.Text ? (\n        <div>{message.Text}</div>\n      ) : null\n    }\n  }\n\n  function showMessageMenu(message) {\n    if (!message.Attachments[0] || message.Attachments[0].Type === 1 || message.Attachments[0].Type === 2 || message.Attachments[0].Type === 5) {\n      setSsContextMenuVisible(!isContextMenuVisible)\n    }\n  }\n\n  const handleReplyToMessage = () => {\n    props.forwardingMessage(props.message)\n  }\n\n  const handleForwardMessage = () => {\n    props.forwardingMessage(props.message)\n    props.closeDialog()\n    // setRedirect(true)\n  }\n\n  const openDialog = () => {\n    const conversation = props.dialogs.find(dialog => dialog.ConversationId === props.message.Attachments[0].Payload[0].ConversationId && dialog.ConversationType === props.message.Attachments[0].Payload[0].ConversationType)\n    if (conversation) {\n      const payload = {}\n      payload.type = \"dialog\"\n      payload.data = conversation\n      props.openDialog(payload)\n    }\n  }\n\n  // if (redirect) {\n    // return <Redirect to=\"/\" />\n  // }\n  if (user && props.message) {\n    return (\n      <div\n        className={\n          user.currentUser\n            ? \"message message-out\"\n            : \"message message-in\"\n        }\n        id={props.message.GlobalId}\n        onClick={() => {showMessageMenu(props.message)}}\n        style={props.message && isContextMenuVisible ? { background: \"#ebf5ff\" } : null }\n      >\n        <div className=\"wrap-message-content\">\n          {!user.currentUser && props.message.ConversationType !== 3 ? <Avatar user={user} /> : null}\n          {\n            user.currentUser && props.message.Read ?\n              <DoubleTickIcon className='message__read' />\n            : user.currentUser && !props.message.Read ? \n              <TickIcon className='message__read' />\n            : null\n          }\n          <div \n            className={\n              props.message.Attachments ? \n                props.message.Attachments[0] ?\n                  props.message.Attachments[0].Type === 6 ? \"message__content key_message\"  :\n                  props.message.Attachments[0].Type === 4 ? \"message__content encrypted_message\"  : null\n                : \"message__content\"\n              : null\n            }\n          >\n            {\n              !user.currentUser ?\n                <div className=\"message__name\">\n                  {user.NameFirst ? user.NameFirst + ' ' : null}\n                  {user.NameSecond ? user.NameSecond : null}\n                </div>\n              : null\n            }          \n            {showMessage(props.message)}\n          </div>\n          <div className=\"message__time\">{messageTime}</div>\n        </div>\n        {props.message.Attachments && props.message.Attachments[0] ? (\n          <Modal\n            visible={visible}\n            onCancel={() => setVisible(false)}\n            footer={null}\n            maskClosable\n          >\n            <img\n              className=\"popup__img\"\n              src={`https://${props.node}:5000/api/Files/${props.message.Attachments[0].Payload.FileId}`}\n              alt=\"\"\n            />\n          </Modal>\n        ) : null}\n        {props.message && isContextMenuVisible ? (\n          <div className=\"message-menu\">\n            <ul>\n              <li onClick={handleReplyToMessage}>Ответить</li>\n              <li onClick={handleForwardMessage}>Переслать</li>\n            </ul>\n            </div>\n        ) : null}\n      </div>\n    )\n  } else {\n    return null\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    users: state.users,\n    user: state.users.find(user => user.currentUser === true),\n    dialogs: state.dialogs,\n    forwardMessage: state.forwardMessage,\n    node: state.node.activeNode.Domains[0],\n    // symmetricKey: state.symmetricKey,\n    symmetricKeysForDecrypt: state.symmetricKeysForDecrypt,\n    // callbacks: state.callbacks,\n    publicKeys: state.publicKeys\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    forwardingMessage: message => dispatch(forwardingMessage(message)),\n    openDialog: dialogId => dispatch(openDialog(dialogId)),\n    closeDialog: () => dispatch(closeDialog()),\n    setSymmetricKey: key => dispatch(setSymmetricKey(key)),\n    setSymmetricKeyForDecrypt: key => dispatch(setSymmetricKeyForDecrypt(key)),\n    setCallbackId: id => dispatch(setCallbackId(id))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Message)\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(-198)\",\n  id: \"g69\"\n}, React.createElement(\"g\", {\n  id: \"_x33__22_\"\n}, React.createElement(\"g\", {\n  id: \"g66\"\n}, React.createElement(\"path\", {\n  id: \"path64\",\n  d: \"m 544.5,99 v 495 c 0,82.021 -66.479,148.5 -148.5,148.5 -82.021,0 -148.5,-66.479 -148.5,-148.5 V 148.5 c 0,-54.673 44.327,-99 99,-99 54.673,0 99,44.327 99,99 V 594 c 0,27.349 -22.176,49.5 -49.5,49.5 -27.349,0 -49.5,-22.151 -49.5,-49.5 V 198 H 297 v 396 c 0,54.673 44.327,99 99,99 54.673,0 99,-44.327 99,-99 V 148.5 C 495,66.479 428.521,0 346.5,0 264.479,0 198,66.479 198,148.5 V 618.75 C 210.202,716.389 295.045,792 396,792 496.955,792 581.798,716.389 594,618.75 V 99 Z\"\n}))));\n\nvar SvgPaperclipIcon = function SvgPaperclipIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    xmlSpace: \"preserve\",\n    viewBox: \"0 0 396 792\",\n    height: 0,\n    width: 0,\n    y: \"0px\",\n    x: \"0px\",\n    id: \"Capa_1\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgPaperclipIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/paperclip_icon.b4a5561e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g95\"\n}, React.createElement(\"g\", {\n  id: \"send\"\n}, React.createElement(\"polygon\", {\n  id: \"polygon92\",\n  points: \"0,38.25 0,216.75 382.5,267.75 0,318.75 0,497.25 535.5,267.75 \"\n})));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g97\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g99\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g101\"\n});\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g103\"\n});\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g105\"\n});\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g107\"\n});\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g109\"\n});\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g111\"\n});\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g113\"\n});\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g115\"\n});\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g117\"\n});\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g119\"\n});\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g121\"\n});\n\nvar _ref16 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g123\"\n});\n\nvar _ref17 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(0,-38.25)\",\n  id: \"g125\"\n});\n\nvar SvgSendButtonIcon = function SvgSendButtonIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    xmlSpace: \"preserve\",\n    viewBox: \"0 0 535.5 459\",\n    height: 0,\n    width: 0,\n    y: \"0px\",\n    x: \"0px\",\n    id: \"Capa_1\",\n    ref: svgRef\n  }, props), _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgSendButtonIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/send_button_icon.56dc055f.svg\";\nexport { ForwardRef as ReactComponent };","/* eslint-disable */\nimport React, { useState, useEffect } from \"react\"\nimport { connect } from \"react-redux\"\nimport { ReactComponent as Paperclip } from \"../assets/paperclip_icon.svg\"\nimport { ReactComponent as SendBtn } from \"../assets/send_button_icon.svg\"\nimport { forwardingMessage, upDialog } from \"../actions/dialogs\"\nimport socket from \"../transport/Connect\"\nimport { Upload, Icon } from \"antd\"\nimport axios from 'axios'\nimport BigNumber from \"bignumber.js\"\nimport Crypto from \"y_crypto\"\nimport helpers from \"../helpers\"\n\nfunction NewMessageField(props) {\n  const [messageText, setMessageText] = useState(\"\")\n  const [imgLoading, setImgLoading] = useState(false)\n  const [imageUrl, setImageUrl] = useState(null)\n  const [attachmentsType, setAttachmentsType] = useState(null)\n\n  useEffect(() => {\n    if (imageUrl) {\n      sendMessage()\n    }\n  }, [imageUrl])\n\n  const sendMessage = () => {\n    if (props.forwardMessage) {\n      // send a forwarded message or reply to a message\n      const data = {\n        Messages: [\n          {\n            Id: 0,\n            SendingTime: \"\",\n            SenderId: props.user.Id,\n            ReceiverId: props.dialog.SecondUid,\n            ConversationId: props.dialog.ConversationId,\n            ConversationType: props.dialog.ConversationType,\n            Read: false,\n            NodesId: null,\n            ReplyTo: null,\n            Text: messageText,\n            Attachments: [\n              {\n                Type: 5,\n                Payload: {\n                  MessagesGlobalId: [props.forwardMessage.GlobalId],\n                  ConversationId: props.forwardMessage.ConversationId,\n                  ConversationType: props.forwardMessage.ConversationType\n                }\n              }\n            ]\n          }\n        ],\n        RequestType: 39,\n        RequestId: socket.makeId(),\n        Type: 0\n      }\n\n      socket.send(data)\n    } \n    else if (imageUrl) {\n      // message with image\n      const data = {\n        Messages: [\n          {\n            Id: 0,\n            SendingTime: \"\",\n            SenderId: props.user.Id,\n            ReceiverId: props.dialog.SecondUid,\n            ConversationId: props.dialog.ConversationId,\n            ConversationType: props.dialog.ConversationType,\n            Read: false,\n            NodesId: null,\n            ReplyTo: null,\n            Text: messageText,\n            Attachments: [\n              {\n                Type: attachmentsType,\n                Hash: null,\n                MessageId: 0,\n                Payload: imageUrl,\n                NodesId: null\n              }\n            ],\n            GlobalId: null\n          }\n        ],\n        RequestType: 39,\n        RequestId: socket.makeId(),\n        Type: 0\n      }\n\n      socket.send(data)\n    } \n    else if (props.dialog.isCrypto) {\n      // encrypted text message\n      const encoder = new TextEncoder()\n      const masterPassword = encoder.encode('qwerty')\n      let masterPasswordId = BigNumber(1)\n      const crypto = new Crypto(masterPassword, masterPasswordId)\n\n      crypto.setSymmetricKey(helpers.base64ToBuffer(props.symmetricKey.key))\n      crypto.encryptMsg(1, 1, 99999, encoder.encode(messageText)).then(encryptedMessage => {\n        const data = {\n          Messages: [\n            {\n              Id: 0,\n              SendingTime: \"\",\n              SenderId: props.user.Id,\n              ReceiverId: props.dialog.SecondUid,\n              ConversationId: props.dialog.ConversationId,\n              ConversationType: props.dialog.ConversationType,\n              Read: false,\n              NodesId: null,\n              ReplyTo: null,\n              Text: null,\n              Attachments: [\n                {\n                  Type: 4,\n                  Hash: null,\n                  MessageId: 0,\n                  Payload: {\n                    KeyId: props.symmetricKey.id,\n                    SignKeyId: JSON.parse(localStorage.getItem(\"signKeysPair\"))[JSON.parse(localStorage.getItem(\"signKeysPair\")).length-1].id,\n                    SaveFlag: 1,\n                    Lifetime: 99999,\n                    EncryptedData: helpers.bufferToBase64(encryptedMessage)\n                  },\n                  NodesId: null\n                }\n              ],\n              GlobalId: null\n            }\n          ],\n          RequestType: 39,\n          RequestId: socket.makeId(),\n          Type: 0\n        }\n        socket.send(data)\n      }).catch(err => {\n        // console.log(err)\n      })\n    } \n    else {\n      // sending a regular message without attachment\n      const data = {\n        Messages: [\n          {\n            Id: 0,\n            SendingTime: \"\",\n            SenderId: props.user.Id,\n            ReceiverId: props.dialog.SecondUid,\n            ConversationId: props.dialog.ConversationId,\n            ConversationType: props.dialog.ConversationType,\n            Read: false,\n            NodesId: null,\n            ReplyTo: null,\n            Text: messageText,\n            Attachments: null,\n            GlobalId: null\n          }\n        ],\n        RequestType: 39,\n        RequestId: socket.makeId(),\n        Type: 0\n      }\n\n      socket.send(data)\n    }\n\n    setMessageText(\"\")\n    props.upDialog(props.dialog)\n\n    if(props.forwardMessage){\n      props.forwardingMessage(false)\n    }\n  }\n\n  const handleOnKeyDown = event => {\n    if (event.keyCode === 13) {\n      sendMessage()\n    }\n  }\n\n  const handleUploadImage = data => {\n    const fileAccessToken = localStorage.getItem('FileAccessToken')\n    axios.defaults.headers['FileAccessToken'] = fileAccessToken\n\n    const formData = new FormData()\n    formData.append('file', data.file)\n\n    axios.post(`https://${props.node}:5000/api/Files`, formData)\n    .then(\n        (res) => {\n          if (res.status === 200) {\n            setImgLoading(false)\n            setImageUrl(res.data.File.FileId)\n          }\n        }\n    )\n    .catch(\n        (err) => {\n          // console.log(err)\n        }\n    )\n  }\n\n  const beforeUpload = file => {\n    const isJpgOrPng = file.type === \"image/jpeg\" || file.type === \"image/png\"\n    if (isJpgOrPng) {\n      setAttachmentsType(2)\n    } else {\n      setAttachmentsType(1)\n    }\n    return isJpgOrPng\n  }\n\n  const handleChange = info => {\n    if (info.file.status === \"uploading\") {\n      setImgLoading(true)\n      return\n    }\n  }\n\n  return (\n    <div className=\"new-message\">\n      <Upload\n        showUploadList={false}\n        customRequest={file => handleUploadImage(file)}\n        beforeUpload={beforeUpload}\n        onChange={handleChange}\n      >\n        {\n          imgLoading ? \n            <Icon type=\"loading\" className=\"loading-icon\" />\n          :\n            <Paperclip className=\"new-message__attach\"/>\n        }\n      </Upload>\n      <input\n        type=\"text\"\n        className=\"new-message__inp\"\n        placeholder=\"Введите сообщение\"\n        value={messageText}\n        onChange={e => {\n          setMessageText(e.target.value)\n        }}\n        onKeyDown={handleOnKeyDown}\n      />\n      <SendBtn\n        onClick={() => {\n          sendMessage()\n        }}\n        className=\"new-message__send\"\n      />\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.users.find(user => user.currentUser === true),\n    dialogs: state.dialog,\n    forwardMessage: state.forwardMessage,\n    node: state.node.activeNode.Domains[0],\n    symmetricKey: state.symmetricKey\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    forwardingMessage: message => dispatch(forwardingMessage(message)),\n    upDialog: dialog => dispatch(upDialog(dialog))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewMessageField)\n","/* eslint-disable */\nimport React, { useState, useEffect, useRef } from \"react\"\nimport { connect } from \"react-redux\"\nimport { Button, Modal } from 'antd'\nimport Message from \"./Message\"\nimport NewMessageField from \"./NewMessageField\"\nimport { openDialog, toggleCryptoMode, forwardingMessage } from \"../actions/dialogs\"\nimport socket from \"../transport/Connect\"\nimport axios from 'axios'\nimport { ui } from \"../reducers/ui\"\nimport helpers from \"../helpers\"\nimport BigNumber from \"bignumber.js\"\nimport Crypto from \"y_crypto\"\nimport { setCallbackId } from \"../actions/callbacks\"\nimport { setSymmetricKey, setSymmetricKeyForDecrypt, setPublicKeys } from \"../actions/keys\"\nimport { CloseOutlined, ExclamationCircleOutlined } from '@ant-design/icons';\nimport JSONbig from \"json-bigint\"\n\nfunction Dialog(props) {\n  // const [messages, setMessages] = useState([])\n  const [dialog, setDialog] = useState(null)\n  const [isCrypto, setIsCrypto] = useState(false)\n  const [messagesLoading, setMessagesLoading] = useState(false)\n  const [lastMessage, setLastMessage] = useState(null)\n  const [callbackFunctions, setCallbackFunctions] = useState([])\n  const [interlocutorEncryptPublicKey, setInterlocutorEncryptPublicKey] = useState(null)\n  const mesViewport = useRef(null)\n\n  // function for receiving sender in messages and forwarded messages\n  // const getUsers = mess => {\n  //   const users = []\n  //   mess.forEach(message => {\n  //     if (message.Attachments) {\n  //       if (message.Attachments.length) {\n  //         if (message.Attachments[0].Type === 5) {\n  //           if (message.Attachments[0].Payload.length > 0) {\n  //             const foundUser = props.users.find(\n  //               user => user.Id === message.Attachments[0].Payload[0].SenderId\n  //             )\n\n  //             if (!foundUser) {\n  //               if(message.Attachments[0].Payload[0].SenderId){\n  //                 users.push(message.Attachments[0].Payload[0].SenderId)\n  //               }\n  //             }\n  //           }\n  //         }\n  //       }\n  //     }\n  //     const foundUser = props.users.find(user => user.Id === message.SenderId)\n\n  //     if (!foundUser) {\n  //       if(message.SenderId){\n  //         users.push(message.SenderId)\n  //       }\n  //     }\n  //   })\n  //   const uniqueUsers = [...new Set(users.map(n => n))]\n\n  //   if (uniqueUsers.length) {\n  //     const requestUsers = {\n  //       UsersId: [...uniqueUsers],\n  //       RequestType: 28,\n  //       RequestId: socket.makeId(),\n  //       Type: 0\n  //     }\n\n  //     socket.send(requestUsers)\n  //   }\n  // }\n\n  useEffect(() => {\n    if (dialog && dialog.SecondUid) {\n      const requestUser = {\n        UsersId: [dialog.SecondUid],\n        RequestType: 28,\n        RequestId: socket.makeId(),\n        Type: 0\n      }\n\n      socket.send(requestUser)\n    }\n  }, [dialog])\n\n  useEffect(() => {\n    if (isCrypto) {\n      // receiving public encryption keys of the interlocutor\n      const requestId = socket.makeId()\n      props.setCallbackId(requestId)\n      let callbackIds = callbackFunctions\n      callbackIds.push(requestId)\n      setCallbackFunctions(callbackIds)\n\n      if (props.user && dialog) {\n        const getUserKeys = {\n          UserId: dialog.SecondUid,\n          Direction: true,\n          KeysId: null,\n          RequestType: 105,\n          NavigationTime: parseInt(new Date().getTime()/1000),\n          RequestId: requestId,\n          Type: 0\n        }\n        socket.send(getUserKeys)\n      }\n    }\n  }, [isCrypto])\n\n  useEffect(() => {\n    if (dialog) {\n      if (dialog.isCrypto != isCrypto) {\n        setIsCrypto(dialog.isCrypto)\n      }\n    }\n  }, [props.dialogs])\n\n  const confirm = (text) => {\n    Modal.error({\n      title: \"Ошибка\",\n      icon: <ExclamationCircleOutlined />,\n      content: text,\n      okText: \"Ок\",\n      cancelText: \"Закрыть\"\n    })\n  }\n\n  useEffect(() => {\n    props.callbacks.forEach(callback => {\n      if (callbackFunctions.includes(callback.id) && callback.data) {\n        setCallbackFunctions([])\n        const encoder = new TextEncoder()\n        const masterPassword = encoder.encode('qwerty')\n        let masterPasswordId = BigNumber(1)\n        const crypto = new Crypto(masterPassword, masterPasswordId)\n\n        if (callback.data.Keys[0]) {\n          let keyTimelife = (callback.data.Keys[0].GenerationTime + callback.data.Keys[0].Lifetime)*1000\n          let date = new Date()\n          if (date.getTime()/1000 < keyTimelife) {\n            // console.log(\"Ключ собеседника живой, все нормально\")\n            // Type = 0 - sign\n            // Type = 1 - encrypt\n            let interEncryptPublicKey = callback.data.Keys[0].Type === 1 ? callback.data.Keys[0] : callback.data.Keys[1]\n            setInterlocutorEncryptPublicKey(interEncryptPublicKey)\n            let mySignPrivateKey = JSON.parse(localStorage.getItem(\"signKeysPair\"))[JSON.parse(localStorage.getItem(\"signKeysPair\")).length-1]\n            const keyId = socket.makeId()\n            crypto.setPublicEncryptKeyToSend(helpers.base64ToBuffer(interEncryptPublicKey.Data))\n            crypto.setPrivateSignKeyToSend(helpers.base64ToBuffer(mySignPrivateKey.private))\n            crypto.getSymmetricKey(1, keyId, 99999, ).then(symmetricKey => {\n              // add this unencrypted symmetric key to the state to decrypt messages on it\n              let symmKey = {\n                key: helpers.bufferToBase64(symmetricKey),\n                idKey: keyId\n              }\n              props.setSymmetricKeyForDecrypt(symmKey)\n              crypto.encryptKeyMsg(1, 99999, symmetricKey).then(encryptedSymmetricKey => {\n                // console.log(encryptedSymmetricKey)\n                // here we add the encrypted symmetric key to the state\n                // This key is sent to the interlocutor at the beginning of a secure dialogue, and an identifier is sent from it when sending messages\n                let symmKeyEncrypted = {\n                  key: helpers.bufferToBase64(symmetricKey),\n                  id: keyId\n                }\n                props.setSymmetricKey(symmKeyEncrypted)\n              }).catch(err => {\n                props.toggleCryptoMode({dialog: null, isCrypto: false})\n                confirm(err.message)\n                console.log(err)\n              })\n            }).catch(err => {\n              props.toggleCryptoMode({dialog: null, isCrypto: false})\n              confirm(err.message)\n              console.log(err)\n            })\n          } else {\n            props.toggleCryptoMode({dialog: null, isCrypto: false})\n            confirm(err.message)\n            // console.log(\"У пользовтеля истекли ключи\")\n          }\n        } else {\n          props.toggleCryptoMode({dialog: null, isCrypto: false})\n          confirm(err.message)\n          // console.log(\"У пользователя нет действующих публичных ключей\")\n        }\n      }\n    })\n  }, [props.callbacks])\n\n  useEffect(() => {\n    if (props.user && props.dialog) {\n      const requestId = socket.makeId()\n      const keysPairs = JSON.parse(localStorage.getItem('keysPair'))\n      const signKeysPairs = JSON.parse(localStorage.getItem('signKeysPair'))\n      props.setCallbackId(requestId)\n      \n      const addNewKeys = {\n        Keys: [\n          {\n            KeyId: keysPairs[keysPairs.length - 1].id,\n            Data: keysPairs[keysPairs.length - 1].public, \n            Lifetime: 99999,\n            GenerationTime: parseInt(new Date().getTime()/1000),\n            Version: 1,\n            // type 0 - signature, 1 - encryption\n            Type: 1,\n            UserId: props.user.Id,\n            ChatId: null\n          },\n          {\n            KeyId: signKeysPairs[keysPairs.length - 1].id,\n            Data: signKeysPairs[keysPairs.length - 1].public, \n            Lifetime: 99999,\n            GenerationTime: parseInt(new Date().getTime()/1000),\n            Version: 1,\n            // type 0 - signature, 1 - encryption\n            Type: 0,\n            UserId: props.user.Id,\n            ChatId: null\n          }\n        ],\n        RequestType: 100,\n        RequestId: requestId,\n        Type: 0\n      }\n\n      socket.send(addNewKeys)\n    }\n  }, [props.user, props.dialog])\n\n  useEffect(() => {\n    if(props.dialog){\n      setDialog(props.dialog)\n\n      // mark messages read\n      if (props.appFocus) {\n        if (props.dialog.LastMessageId) {\n          const data = {\n            MessagesId: [props.dialog.LastMessageId],\n            ConversationType: props.dialog.ConversationType,\n            ConversationId: props.dialog.ConversationId,\n            RequestId: socket.makeId(),\n            RequestType: 35,\n            Type: 0\n          }\n          \n          socket.send(data)\n        }\n      }\n\n      // scrolling message loading\n      mesViewport.current.onscroll = () => {\n        if (mesViewport.current.scrollTop === 0 && props.messages[0]) {\n          setMessagesLoading(true)\n          if (document.querySelectorAll('.message')[0]) {\n            setLastMessage(document.querySelectorAll('.message')[0].getAttribute('id'))\n          }\n\n          const messagesRequest = {\n            ConversationType: props.dialog.ConversationType,\n            ConversationId: props.dialog.ConversationId,\n            NavigationMessageId: props.messages[0].GlobalId,\n            MessagesId: null,\n            RequestType: 25,\n            RequestId: socket.makeId(),\n            Direction: true,\n            Type: 0\n          }\n\n          socket.send(messagesRequest)\n        }\n      }\n    }\n  }, [props.messages, props.dialog])\n\n  useEffect(() => {\n    if (dialog) {\n    //   setTimeout(() => {\n        if (mesViewport.current && !messagesLoading) {\n          setTimeout(() => {\n            mesViewport.current.scrollTop = 450000\n          }, 1)\n          setMessagesLoading(false)\n        } else {\n          if(lastMessage){\n            // console.log(document.getElementById('1f88a55d-1e18-b31f-27cd-572f261c2009'))\n            setMessagesLoading(false)\n            setLastMessage(null)\n            // 70 - hight of head\n            let lastMessageOffset = document.getElementById(lastMessage).offsetTop - 70\n            mesViewport.current.scrollTop = lastMessageOffset - 20\n\n            // document.getElementById(lastMessage).scrollIntoView()\n          }\n        }\n    //   }, 1)\n\n    //   getUsers(mess)\n    }\n  }, [dialog, props.messages])\n\n  useEffect(() => {\n    // send a symmetric key to the interlocutor and add interlocutor key in state\n    if (props.symmetricKey) {\n      // console.log('Отправляем симметричный ключ')\n      const keyExchangeMessage = {\n        Messages: [\n          {\n            Id: 0,\n            SendingTime: \"\",\n            SenderId: props.user.Id,\n            ReceiverId: props.dialog.SecondUid,\n            ConversationId: props.dialog.ConversationId,\n            ConversationType: props.dialog.ConversationType,\n            Read: false,\n            NodesId: null,\n            ReplyTo: null,\n            Text: null,\n            Attachments: [\n              {\n                Type: 6,\n                Hash: null,\n                MessageId: 0,\n                Payload: {\n                  KeyId: interlocutorEncryptPublicKey.KeyId,\n                  SignKeyId: JSON.parse(localStorage.getItem(\"signKeysPair\"))[JSON.parse(localStorage.getItem(\"signKeysPair\")).length-1].id,\n                  EncryptedData: props.symmetricKey.key\n                },\n                NodesId: null\n              }\n            ],\n            GlobalId: null\n          }\n        ],\n        RequestType: 39,\n        RequestId: socket.makeId(),\n        Type: 0\n      }\n  \n      socket.send(keyExchangeMessage)\n    }\n  }, [props.symmetricKey])\n\n  const joinToChannel = () => {\n    const data = {\n      ChannelsId: [dialog.ChannelId],\n      UsersId: [props.user.Id],\n      RequestType: 48,\n      RequestId: socket.makeId(),\n      Type: 0\n    }\n\n    socket.send(data)\n  }\n\n  const fileOver = e => {\n    e.preventDefault()\n    mesViewport.current.classList.add('file-over')\n  }\n\n  const fileLeave = e => {\n    e.preventDefault()\n    mesViewport.current.classList.remove('file-over')\n  }\n\n  const fileDrop = (e) => {\n    e.preventDefault()\n    mesViewport.current.classList.remove('file-over')\n\n    if (props.isCrypto) {\n      // encrypted message with file\n      const encoder = new TextEncoder()\n      const masterPassword = encoder.encode('qwerty')\n      let masterPasswordId = BigNumber(1)\n      const crypto = new Crypto(masterPassword, masterPasswordId)\n\n      crypto.setSymmetricKey(helpers.base64ToBuffer(props.symmetricKey.key))\n      // crypto.encryptMsg(1, 4, 99999, encoder.encode(e.dataTransfer.files[0])).then(data => {\n        // if (data.length > 0) {\n          const fileAccessToken = localStorage.getItem('FileAccessToken')\n          axios.defaults.headers['FileAccessToken'] = fileAccessToken\n\n          const formData = new FormData()\n          // formData.append('file', new Blob(data))\n          formData.append('file', e.dataTransfer.files[0])\n\n          axios.post(`https://${props.node}:5000/api/Files`, formData).then(upladedFile => {\n            // console.log(upladedFile)\n            crypto.encryptMsg(1, 4, 99999, encoder.encode(JSON.stringify(upladedFile.data.File))).then(encryptImgMsg => {\n              const data = {\n                Messages: [\n                  {\n                    Id: 0,\n                    SendingTime: \"\",\n                    SenderId: props.user.Id,\n                    ReceiverId: dialog.SecondUid,\n                    ConversationId: dialog.ConversationId,\n                    ConversationType: dialog.ConversationType,\n                    Read: false,\n                    NodesId: null,\n                    ReplyTo: null,\n                    Text: null,\n                    Attachments: [\n                      {\n                        Type: 4,\n                        Hash: null,\n                        MessageId: 0,\n                        Payload: {\n                          KeyId: props.symmetricKey.id,\n                          SignKeyId: JSON.parse(localStorage.getItem(\"signKeysPair\"))[JSON.parse(localStorage.getItem(\"signKeysPair\")).length-1].id,\n                          SaveFlag: 1,\n                          Lifetime: 99999,\n                          EncryptedData: helpers.bufferToBase64(encryptImgMsg)\n                        },\n                        NodesId: null\n                      }\n                    ],\n                    GlobalId: null\n                  }\n                ],\n                RequestType: 39,\n                RequestId: socket.makeId(),\n                Type: 0\n              }\n              \n              // console.log(data)\n              socket.send(data)\n            }).catch(err => {\n              // console.log(err)\n            })\n          }).catch(err => {\n            // console.log(err)\n          })\n        // }\n      // }).catch(err => {\n      //   console.log(err)\n      // })\n    } else {\n      // regular message with file\n      const isJpgOrPng = e.dataTransfer.files[0].type === \"image/jpeg\" || e.dataTransfer.files[0].type === \"image/png\"\n      let attachmentType = null\n      if (isJpgOrPng) {\n        attachmentType = 2\n      } else {\n        attachmentType = 1\n      }\n\n      const fileAccessToken = localStorage.getItem('FileAccessToken')\n      axios.defaults.headers['FileAccessToken'] = fileAccessToken\n\n      const formData = new FormData()\n      formData.append('file', e.dataTransfer.files[0])\n\n      axios.post(`https://${props.node}:5000/api/Files`, formData)\n      .then(\n          (res) => {\n            if (res.status === 200) {\n              // setImgLoading(false)\n              const data = {\n                Messages: [\n                  {\n                    Id: 0,\n                    SendingTime: \"\",\n                    SenderId: props.user.Id,\n                    ReceiverId: dialog.SecondUid,\n                    ConversationId: dialog.ConversationId,\n                    ConversationType: dialog.ConversationType,\n                    Read: false,\n                    NodesId: null,\n                    ReplyTo: null,\n                    Text: \"\",\n                    Attachments: [\n                      {\n                        Type: attachmentType,\n                        Hash: null,\n                        MessageId: 0,\n                        Payload: res.data.File.FileId,\n                        NodesId: null\n                      }\n                    ],\n                    GlobalId: null\n                  }\n                ],\n                RequestType: 39,\n                RequestId: socket.makeId(),\n                Type: 0\n              }\n        \n              socket.send(data)\n            }\n          }\n      )\n      .catch(\n          (err) => {\n            // console.log(err)\n          }\n      )\n    }\n  }\n\n  return (\n    <div className=\"dialog\">\n      <div \n        className=\"dialog__messages-viewport\"\n        ref={mesViewport}\n        onDragOver={(e) => fileOver(e)}\n        onDragLeave={(e) => fileLeave(e)}\n        onDrop={(e) => fileDrop(e)}\n      >\n        <div className=\"dialog__messages\">\n          {dialog\n            ? props.messages.filter(message => message.ConversationId === parseInt(dialog.ConversationId || dialog.ChannelId) && message.ConversationType === dialog.ConversationType).map(message => {\n                return <Message key={socket.makeId()} message={message} />\n              })\n            : null}\n        </div>\n      </div>\n      {props.forwardMessage ? (\n        <div className=\"reply-message\">\n          <CloseOutlined onClick={() => {props.forwardingMessage(false)}} style={{color: '#1890FF', paddingRight: 10, cursor: 'pointer'}} />\n          Ответ на:\n          {` ${props.forwardMessage.Text}`}\n        </div>\n      ) : null}\n      {\n        props.dialog ? \n          props.dialog.type === \"channel\" && props.dialog.fake ? \n            <Button type=\"primary\" size='large' onClick={joinToChannel}>Вступить</Button> \n          : props.dialog.ConversationType !== 3 ?\n            <NewMessageField {...props} dialog={dialog} />\n          : null\n        : null\n      }\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  // get messages only for this dialog\n  // let dialog = state.dialogs.find(dialog => dialog.active)\n  // const mess = state.messages.filter(message => message.ConversationId === parseInt(dialog.ConversationId || dialog.ChannelId) && message.ConversationType === dialog.ConversationType)\n  return {\n    messages: state.messages,\n    forwardMessage: state.forwardMessage,\n    users: state.users,\n    user: state.users.find(user => user.currentUser === true),\n    node: state.node.activeNode.Domains[0],\n    appFocus: state.ui.appFocus,\n    requestsId: state.ui.requestsId,\n    symmetricKey: state.symmetricKey,\n    callbacks: state.callbacks,\n    dialogs: state.dialogs\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    openDialog: dialogId => dispatch(openDialog(dialogId)),\n    forwardingMessage: data => dispatch(forwardingMessage(data)),\n    setCallbackId: id => dispatch(setCallbackId(id)),\n    setSymmetricKey: key => dispatch(setSymmetricKey(key)),\n    setSymmetricKeyForDecrypt: key => dispatch(setSymmetricKeyForDecrypt(key)),\n    toggleCryptoMode: (data) => dispatch(toggleCryptoMode(data)),\n    setPublicKeys: publicKeys => dispatch(setPublicKeys(publicKeys)),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Dialog)\n","/* eslint-disable */\nimport React, { useState, useEffect } from \"react\"\nimport { connect } from \"react-redux\"\nimport socket from \"../transport/Connect\"\nimport HeadDialog from \"./HeadDialog\"\nimport Dialog from \"./Dialog\"\nimport selectors from \"../selectors\"\nimport { openDialog } from \"../actions/dialogs\"\n\nfunction DialogContainer(props) {\n  // const [messages, setMessages] = useState([]);\n  const [dialog, setDialog] = useState(null)\n\n  useEffect(() => {\n    props.dialogs.forEach(dialog => {\n      if (dialog.active) {\n        setDialog(dialog)\n      }\n    })\n  }, [props.dialogs])\n\n  // useEffect(() => {\n    // if (props.messages) {\n    //    props.messages.map(message => {\n    //       if (message.ConversationId === dialogId) {\n    //          // console.log(messages);\n    //          let mess = messages;\n    //          mess.push(message);\n    //          // console.log(mess);\n    //          setMessages(messages.push(message));\n    //       }\n    //    });\n    // }\n  // }, [props.messages])\n\n  useEffect(() => {\n    if (dialog) {\n      // console.log(dialog)\n      // console.log(dialog.messagesRecieved)\n\n      // if for this dialogue messages have not yet been requested, then we request\n      if (!dialog.messagesRecieved) {\n        // message request\n        const data = {\n          ConversationType: dialog.type === \"channel\" ? 3 : dialog.ConversationType,\n          ConversationId: dialog.ConversationId ? dialog.ConversationId : dialog.ChannelId,\n          NavigationMessageTime: null,\n          MessageId: null,\n          RequestType: 25,\n          RequestId: socket.makeId(),\n          Type: 0\n        }\n\n        socket.send(data)\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [dialog])\n\n  return (\n    <div className=\"dialog-container\" style={selectors.getActiveDialog(props.dialogs) ? {zIndex: 2} : null}>\n      {selectors.getActiveDialog(props.dialogs) ? (\n        <>\n          <HeadDialog {...props} />\n          <Dialog dialog={dialog} /> \n        </>\n      )\n      : null}\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    dialogs: state.dialogs,\n    // messages: state.messages\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    openDialog: dialogId => dispatch(openDialog(dialogId))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DialogContainer)\n","/* eslint-disable */\nimport React, { useState, useEffect } from \"react\"\nimport { connect } from \"react-redux\"\nimport { NavLink } from \"react-router-dom\"\nimport { Modal } from \"antd\"\nimport { openProfile } from \"../actions/ui\"\nimport { openDialog } from \"../actions/dialogs\"\nimport socket from \"../transport/Connect\"\nimport selectors from \"../selectors\"\nimport Avatar from \"./Avatar\"\n\nfunction ProfileModal(props) {\n  const [visible, setVisible] = useState(false)\n  const [profile, setProfile] = useState(null)\n  const [prevProfile, setPrevProfile] = useState(null)\n\n  useEffect(() => {\n    if(props.profile) {\n      if(props.profile.ConversationType === 1){\n        const user = selectors.getUserById(props.profile.SecondUid, props.users)\n        if (user) {\n          setProfile(user)\n          setVisible(true)\n        }\n      } else if (props.profile.NameFirst) {\n        setProfile(props.profile)\n        setVisible(true)\n      } else if (props.profile.Users) {\n        setProfile(props.profile)\n        setVisible(true)\n      } else if (props.profile.ConversationType === 2){\n        const getChatInfo = {\n          RequestType: 45,\n          ChatsId: [props.profile.ConversationId],\n          RequestId: socket.makeId(),\n          Type: 0\n        }\n    \n        socket.send(getChatInfo)\n      }\n    }\n  }, [props.profile])\n\n  useEffect(() => {\n    if (props.chats.length) {\n      setProfile(props.chats[0])\n      setVisible(true)\n\n      // we request missing users for display in a profile\n      const undefinedUsers = []\n      props.chats[0].Users.map(user => {\n        const foundUser = selectors.getUserById(user.UserId, props.users)\n        if(!foundUser){\n          undefinedUsers.push(user.UserId)\n        }\n      })\n      if(undefinedUsers.length){\n        const requestUsers = {\n          UsersId: [...undefinedUsers],\n          RequestType: 28,\n          RequestId: socket.makeId(),\n          Type: 0\n        }\n\n        socket.send(requestUsers)\n      }\n    }\n  }, [props.chats])\n\n  const openProfile = data => {\n    setPrevProfile(profile)\n    props.openProfile(data)\n  }\n\n  const showUsers = () => {\n    return props.chats[0].Users.map(user => {\n      const foundUser = selectors.getUserById(user.UserId, props.users)\n      if(foundUser){\n        let name = null\n        if (foundUser.NameFirst) {\n          name = foundUser.NameFirst\n        }\n        if (foundUser.NameSecond) {\n          name = name + ' ' + foundUser.NameSecond\n        }\n        return (\n          <div key={foundUser.Id} className='profile__info_user' onClick={() => {openProfile(foundUser)}}>\n            {\n              foundUser.Photo ? \n                <div\n                  style={{\n                    width: \"50px\",\n                    height: \"50px\",\n                    backgroundSize: \"cover\",\n                    backgroundPosition: \"center center\",\n                    backgroundImage: `url(https://${props.node}:5000/api/Files/${foundUser.Photo})`,\n                    backgroundRepeat: \"no-repeat\",\n                    borderRadius: 100,\n                    margin: '0 auto',\n                    marginTop: \"10px\"\n                  }}\n                ></div>\n              : \n              <div className='profile__info_ava'>{selectors.getUserInitials(foundUser)}</div> \n            }\n            {name ? name : 'Имя скрыто'}\n          </div>\n        )\n      }\n    })\n  }\n\n  const handleCancelProfile = () => {\n    setVisible(false)\n    props.openProfile(null)\n  }\n\n  const handleOpenDialog = () => {\n    let payload = {}\n    payload.data = props.profile\n    if (props.profile.type === \"dialog\") {\n      payload.type = \"dialog\"\n    } else {\n      payload.type = \"user\"\n    }\n    props.openDialog(payload)\n    handleCancelProfile()\n  }\n\n  const handleBackProfile = () => {\n    props.openProfile(prevProfile)\n    setPrevProfile(null)\n  }\n\n  return (\n    <Modal\n      visible={visible}\n      onCancel={handleCancelProfile}\n      footer={null}\n      maskClosable\n    >\n      {\n        profile ? \n          <div className='profile'>\n            {\n              prevProfile ? <div onClick={handleBackProfile}>Назад</div> : null\n            }\n            {\n              <Avatar user={profile} />\n            }\n            {\n              <div className='profile__name'>{selectors.getUserName(profile, props.contacts.users)}</div>\n              // profile.Name ?\n              //   <div className='profile__name'>{profile.Name}</div>\n              // :\n              //   <div className='profile__name'>\n              //     {profile.NameFirst ? profile.NameFirst  : null}\n              //     {' '}\n              //     {profile.NameSecond ? profile.NameSecond : null}\n              //   </div>\n            }\n            {\n              profile.Phones ? \n                profile.Phones.length > 0 ?\n                  <div className='profile__info'>\n                    <div className='profile__info_name'>Телефон</div>\n                    <div className='profile__info_value'>{profile.Phones[0].FullNumber}</div>\n                  </div>\n                : null\n              : null\n            }\n            {\n              profile.Emails ? \n                <div className='profile__info'>\n                  <div className='profile__info_name'>Email</div>\n                  <div className='profile__info_value'><a href={`mailto:${profile.Emails[0]}`}>{profile.Emails[0]}</a></div>\n                </div>\n              : null\n            }\n            {\n              profile.About ? \n                <div className='profile__info'>\n                  <div className='profile__info_name'>О себе</div>\n                  <div className='profile__info_value'>{profile.About}</div>\n                </div>\n              : null\n            }\n            {\n              profile.Users ? \n                <div className='profile__info'>\n                  <div className='profile__info_name'>Участники</div>\n                  <div className='profile__info_users'>{showUsers()}</div>\n                </div>\n              : null\n            }\n            {\n              props.profile ? \n                <NavLink\n                  to={\"/\"}\n                  onClick={handleOpenDialog}\n                >\n                  <div className='profile__open_chat'>Открыть чат</div>\n                </NavLink>\n              : null\n            }\n          </div>\n        : null\n      }\n      \n    </Modal>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    profile: state.ui.profile,\n    users: state.users,\n    chats: state.chats,\n    node: state.node.activeNode.Domains[0],\n    contacts: state.contacts\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    openProfile: user => dispatch(openProfile(user)),\n    openDialog: dialogId => dispatch(openDialog(dialogId))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileModal)\n","/* eslint-disable */\nimport React, {useState} from \"react\"\nimport { connect } from \"react-redux\"\nimport { Modal, Form, Input, Switch, Divider, Upload, Icon, message, Button } from \"antd\"\nimport { toggleModal } from \"../actions/ui\"\nimport socket from \"../transport/Connect\"\nimport Avatar from \"../components/Avatar\"\nimport axios from 'axios'\n\nfunction CreateChatModal(props) {\n  const [chatName, setChatName] = useState(null)\n  const [nameError, setNameError] = useState(false)\n  const [chatPrivate, setChatPrivate] = useState(false)\n  const [chatChannel, setChatChannel] = useState(false)\n  const [loading, setLoading] = useState(false)\n  const [imageUrl, setImageUrl] = useState(null)\n  const [usersIDs, setUsersIds] = useState([])\n  const [showUsers, setShowUsers] = useState(false)\n\n  const handleSetChatName = value => {\n    setChatName(value)\n    setNameError(false)\n    if (value.length < 1) {\n      setNameError(true)\n    }\n  }\n\n  const handleCreateChat = () => {\n    if (!chatName) {\n      setNameError(true)\n    } else {\n      const users = usersIDs.map(userId => {\n        return {userId}\n      })\n      const newChat = {\n        Chats: [\n          {\n            Id: 0,\n            Name: chatName,\n            Tag: 0,\n            Photo: imageUrl,\n            About: null,\n            NodesId: null,\n            Visible: null,\n            Public: null,\n            Security: null,\n            Type: 1,\n            Users: users\n          }\n        ],\n        RequestId: socket.makeId(),\n        RequestType: 36,\n        Type: 0\n       }\n      \n      socket.send(newChat)\n\n      props.toggleModal(\"createChatModal\")\n    }\n  }\n\n  const handleUploadImage = data => {\n    const fileAccessToken = localStorage.getItem('FileAccessToken')\n    axios.defaults.headers['FileAccessToken'] = fileAccessToken\n\n    const formData = new FormData()\n    formData.append('file', data.file)\n  \n    axios.post(`https://${props.node}:5000/api/Files`, formData)\n    .then(\n        (res) => {\n          if (res.status === 200) {\n            setLoading(false)\n            setImageUrl(res.data.File.FileId)\n          }\n        }\n    )\n    .catch(\n        (err) => {\n          // console.log(err)\n        }\n    )\n  }\n\n  const beforeUpload = file => {\n    const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png'\n    if (!isJpgOrPng) {\n      message.error('Поддерживается только загрузка JPG/PNG файлов!')\n    }\n    return isJpgOrPng\n  }\n\n  const handleChange = info => {\n    if (info.file.status === 'uploading') {\n      setLoading(true)\n      return\n    }\n  }\n\n  const addContactToChat = userId => {\n    let users = [...usersIDs]\n    if (usersIDs.includes(userId)) {\n      let foudnUserIndex = users.indexOf(userId)\n      users.splice(foudnUserIndex, 1)\n      setUsersIds(users)\n    } else {\n      users.push(userId)\n      setUsersIds(users)\n    }\n  }\n\n  const showContacts = () => {\n    return props.contacts.map(user => {\n      if(user){\n        let name = null\n        if (user.Name) {\n          name = user.Name\n        }\n        else if (user.ContactUser.NameFirst || user.ContactUser.NameSecond) {\n          name = `${user.ContactUser.NameFirst} ${user.ContactUser.NameSecond}`\n        }\n        return (\n          <div key={user.ContactId} className={usersIDs.includes(user.ContactUserId) ? 'contacts contacts-active' : 'contacts'} onClick={() => {addContactToChat(user.ContactUserId)}}>\n            <Avatar user={user.ContactUser} />\n            {name ? name : 'Имя скрыто'}\n          </div>\n        )\n      }\n    })\n  }\n\n  return (\n    <Modal\n      visible={props.createChatModal}\n      // visible={true}\n      onCancel={() => props.toggleModal(\"createChatModal\")}\n      title=\"Создание группового чата\"\n      className=\"create-chat-modal\"\n      footer={null}\n      maskClosable\n    >\n      {\n        !showUsers ?\n          <>\n            <Upload\n              listType=\"picture-card\"\n              className=\"avatar-uploader\"\n              showUploadList={false}\n              customRequest={file => handleUploadImage(file)}\n              beforeUpload={beforeUpload}\n              onChange={handleChange}\n            >\n              {\n                loading ? \n                <Icon type=\"loading\" className=\"loading-icon\" />\n              : imageUrl ?\n                  <img src={`https://${props.node}:5000/api/Files/${imageUrl}`} alt=\"avatar\" style={{ width: '100%' }} />\n                :\n                  <>\n                    <p className=\"ant-upload-drag-icon\">\n                      <Icon type=\"inbox\" style={{fontSize: \"40px\", color: \"#1890ff\", marginTop: \"15px\"}} />\n                    </p>\n                    <p className=\"ant-upload-text\">Загрузить <br/> аватар</p>\n                  </>\n              }\n            </Upload>\n            <Divider />\n            <Form.Item\n              validateStatus={nameError ? \"error\" : ''}\n              help={nameError ? \"Это поле обязательно для заполнения\" : false}\n            >\n              <Input \n                placeholder=\"Название чата\"\n                onChange={(e) => handleSetChatName(e.target.value)}\n              />\n            </Form.Item>\n            <Divider />\n            <div className='switch-label'>\n              <div>Приватный чат</div>\n              <Switch checked={chatPrivate} onChange={(value) => setChatPrivate(value)} />\n            </div>\n            <Divider />\n            <div className='switch-label'>\n              <div>Создать канал</div>\n              <Switch checked={chatChannel} onChange={(value) => setChatChannel(value)} />\n            </div>\n            <Divider />\n            <Button type=\"normal\" block icon=\"usergroup-add\" onClick={() => setShowUsers(!showUsers)}>Добавить пользователей</Button>    \n          </>\n        :\n          <>\n            <div className=\"modal_back\" onClick={() => setShowUsers(false)}><Icon type=\"arrow-left\" /></div>\n            {\n              showUsers ?\n                <div className=\"wrap_contacts\">\n                  {showContacts()}\n                </div>\n              : null\n            }  \n          </>\n      }\n      <Divider />\n      <Button type=\"primary\" block onClick={() => handleCreateChat()}>Создать</Button>\n    </Modal>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    createChatModal: state.ui.modals.createChatModal,\n    node: state.node.activeNode.Domains[0],\n    contacts: state.contacts.users\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    toggleModal: name => dispatch(toggleModal(name))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateChatModal)\n","import Connect from \"./Connect\"\n\n/* eslint-disable */\nclass Request {\n  constructor() {}\n\n  // dialogue request\n  getDialogs() {\n    const getDialogs = {\n      NavigationMessageTime: null,\n      RequestId: Connect.makeId(),\n      RequestType: 12,\n      Type: 0\n    }\n    \n    Connect.send(getDialogs)\n  }\n\n  // contact list request\n  getUserContacts() {\n    const getUserContacts = {\n      RequestId: Connect.makeId(),\n      RequestType: 64,\n      Type: 0\n    }\n\n    Connect.send(getUserContacts)\n  }\n\n  // user request\n  getUsers(usersIds) {\n    const getUsers = {\n      RequestId: Connect.makeId(),\n      RequestType: 28,\n      Type: 0,\n      UsersId: usersIds\n    }\n\n    Connect.send(getUsers)\n  }\n\n  // contact group request\n  getUserGroups() {\n    const data = {\n      RequestId: Connect.makeId(),\n      RequestType: 61,\n      Type: 0,\n    }\n\n    Connect.send(data)\n  }\n\n  // request contacts from a group\n  getGroupContacts(groupId) {\n    const data = {\n      RequestId: Connect.makeId(),\n      RequestType: 60,\n      Type: 0,\n      GroupId: groupId\n    }\n\n    Connect.send(data)\n  }\n\n  // update user information\n  editUser(data) {\n    const requestdData = {\n      User: {\n        NameFirst: data.NameFirst,\n        NameSecond: data.NameSecond,\n        About: data.About,\n        Photo: data.Photo,\n        Country: null,\n        Language: null,\n        Visible: null,\n        Privacy: data.Privacy,\n        Security: null,\n        Phones: null,\n        Emails: null\n      },\n      RequestId: Connect.makeId(),\n      RequestType: 10,\n      Type: 0\n    }\n\n    Connect.send(requestdData)\n  }\n\n  // create chat\n  createChat(data) {\n    const requestdData = {\n      Chats: [\n        {\n          Id: 0,\n          Name: \"NEW CHAT\",\n          Tag: 0,\n          Photo: null,\n          About: \"about chat\",\n          NodesId: null,\n          Visible: null,\n          Public: null,\n          Security: null,\n          Type: 1,\n          Users: [\n            {\n              ChatId: 0,\n              UserId: 1,\n              Deleted: false,\n              Banned: false,\n              UserRole: 0,\n              UserInfo: null\n            },\n            {\n              ChatId: 0,\n              UserId: 2,\n              Deleted: false,\n              Banned: false,\n              UserRole: 0,\n              UserInfo: null\n            }\n          ]\n        }\n      ],\n      RequestId: 3387209483927527400,\n      RequestType: 36,\n      Type: 0\n    }\n\n    Connect.send(requestdData)\n  }\n}\n\nconst request = new Request()\n\nexport default request\n","/* eslint-disable */\nimport React, {useEffect} from \"react\"\nimport { connect } from \"react-redux\"\nimport { Modal, Tabs } from \"antd\"\nimport { toggleModal } from \"../actions/ui\"\nimport Request from \"../transport/Request\"\nimport Avatar from \"./Avatar\"\nimport { openDialog } from \"../actions/dialogs\"\nimport selectors from \"../selectors\"\n\nfunction ContactsModal(props) {\n  // const [contacts, setContacts] = useState([])\n\n  const { TabPane } = Tabs\n\n  useEffect(() => {\n    Request.getUserContacts()\n    Request.getUserGroups()\n  }, [])\n\n  // useEffect(() => {\n  //   const contactsTmp = []\n  //   props.users.forEach(user => {\n  //     if (props.contactsIDs.find(id => user.Id === id)) {\n  //       contactsTmp.push(user)\n  //     }\n  //   })\n  //   setContacts(contactsTmp)\n  // }, [props.users, props.contactsIDs])\n\n  const handleOpenChat = user => {\n    let payload = {}\n    payload.data = user\n    payload.type = \"user\"\n    props.openDialog(payload)\n    props.toggleModal(\"close\")\n  }\n\n  const changeGroup = groupId => {\n    if (groupId === \"all\") {\n      Request.getUserContacts()\n    } else {\n      Request.getGroupContacts(groupId)\n    }\n  }\n\n  const showContacts = () => {\n    return props.contacts.map(contact => {\n      let name = selectors.getUserName(contact, props.contacts)\n      // if (contact.Name) {\n      //   name = contact.Name\n      // }\n      // else if (contact.ContactUser.NameFirst || contact.ContactUser.NameSecond) {\n      //   name = `${contact.ContactUser.NameFirst} ${contact.ContactUser.NameSecond}`\n      // }\n\n      if (contact.ContactUser) {\n        return (\n          <div className=\"contact\" key={contact.ContactId} onClick={() => handleOpenChat(contact.ContactUser)}>\n            <Avatar user={contact.ContactUser} />\n            <div className=\"name\">\n              {name}\n              {/* {`${contact.ContactUser.NameFirst} ${contact.ContactUser.NameSecond}`} */}\n            </div>\n          </div>\n        )\n      }\n    })\n  }\n\n  const showGroups = () => {\n    return props.groups.map(group => {\n      return (\n        <TabPane tab={group.Title} key={group.GroupId}>\n          {showContacts()}\n        </TabPane>\n      )\n    })\n  }\n\n  return (\n    <Modal\n      visible={props.contactsModal}\n      // visible={true}\n      onCancel={() => props.toggleModal(\"contactsModal\")}\n      title=\"Контакты\"\n      footer={null}\n      maskClosable\n      className=\"contacts\"\n    >\n      <Tabs defaultActiveKey=\"1\" onChange={changeGroup}>\n        <TabPane tab=\"Все\" key=\"all\">\n          {showContacts()}\n        </TabPane>\n        {showGroups()}\n      </Tabs>\n    </Modal>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    contactsModal: state.ui.modals.contactsModal,\n    users: state.users,\n    contacts: state.contacts.users,\n    contactsIDs: state.contacts.usersIDs,\n    groups: state.contacts.groups\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    toggleModal: name => dispatch(toggleModal(name)),\n    openDialog: data => dispatch(openDialog(data))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ContactsModal)\n","/* eslint-disable */\nimport React, {useState} from \"react\"\nimport { connect } from \"react-redux\"\nimport { Modal, Button, Input, Divider, Form, Typography, Icon } from \"antd\"\nimport { toggleModal } from \"../actions/ui\"\nimport { removeContactFromGroup, removeGroup } from \"../actions/contacts\"\nimport Avatar from \"../components/Avatar\"\nimport socket from \"../transport/Connect\"\nimport selectors from \"../selectors\"\n\nconst { Text } = Typography\n\nfunction ContactsGroupsModal(props) {\n  const [chatName, setChatName] = useState(null)\n  const [nameError, setNameError] = useState(false)\n  const [groupOpen, setGroupOpen] = useState(false)\n  const [creatingGroup, setCreatingGroup] = useState(false)\n  const [usersIDs, setUsersIds] = useState([])\n  const [showUsers, setShowUsers] = useState(false)\n\n  const handleSetChatName = value => {\n    setChatName(value)\n    setNameError(false)\n    if (value.length < 1) {\n      setNameError(true)\n    }\n  }\n\n  const removeContactGroup = (groupId) => {\n    const removeGroup = {\n      GroupsId: [groupId],\n      RequestId: socket.makeId(),\n      RequestType: 57,\n      Type: 0\n    }\n\n    socket.send(removeGroup)\n    props.removeGroup(groupId)\n  }\n\n  const showGroups = () => {\n    return props.groups.map(group => {\n      return (\n        <div className=\"contact\" key={group.GroupId}>\n          <div className=\"name\" onClick={() => openGroup(group.GroupId)}>{group.Title}</div>\n          <Button className=\"remove-user\" type=\"danger\" shape=\"circle\" icon=\"close\" onClick={() => removeContactGroup(group.GroupId)} />\n        </div>\n      )\n    })\n  }\n\n  const openGroup = groupId => {\n    const openedGroup = props.groups.find(group => group.GroupId === groupId)\n    if (openedGroup) {\n      setGroupOpen(openedGroup)\n    }\n  }\n\n  const handleSetCreatingGroup = () => {\n    if (!chatName) {\n      setNameError(true)\n    } else {\n      setCreatingGroup(\"step2\")\n    }\n  }\n\n  const updateGroup = () => {\n    const addUsersToGroup = {\n      UsersId: usersIDs,\n      GroupId: groupOpen.GroupId,\n      RequestId: socket.makeId(),\n      RequestType: 58,\n      Type: 0\n    }\n    \n    socket.send(addUsersToGroup)\n\n    props.toggleModal(\"contactsGroupsModal\")\n  }\n\n  const createGroup = () => {\n    const newGroup = {\n      Group: {\n        GroupId: groupOpen ? groupOpen.GroupId : null,\n        Title: chatName ? chatName : groupOpen.Title,\n        UsersId: usersIDs,\n      },\n      RequestId: socket.makeId(),\n      RequestType: 56,\n      Type: 0\n    }\n    \n    socket.send(newGroup)\n\n    props.toggleModal(\"contactsGroupsModal\")\n  }\n\n  const removeUserFromGroup = user => {\n    const removeUser = {\n      UsersId: [user.Id],\n      GroupId: groupOpen.GroupId,\n      RequestId: socket.makeId(),\n      RequestType: 59,\n      Type: 0\n    }\n    \n    socket.send(removeUser)\n\n    props.removeContactFromGroup({userId: user.Id, groupId: groupOpen.GroupId})\n  }\n\n  const showUsersInGroup = () => {\n    return props.contacts.users.map(user => {\n      if(user.ContactUser){\n        if(user.GroupsId.includes(groupOpen.GroupId)){\n          let name = null\n          if (user.ContactUser.NameFirst) {\n            name = user.ContactUser.NameFirst\n          }\n          if (user.ContactUser.NameSecond) {\n            name = name + ' ' + user.ContactUser.NameSecond\n          }\n          return (\n            <div key={user.ContactId} className='contacts'>\n              <>\n              <Avatar user={user.ContactUser} />\n              {name ? name : 'Имя скрыто'}\n              </>\n              <Button className=\"remove-user\" type=\"danger\" shape=\"circle\" icon=\"user-delete\" onClick={() => removeUserFromGroup(user.ContactUser)} />\n            </div>\n          )\n        }\n      }\n    })\n  }\n\n  const addContactToChat = userId => {\n    let users = [...usersIDs]\n    if (usersIDs.includes(userId)) {\n      let foudnUserIndex = users.indexOf(userId)\n      users.splice(foudnUserIndex, 1)\n      setUsersIds(users)\n    } else {\n      users.push(userId)\n      setUsersIds(users)\n    }\n  }\n\n  const showContacts = () => {\n    let contacts = []\n    if (groupOpen) {\n      contacts = props.contacts.users.map(contact => {\n        if (!contact.GroupsId.includes(groupOpen.GroupId)) {\n          return contact\n        }\n      })\n    } else {\n      contacts = props.contacts.users\n    }\n    return contacts.map(user => {\n      if(user){\n        let name = selectors.getUserName(user, props.contacts.users)\n        // if (user.ContactUser.NameFirst) {\n        //   name = user.ContactUser.NameFirst\n        // }\n        // if (user.ContactUser.NameSecond) {\n        //   name = name + ' ' + user.ContactUser.NameSecond\n        // }\n        return (\n          <div key={user.ContactId} className={usersIDs.includes(user.ContactUserId) ? 'contacts contacts-active' : 'contacts'} onClick={() => {addContactToChat(user.ContactUserId)}}>\n            <Avatar user={user.ContactUser} />\n            {name}\n          </div>\n        )\n      }\n    })\n  }\n\n  const handleCloseModal = () => {\n    setChatName(null)\n    setNameError(false)\n    setGroupOpen(false)\n    setCreatingGroup(false)\n    setUsersIds([])\n    setShowUsers(false)\n    props.toggleModal(\"contactsGroupsModal\")\n  }\n\n  return (\n    <Modal\n      visible={props.contactsGroupsModal}\n      // visible={true}\n      onCancel={() => handleCloseModal()}\n      title=\"Группы контактов\"\n      footer={null}\n      maskClosable\n      className=\"contacts create-chat-modal\"\n    >\n      {\n        creatingGroup === \"step1\" ?\n          <div className=\"content\">\n            <div className=\"modal_back\" onClick={() => setCreatingGroup(false)}><Icon type=\"arrow-left\" /></div>\n            <Form.Item\n              validateStatus={nameError ? \"error\" : ''}\n              help={nameError ? \"Это поле обязательно для заполнения\" : false}\n            >\n              <Input\n                placeholder=\"Название группы\"\n                onChange={(e) => handleSetChatName(e.target.value)}\n              />\n            </Form.Item>\n            <Divider />\n            <Button type=\"primary\" block onClick={() => handleSetCreatingGroup()}>Далее</Button>\n          </div>\n        : creatingGroup === \"step2\" ?\n          <div className=\"content\">\n            <div className=\"modal_back\" onClick={() => setCreatingGroup(\"step1\")}><Icon type=\"arrow-left\" /></div>\n            <Text strong>Добавьте участников</Text>\n            <div className=\"wrap_contacts\">\n              {showContacts()}\n            </div>\n            <Divider />\n            <Button type=\"primary\" block onClick={() => createGroup()}>Создать группу</Button>\n          </div>\n        : groupOpen ?\n          <div className=\"content\">\n            {\n              showUsers ?\n                <>\n                  <div className=\"modal_back\" onClick={() => setShowUsers(false)}><Icon type=\"arrow-left\" /></div>\n                  <Text strong>Добавьте участников</Text>\n                  <div className=\"wrap_contacts\">\n                    {showContacts()}\n                  </div>\n                  <Divider />\n                </>\n              :\n                <>\n                  <div className=\"modal_back\" onClick={() => setGroupOpen(false)}><Icon type=\"arrow-left\" /></div>\n                  <Text strong>Название:</Text>\n                  <Input defaultValue={chatName ? chatName : groupOpen.Title} onChange={(e) => handleSetChatName(e.target.value)} />\n                  <Divider />\n                  <Text strong>Участники:</Text>\n                  <div className=\"wrap_contacts\">\n                    {showUsersInGroup()}\n                  </div>\n                  <Divider />\n                  <Button type=\"normal\" block icon=\"usergroup-add\" onClick={() => setShowUsers(!showUsers)}>Добавить пользователей</Button>\n                  <Divider />\n                </>\n            }\n            <Button type=\"primary\" block onClick={() => updateGroup()}>Сохранить</Button>\n          </div>\n        :\n          <>\n            {showGroups()}\n            <div className=\"content\">\n              <Button type=\"primary\" block onClick={() => setCreatingGroup(\"step1\")}>Добавить группу</Button>\n            </div>\n          </>\n      }\n    </Modal>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    contactsGroupsModal: state.ui.modals.contactsGroupsModal,\n    users: state.users,\n    contacts: state.contacts,\n    contactsIDs: state.contacts.usersIDs,\n    groups: state.contacts.groups\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    toggleModal: name => dispatch(toggleModal(name)),\n    removeContactFromGroup: data => dispatch(removeContactFromGroup(data)),\n    removeGroup: data => dispatch(removeGroup(data))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ContactsGroupsModal)","export function setContactUsersIDs(usersIDs) {\n  return {\n    type: \"SET_CONTACT_USERS_IDS\",\n    usersIDs\n  }\n}\n\nexport function setContacts(contacts) {\n  return {\n    type: \"SET_CONTACTS\",\n    contacts\n  }\n}\n\nexport function userGroupsReceived(groups) {\n  return {\n    type: \"USER_GROUPS_RECEIVED\",\n    groups\n  }\n}\n\nexport function removeContactFromGroup(payload) {\n  return {\n    type: \"REMOVE_CONTACT_FROM_GROUP\",\n    payload\n  }\n}\n\nexport function removeGroup(groupId) {\n  return {\n    type: \"REMOVE_GROUP\",\n    groupId\n  }\n}\n","/* eslint-disable */\nimport React, {useState, useEffect} from \"react\"\nimport { connect } from \"react-redux\"\nimport { Modal, Button, Input, Divider, Upload, Icon, message, Switch } from \"antd\"\nimport { toggleModal } from \"../actions/ui\"\nimport Request from \"../transport/Request\"\nimport Avatar from \"./Avatar\"\nimport axios from 'axios'\n\nfunction SettingsModal(props) {\n  const [loading, setLoading] = useState(false)\n  const [imageUrl, setImageUrl] = useState(false)\n  const [name, setName] = useState('')\n  const [lastName, setLastName] = useState('')\n  const [about, setAbout] = useState('')\n  const [privacySettings, setPrivacySettings] = useState(false)\n  const [namePrivacy, setNamePrivacy] = useState(false)\n  const [photoPrivacy, setPhotoPrivacy] = useState(false)\n  const [onlinePrivacy, setOnlinePrivacy] = useState(false)\n  const [phonePrivacy, setPhonePrivacy] = useState(false)\n  const [emailPrivacy, setEmailPrivacy] = useState(false)\n\n  useEffect(() => {\n    if (props.user) {\n      setName(props.user.NameFirst)\n      setLastName(props.user.NameSecond)\n      setAbout(props.user.About)\n      setImageUrl(props.user.Photo)\n      setNamePrivacy(props.user.Visible[0][1])\n      setPhotoPrivacy(props.user.Visible[0][2])\n      setOnlinePrivacy(props.user.Visible[0][14])\n      setPhonePrivacy(props.user.Visible[0][15])\n      setEmailPrivacy(props.user.Visible[0][17])\n    }\n  }, [props.user])\n  \n  const beforeUpload = file => {\n    const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png'\n    if (!isJpgOrPng) {\n      message.error('Поддерживается только загрузка JPG/PNG файлов!')\n    }\n    return isJpgOrPng\n  }\n\n  const handleChange = info => {\n    if (info.file.status === 'uploading') {\n      setLoading(true)\n      return\n    }\n  }\n\n  const uploadButton = (\n    <div>\n      <Icon type={loading ? 'loading' : 'plus'} />\n      <div className=\"ant-upload-text\">Upload</div>\n    </div>\n  )\n\n  const handleUploadImage = data => {\n    const fileAccessToken = localStorage.getItem('FileAccessToken')\n    axios.defaults.headers['FileAccessToken'] = fileAccessToken\n\n    const formData = new FormData()\n    formData.append('file', data.file)\n  \n    axios.post(`https://${props.node}:5000/api/Files`, formData)\n    .then(\n        (res) => {\n          if (res.status === 200) {\n            setLoading(false)\n            setImageUrl(res.data.File.FileId)\n          }\n        }\n    )\n    .catch(\n        (err) => {\n          // console.log(err)\n        }\n    )\n  }\n\n  const handleUpdateUser = () => {\n    let privacy = props.user.Visible[0]\n    privacy[1] = namePrivacy\n    privacy[2] = photoPrivacy\n    privacy[14] = onlinePrivacy\n    privacy[15] = phonePrivacy\n    privacy[17] = emailPrivacy\n\n    const userData = {\n      NameFirst: name,\n      NameSecond: lastName,\n      About: about,\n      Photo: imageUrl,\n      Privacy: privacy\n    }\n\n    Request.editUser(userData)\n  }\n\n  return (\n    <Modal\n      visible={props.settingsModal}\n      // visible={true}\n      onCancel={() => props.toggleModal(\"settingsModal\")}\n      title=\"Редактировать профиль\"\n      footer={null}\n      maskClosable\n      className=\"contacts\"\n    >\n      {\n        props.user ?\n          <div className=\"content settings\">\n            {!privacySettings ?\n              <>\n                <Upload\n                  listType=\"picture-card\"\n                  className=\"avatar-uploader\"\n                  showUploadList={false}\n                  customRequest={file => handleUploadImage(file)}\n                  beforeUpload={beforeUpload}\n                  onChange={handleChange}\n                >\n                  {\n                    loading ? \n                      <Icon type=\"loading\" className=\"loading-icon\" />\n                    : null\n                  }\n                  {\n                    imageUrl ?\n                      <img src={`https://${props.node}:5000/api/Files/${imageUrl}`} alt=\"avatar\" style={{ width: '100%' }} />\n                    : props.user.Photo ?\n                      <Avatar user={props.user} />\n                    : uploadButton\n                  }\n                </Upload>\n                <Divider />\n                <Input value={lastName} onChange={e => setLastName(e.target.value)} placeholder=\"Фамилия\" />\n                <Divider />\n                <Input value={name} onChange={e => setName(e.target.value)} placeholder=\"Имя\" />\n                <Divider />\n                <Input value={about} onChange={e => setAbout(e.target.value)} placeholder=\"О себе\" />\n                <Divider />\n                <Input addonBefore=\"+\" defaultValue={props.user.Phones[0] ? props.user.Phones[0].FullNumber.replace('+', '') : ''} placeholder=\"Телефон\" disabled />\n                <Divider />\n                <Input defaultValue={props.user.Emails[0]} placeholder=\"Email\" disabled />\n                <Divider />\n                <Button type=\"link\" onClick={() => {setPrivacySettings(true)}}>Настроки приватности</Button>\n              </>\n            :\n              <>\n                <div className=\"modal_back\" onClick={() => setPrivacySettings(false)}><Icon type=\"arrow-left\" /></div>\n                <div className='switch-label'>\n                  <div>Имя, тэг</div>\n                  <Switch checked={namePrivacy} onChange={(value) => setNamePrivacy(value)} />\n                </div>\n                <Divider />\n                <div className='switch-label'>\n                  <div>Онлайн статус</div>\n                  <Switch checked={onlinePrivacy} onChange={(value) => setOnlinePrivacy(value)} />\n                </div>\n                <Divider />\n                <div className='switch-label'>\n                  <div>Телефон</div>\n                  <Switch checked={phonePrivacy} onChange={(value) => setPhonePrivacy(value)} />\n                </div>\n                <Divider />\n                <div className='switch-label'>\n                  <div>Email</div>\n                  <Switch checked={emailPrivacy} onChange={(value) => setEmailPrivacy(value)} />\n                </div>\n                <Divider />\n                <div className='switch-label'>\n                  <div>Фото, о себе</div>\n                  <Switch checked={photoPrivacy} onChange={(value) => setPhotoPrivacy(value)} />\n                </div>\n              </>\n            }\n            <Divider />\n            <Button type=\"primary\" block onClick={() => handleUpdateUser()}>Сохранить</Button>\n          </div>\n        : null\n      }        \n    </Modal>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    settingsModal: state.ui.modals.settingsModal,\n    user: state.users.find(user => user.currentUser === true),\n    node: state.node.activeNode.Domains[0]\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    toggleModal: name => dispatch(toggleModal(name))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SettingsModal)","/* eslint-disable */\nimport React, { useState, useEffect } from \"react\"\nimport { connect } from \"react-redux\"\nimport { BrowserRouter as Router, Route } from \"react-router-dom\"\nimport Sidebar from \"./Sidebar\"\nimport DialogContainer from \"./DialogContainer\"\nimport ProfileModal from \"./ProfileModal\"\nimport CreateChatModal from \"./CreateChatModal\"\nimport ContactsModal from \"./ContactsModal\"\nimport ContactsGroupsModal from \"./ContactsGroupsModal\"\nimport { toggleDrawer, toggleModal } from \"../actions/ui\"\nimport { Drawer } from 'antd';\nimport SettingsModal from \"./SettingsModal\"\nimport socket from \"../transport/Connect\"\nimport selectors from \"../selectors\"\n\nfunction MainContainer(props) {\n  const logout = () => {\n    const logout = {\n      Full: false,\n      AccessToken: localStorage.getItem(\"AccessToken\"),\n      RequestType: 34,\n      RequestId: socket.makeId(),\n      Type: 0\n    }\n\n    socket.send(logout)\n\n    localStorage.removeItem(\"AccessToken\")\n    localStorage.removeItem(\"FileAccessToken\")\n    localStorage.removeItem(\"RefreshToken\")\n    localStorage.removeItem(\"User\")\n    localStorage.removeItem(\"keysPair\")\n    localStorage.removeItem(\"signKeysPair\")\n\n    window.location.replace(\"/\")\n  }\n\n  return (\n    <Router>\n      <div className=\"page\">\n        <div className=\"page__content\">\n          <Drawer\n            visible={props.showDrawer}\n            // visible={true}\n            placement='left'\n            closable={true}\n            onClose={() => props.toggleDrawer()}\n            width='366'\n          >\n            {\n              props.user ? (\n                <div className=\"drawer-user\">\n                  <div className=\"drawer-user__ava\">\n                    { props.user.Photo ? (\n                      <div\n                        style={{\n                          width: \"100%\",\n                          height: \"100%\",\n                          backgroundSize: \"cover\",\n                          backgroundPosition: \"center center\",\n                          backgroundImage: `url(https://${props.node}:5000/api/Files/${props.user.Photo})`,\n                          backgroundRepeat: \"no-repeat\"\n                        }}\n                      />\n                    ) : (\n                      <div className=\"drawer-user__photo-default avatar-default\">{selectors.getUserInitials(props.user)}</div>\n                    )}\n                  </div>\n                  <div className=\"drawer-user__name\">\n                    {props.user.NameFirst + ' ' + props.user.NameSecond}\n                  </div>\n                </div>\n              ) : null\n            }\n            <ul className=\"menu\">\n              <li onClick={() => props.toggleModal(\"createChatModal\")}>Создать групповой чат</li>\n              <li onClick={() => props.toggleModal(\"contactsModal\")}>Контакты</li>\n              <li onClick={() => props.toggleModal(\"contactsGroupsModal\")}>Группы контактов</li>\n              <li onClick={() => props.toggleModal(\"settingsModal\")}>Настройки</li>\n              <li onClick={logout}>Выход</li>\n            </ul>\n            <div className=\"app-version\">v0.1.13</div>\n          </Drawer>\n          <>\n            <Sidebar {...props} />\n            <DialogContainer />\n          </>\n          {/* {windowWidth > 675 ? (\n            <>\n              <Sidebar {...props} />\n              <DialogContainer />\n            </>\n          ) : (\n            !selectors.getActiveDialog(props.dialogs) ? <Sidebar {...props} /> : <DialogContainer />\n          )} */}\n        </div>\n      </div>\n      <ProfileModal />\n      <CreateChatModal />\n      <ContactsModal />\n      <ContactsGroupsModal />\n      <SettingsModal />\n    </Router>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    dialogs: state.dialogs,\n    showDrawer: state.ui.showDrawer,\n    user: state.users.find(user => user.currentUser === true),\n    node: state.node.activeNode.Domains[0]\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    toggleDrawer: () => dispatch(toggleDrawer()),\n    toggleModal: name => dispatch(toggleModal(name))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MainContainer)\n","/* eslint-disable */\nimport {useEffect} from \"react\"\nimport { connect } from \"react-redux\"\nimport Connect from \"./Connect\"\nimport Request from \"./Request\"\nimport {\n  dialogsReceived,\n  chatsReceived,\n  messagesReceived,\n  openDialog,\n  readMessages,\n} from \"../actions/dialogs\"\nimport { toggleModal, toggleDrawer, socketReconnect } from \"../actions/ui\"\nimport { setCallbackData } from \"../actions/callbacks\"\nimport { searchResultReceived } from \"../actions/search\"\nimport {\n  setContactUsersIDs,\n  userGroupsReceived,\n  setContacts\n} from \"../actions/contacts\"\nimport selectors from \"../selectors\"\nimport { message } from \"antd\"\nimport { userReceived, chatsUsersReceived } from \"../actions/user\"\nimport { setAuth } from \"../actions/auth\"\nimport helpers from \"../helpers\"\nimport Crypto from \"y_crypto\"\nimport { setSymmetricKey, setPublicKeys } from \"../actions/keys\"\nimport JSONbig from \"json-bigint\"\n\nfunction getUserKeys(messages) {\n  let keysId = []\n\n  messages.forEach(message => {\n    if (message.Attachments) {\n      if (message.Attachments[0]) {\n        if (message.Attachments[0].Type === 6) {\n          // TODO оставить только уникальные значения\n          // console.log(message)\n          // keysId.push(message.Attachments[0].Payload.SignKeyId.toString())\n          const userKeyRequest = {\n            UserId: message.SenderId,\n            Direction: true,\n            KeysId: [message.Attachments[0].Payload.SignKeyId.toString()],\n            RequestType: 105,\n            RequestId: Connect.makeId(),\n            Type: 0\n          }\n          Connect.send(userKeyRequest)\n        }\n      }\n    }\n  })\n}\n\nfunction Socket(props) {\n  useEffect(() => {\n    let pongInterval\n\n    Connect.onMessage = data => {\n      // errors\n      if(data.ErrorCode && data.ErrorCode != 0 && data.ErrorCode != 38 && data.ErrorCode != 18 && data.ErrorCode != 15 && data.ErrorCode != 24){\n        message.warning(data.Message)\n\n        if (data.ErrorCode === 5) {\n          localStorage.removeItem(\"FileAccessToken\")\n          localStorage.removeItem(\"AccessToken\")\n          localStorage.removeItem(\"RefreshToken\")\n          localStorage.removeItem(\"User\")\n          localStorage.removeItem(\"node\")\n          localStorage.removeItem(\"keysPair\")\n          localStorage.removeItem(\"signKeysPair\")\n          window.location.reload()\n        }\n      }\n      // pong response\n      else if (data.ResponseType === 19 && data.RequestId === 999) {\n        clearInterval(pongInterval)\n        props.socketReconnect(false)\n        \n        pongInterval = setInterval(() => {\n          Connect.reconnect()\n          props.socketReconnect(true)\n        }, 5000)\n      }\n      // Reply to authorization request or token update request\n      else if (data.ResponseType === 6) {\n        // request information about the authorized user\n        const getSelf = {\n          RequestId: Connect.makeId(),\n          RequestType: 27,\n          Type: 0\n        }\n\n        Connect.send(getSelf)\n\n        localStorage.setItem(\"FileAccessToken\", data.FileAccessToken)\n        localStorage.setItem(\"AccessToken\", data.Token.AccessToken)\n        localStorage.setItem(\"RefreshToken\", data.Token.RefreshToken)\n\n        props.setAuth(\"AUTH_SUCCESS\")\n      }\n      // Response to a request to receive the current user\n      else if (data.ResponseType === 12) {\n        const user = selectors.getFormatedUser([data.User])\n        user[0].currentUser = true\n        props.userReceived(user)\n        props.toggleModal(\"close\")\n        props.toggleDrawer(\"close\")\n      }\n      // Response to the request for dialogs\n      else if (data.ResponseType === 15) {\n        props.dialogsReceived(selectors.getFormatedDialogs(data.Conversations))\n      }\n      // Reply to a message retrieval request\n      else if (data.ResponseType === 9) {\n        // console.log('odin')\n        getUserKeys(data.Messages)\n        // second arg - flag for response messages. Only to respond to a message request, you need to set the flag \"messagesRecieved\" in the dialog\n        props.messagesReceived({messages: selectors.getFormatedMessages(data.Messages), isResponse: true})\n        // Request.getDialogs()\n      }\n      // New messages\n      else if (data.Message && data.Type === 2) {\n        // console.log('dwa')\n        props.messagesReceived({messages: selectors.getFormatedMessages([data.Message]), isResponse: false})\n        // Request.getDialogs()\n      }\n      else if (data.ResponseType === 10 && data.ErrorCode === 5) {\n        localStorage.removeItem(\"FileAccessToken\")\n        localStorage.removeItem(\"AccessToken\")\n        localStorage.removeItem(\"RefreshToken\")\n        localStorage.removeItem(\"User\")\n        localStorage.removeItem(\"node\")\n        localStorage.removeItem(\"keysPair\")\n        localStorage.removeItem(\"signKeysPair\")\n        window.location.reload()\n      }\n      // Reading outgoing messages\n      else if (data.Type === 2 && data.Code === 5) {\n        props.readMessages({conversationId: data.ConversationId, conversationType: data.ConversationType})\n      }\n      // Response to user request\n      else if (data.ResponseType === 0) {\n        props.userReceived(selectors.getFormatedUser(data.Users))\n      }\n      // Response to chat requests\n      else if (data.ResponseType === 2) {\n        const chats = selectors.getFormatedChats(data.Chats)\n\n        // request a list of chat users\n        chats.forEach(chat => {\n          const getChatsUsers = {\n            ChatId: chat.Id,\n            NavigationUserId: null,\n            RequestId: Connect.makeId(),\n            RequestType: 17,\n            Type: 0\n          }\n\n          Connect.send(getChatsUsers)\n        })\n\n        props.chatsReceived(selectors.getFormatedChats(data.Chats))\n      }\n      // Response to user chat request\n      // Their structure is different from ordinary users, here comes information related to this particular chat\n      else if (data.ResponseType === 16) {\n        props.chatsUsersReceived(selectors.getFormatedChatsUsers(data.ChatUsers))\n      }\n      // response to a public key request\n      else if (data.ResponseType === 18) {\n        props.setPublicKeys(data.Keys)\n        // const answer = {\n        //   data: data.Keys,\n        //   id: data.RequestId\n        // }\n        props.setCallbackData(data)\n      }\n      // Channel entry response\n      else if (data.ResponseType === 21) {\n        Request.getDialogs()\n      }\n      // Search Event Response\n      else if (data.ResponseType === 23) {\n        const searchResult = {}\n        if (data.Users.length > 0) {\n          searchResult.users = data.Users\n        }\n        if (data.Chats.length > 0) {\n          searchResult.chats = data.Chats\n        }\n        if (data.Channels.length > 0) {\n          searchResult.channels = data.Channels\n        }\n        props.searchResultReceived(searchResult)\n      }\n      // Response to contact list request\n      else if (data.ResponseType === 27) {\n        let userIDs = data.Contacts.map(user => {\n          return user.ContactUserId\n        })\n\n        props.setContactUsersIDs(userIDs)\n        props.setContacts(data.Contacts)\n\n        if (userIDs.length > 0) {\n          Request.getUsers(userIDs)\n        }\n      }\n      // Response to contact group request\n      else if (data.ResponseType === 26) {\n        props.userGroupsReceived(data.Groups)\n      }\n      // Message Read Notification\n      else if (data.Code === 5) {\n        props.messagesRead(data.ConversationId)\n      }\n      // Request to receive keys from another device\n      else if (data.Type === 8 && data.PublicKey) {\n        // console.log('ПРИШЕЛ ЗАПРОС НА КЛЮЧИ С ДРУГОГО УСТРЙСТВА')\n        helpers.devicesKeysExchange(data.PublicKey, data.RequestId)\n      }\n      // The keys came from another device\n      else if (data.Type === 2 && data.Code === 12) {\n        // console.log('ПРИШЛИ КЛЮЧИ С ДРУГИХ УСТРОЙСТВ')\n        helpers.setKeysFromAnotherDevice(data)\n      }\n    }\n  }, [])\n\n  return null\n}\n\nfunction mapStateToProps(state) {\n  return {\n    users: state.users\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    dialogsReceived: dialogs => dispatch(dialogsReceived(dialogs)),\n    chatsReceived: chats => dispatch(chatsReceived(chats)),\n    chatsUsersReceived: chatsUsers => dispatch(chatsUsersReceived(chatsUsers)),\n    openDialog: dialogId => dispatch(openDialog(dialogId)),\n    userReceived: user => dispatch(userReceived(user)),\n    messagesReceived: messages => dispatch(messagesReceived(messages)),\n    readMessages: data => dispatch(readMessages(data)),\n    setAuth: auth => dispatch(setAuth(auth)),\n    searchResultReceived: data => dispatch(searchResultReceived(data)),\n    setContactUsersIDs: usersIDs => dispatch(setContactUsersIDs(usersIDs)),\n    userGroupsReceived: groups => dispatch(userGroupsReceived(groups)),\n    setContacts: contacts => dispatch(setContacts(contacts)),\n    toggleModal: name => dispatch(toggleModal(name)),\n    toggleDrawer: name => dispatch(toggleDrawer(name)),\n    setSymmetricKey: key => dispatch(setSymmetricKey(key)),\n    setPublicKeys: publicKeys => dispatch(setPublicKeys(publicKeys)),\n    setCallbackData: data => dispatch(setCallbackData(data)),\n    socketReconnect: data => dispatch(socketReconnect(data)),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Socket)\n","/* eslint-disable */\nimport React, { useEffect } from \"react\"\nimport { connect } from \"react-redux\"\nimport { Spin } from \"antd\"\nimport {\n  dialogsReceived,\n  messagesReceived,\n  openDialog\n} from \"./actions/dialogs\"\nimport { userReceived } from \"./actions/user\"\nimport { setAppFocus } from \"./actions/ui\"\nimport Auth from \"./components/Auth\"\nimport Registration from \"./components/Registration\"\nimport Verify from \"./components/Verify\"\nimport MainContainer from \"./components/MainContainer\"\nimport socket from \"./transport/Connect\"\nimport Connect from \"./transport/Socket\"\nimport { setAuth } from \"./actions/auth\"\nimport { setPath } from \"./actions/path\"\nimport { setNodes, setActiveNode } from \"./actions/node\"\nimport selectors from \"./selectors\"\nimport helpers from \"./helpers\"\n\nconst licens = new WebSocket(\"wss://testlic-1.ymess.org:5005\")\n\nfunction App(props) {\n  useEffect(() => {\n    if (selectors.getActiveDialog(props.dialogs)) {\n      document.body.style.position = \"fixed\"\n    } else {\n      document.body.style.position = \"relative\"\n    }\n  }, [props.dialogs])\n\n  // Set the flag to mark the message read if the tab is not active\n  // window.onfocus = () => {\n  //   props.setAppFocus(true)\n  // }\n  // window.onblur = () => {\n  //   props.setAppFocus(false)\n  // }\n\n  window.addEventListener(\"load\",function() {\n    setTimeout(function(){\n      window.scrollTo(0, 1)\n    }, 0)\n  })\n\n  useEffect(() => {\n    if (props.auth === \"AUTH_SUCCESS\") {\n      // dialogue request\n      const getDialogs = {\n        NavigationMessageTime: null,\n        RequestId: socket.makeId(),\n        RequestType: 12,\n        Type: 0\n      }\n\n      socket.send(getDialogs)\n\n      // getting keys for another device\n      if(localStorage.getItem(\"keysPair\")) {\n        const getKeysFromAnotherDevice = {\n          PublicKey: JSON.parse(localStorage.getItem(\"keysPair\"))[JSON.parse(localStorage.getItem(\"keysPair\")).length-1].public,\n          NavigationMessageTime: null,\n          RequestId: socket.makeId(),\n          RequestType: 70,\n          Type: 0\n        }\n        // console.log('МЫ ЗАПРОСИЛИ КЛЮЧИ С ДРУГИХ УСТРЙОСТВ')\n        socket.send(getKeysFromAnotherDevice)\n      }\n    }\n  }, [props.auth])\n\n  useEffect(() => {\n    licens.onopen = () => {\n      // console.log(\"Connection with licensor established\")\n      const getNodesObj = {\n        RequestId: socket.makeId(),\n        RequestType: 1,\n        Type: 6\n      }\n\n      licens.send(JSON.stringify(getNodesObj))\n    }\n\n    licens.onmessage = event => {\n      const response = socket.blobToJson(event.data)\n      if (response.ResponseType === 2) {\n        props.setNodes(response.Nodes)\n        // set the first node by default if the \"automatically\" mode is selected\n        if (!localStorage.getItem(\"node\")) {\n          // localStorage.setItem(\"node\", JSON.stringify(response.Nodes[0]))\n          // props.setActiveNode(response.Nodes[0])\n        } else {\n          props.setActiveNode(JSON.parse(localStorage.getItem(\"node\")))\n        }\n      }\n    }\n\n    const node = JSON.parse(localStorage.getItem(\"node\"))\n    if (node) {\n      props.setActiveNode(node)\n    }\n\n    if (localStorage.getItem(\"AccessToken\")) {\n      let login\n      if (localStorage.getItem(\"User\")) {\n        login = {\n          Token: {\n            UserId: JSON.parse(localStorage.getItem(\"User\")).Id,\n            AccessToken: localStorage.getItem(\"AccessToken\"),\n            RefreshToken: localStorage.getItem(\"RefreshToken\")\n          },\n          LoginType: 0,\n          UidType: 1,\n          DeviceName: helpers.getDevice(),\n          OSName: helpers.getOS(),\n          AppName: \"Y messenger - WEB\",\n          RequestId: socket.makeId(),\n          RequestType: 33,\n          Type: 0\n        }\n      } else if (localStorage.getItem(\"Phone\")) {\n        login = {\n          Uid: localStorage.getItem(\"Phone\"),\n          Token: {\n            AccessToken: localStorage.getItem(\"AccessToken\"),\n            RefreshToken: localStorage.getItem(\"RefreshToken\")\n          },\n          LoginType: 0,\n          UidType: 0,\n          DeviceName: helpers.getDevice(),\n          OSName: helpers.getOS(),\n          AppName: \"Y messenger - WEB\",\n          RequestId: socket.makeId(),\n          RequestType: 33,\n          Type: 0\n        }\n      } else if (localStorage.getItem(\"Email\")) {\n        // console.log(\"По почте\")\n      }\n\n      socket.start(node.Domains[0])\n      socket.wsOnConnect = () => {\n        // console.log(123123)\n        socket.send(login)\n        \n        // // ping request for detect connect problem\n        // setInterval(() => {\n        //   const pingRequest = {\n        //     Length: 1,\n        //     RequestType: 102,\n        //     RequestId: 999,\n        //     Type: 0\n        //   }\n        //   console.log('ping')\n        //   socket.send(pingRequest)\n        // }, 3000)\n      }\n    } else {\n      props.setAuth(\"NO_AUTH\")\n    }\n  }, [])\n\n  return (\n    <>\n      <Connect />\n      {\n        props.auth === \"CHECK_AUTH\" ? \n          <div className=\"preloader\">\n            <Spin size=\"large\" />\n          </div>\n        : props.auth === \"AUTH_SUCCESS\" ? \n            <MainContainer/>\n        : props.path === \"by-phone\" || props.path === \"by-email\" ? \n          <Verify/>\n        : props.path === \"registration\" ? \n          <Registration/> \n        : <Auth/>\n      }\n\n\n      {/* <Router>\n        <Route\n          path=\"/\"\n          render={\n            // eslint-disable-next-line no-nested-ternary\n            props.auth === \"CHECK_AUTH\"\n              ? () => (\n                  <div className=\"preloader\">\n                    <Spin size=\"large\" />\n                  </div>\n                )\n              : props.auth === \"AUTH_SUCCESS\"\n              ? () => (\n                  <>\n                    <Route path=\"/\" component={MainContainer} />\n                  </>\n                )\n              : () => <Redirect to=\"/auth\" />\n          }\n        />\n        <Route path=\"/auth/by-phone\" component={Verify} />\n        <Route path=\"/auth/by-email\" component={Verify} />\n        <Route exact path=\"/auth\" component={Auth} />\n        <Route exact path=\"/registration\" component={Registration} />\n      </Router> */}\n    </>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    dialogs: state.dialogs,\n    users: state.users,\n    user: state.users.find(user => user.currentUser === true),\n    auth: state.auth,\n    path: state.path.currentPath,\n    socketReconnect: state.ui.socketReconnect\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    dialogsReceived: dialogs => dispatch(dialogsReceived(dialogs)),\n    openDialog: dialogId => dispatch(openDialog(dialogId)),\n    userReceived: user => dispatch(userReceived(user)),\n    messagesReceived: messages => dispatch(messagesReceived(messages)),\n    setAuth: auth => dispatch(setAuth(auth)),\n    setNodes: nodes => dispatch(setNodes(nodes)),\n    setActiveNode: node => dispatch(setActiveNode(node)),\n    setPath: path => dispatch(setPath(path)),\n    setAppFocus: data => dispatch(setAppFocus(data))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          // console.log(\n          //   'This web app is being served cache-first by a service ' +\n          //     'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          // );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              // console.log(\n              //   'New content is available and will be used when all ' +\n              //     'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              // );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              // console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      // console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import './css/style.css';\nimport './assets/fonts/fonts.css'\nimport 'antd/dist/antd.css';\nimport './css/style.scss';\nimport {Provider} from 'react-redux';\nimport configureStore from './store/configureStore';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport {BrowserRouter as Router} from \"react-router-dom\";\n\nconst store = configureStore()\n\nReactDOM.render(\n  <Provider store={store}>\n    <Router>\n      <App />\n    </Router>\n  </Provider>,\n  document.getElementById(\"root\")\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","import {createStore, applyMiddleware} from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from '../reducers';\n\nexport default function configureStore(initialState) {\n    return createStore(\n        rootReducer,\n        initialState,\n        applyMiddleware(thunk)\n    );\n}\n"],"sourceRoot":""}